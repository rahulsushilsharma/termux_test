"use strict";(self.webpackChunkyt_fe=self.webpackChunkyt_fe||[]).push([[179],{777:()=>{function Ne(t){return"function"==typeof t}function Ju(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ph=Ju(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Ko(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class kn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(Ne(r))try{r()}catch(s){e=s instanceof ph?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{TA(s)}catch(o){e=e??[],o instanceof ph?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ph(e)}}add(e){var n;if(e&&e!==this)if(this.closed)TA(e);else{if(e instanceof kn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ko(n,e)}remove(e){const{_finalizers:n}=this;n&&Ko(n,e),e instanceof kn&&e._removeParent(this)}}kn.EMPTY=(()=>{const t=new kn;return t.closed=!0,t})();const EA=kn.EMPTY;function CA(t){return t instanceof kn||t&&"closed"in t&&Ne(t.remove)&&Ne(t.add)&&Ne(t.unsubscribe)}function TA(t){Ne(t)?t():t.unsubscribe()}const bs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gh={setTimeout(t,e,...n){const{delegate:r}=gh;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=gh;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function DA(t){gh.setTimeout(()=>{const{onUnhandledError:e}=bs;if(!e)throw t;e(t)})}function bA(){}const CG=n_("C",void 0,void 0);function n_(t,e,n){return{kind:t,value:e,error:n}}let Ss=null;function mh(t){if(bs.useDeprecatedSynchronousErrorHandling){const e=!Ss;if(e&&(Ss={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Ss;if(Ss=null,n)throw r}}else t()}class r_ extends kn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,CA(e)&&e.add(this)):this.destination=RG}static create(e,n,r){return new ec(e,n,r)}next(e){this.isStopped?s_(function DG(t){return n_("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?s_(function TG(t){return n_("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?s_(CG,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const SG=Function.prototype.bind;function i_(t,e){return SG.call(t,e)}class AG{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){_h(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){_h(r)}else _h(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){_h(n)}}}class ec extends r_{constructor(e,n,r){let i;if(super(),Ne(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&bs.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&i_(e.next,s),error:e.error&&i_(e.error,s),complete:e.complete&&i_(e.complete,s)}):i=e}this.destination=new AG(i)}}function _h(t){bs.useDeprecatedSynchronousErrorHandling?function bG(t){bs.useDeprecatedSynchronousErrorHandling&&Ss&&(Ss.errorThrown=!0,Ss.error=t)}(t):DA(t)}function s_(t,e){const{onStoppedNotification:n}=bs;n&&gh.setTimeout(()=>n(t,e))}const RG={closed:!0,next:bA,error:function xG(t){throw t},complete:bA},o_="function"==typeof Symbol&&Symbol.observable||"@@observable";function Fi(t){return t}function SA(t){return 0===t.length?Fi:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Be=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function MG(t){return t&&t instanceof r_||function kG(t){return t&&Ne(t.next)&&Ne(t.error)&&Ne(t.complete)}(t)&&CA(t)}(n)?n:new ec(n,r,i);return mh(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=AA(r))((i,s)=>{const o=new ec({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[o_](){return this}pipe(...n){return SA(n)(this)}toPromise(n){return new(n=AA(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function AA(t){var e;return null!==(e=t??bs.Promise)&&void 0!==e?e:Promise}const PG=Ju(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let br=(()=>{class t extends Be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new xA(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PG}next(n){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?EA:(this.currentObservers=null,s.push(n),new kn(()=>{this.currentObservers=null,Ko(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Be;return n.source=this,n}}return t.create=(e,n)=>new xA(e,n),t})();class xA extends br{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:EA}}function RA(t){return Ne(t?.lift)}function et(t){return e=>{if(RA(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tt(t,e,n,r,i){return new NA(t,e,n,r,i)}class NA extends r_{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function oe(t,e){return et((n,r)=>{let i=0;n.subscribe(tt(r,s=>{r.next(t.call(e,s,i++))}))})}function MA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function PA(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(l){try{c(r.next(l))}catch(d){o(d)}}function u(l){try{c(r.throw(l))}catch(d){o(d)}}function c(l){l.done?s(l.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(l.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}function As(t){return this instanceof As?(this.v=t,this):new As(t)}function FG(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(p,g){s.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{!function u(h){h.value instanceof As?Promise.resolve(h.value.v).then(c,l):d(s[0][2],h)}(r[h](f))}catch(p){d(s[0][3],p)}}function c(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function LG(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function FA(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){!function i(s,o,a,u){Promise.resolve(u).then(function(c){s({value:c,done:a})},o)}(a,u,(o=t[s](o)).done,o.value)})}}}const LA=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function UA(t){return Ne(t?.then)}function VA(t){return Ne(t[o_])}function BA(t){return Symbol.asyncIterator&&Ne(t?.[Symbol.asyncIterator])}function $A(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const jA=function VG(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function HA(t){return Ne(t?.[jA])}function GA(t){return FG(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield As(n.read());if(i)return yield As(void 0);yield yield As(r)}}finally{n.releaseLock()}})}function WA(t){return Ne(t?.getReader)}function qn(t){if(t instanceof Be)return t;if(null!=t){if(VA(t))return function BG(t){return new Be(e=>{const n=t[o_]();if(Ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(LA(t))return function $G(t){return new Be(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(UA(t))return function jG(t){return new Be(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,DA)})}(t);if(BA(t))return zA(t);if(HA(t))return function HG(t){return new Be(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(WA(t))return function GG(t){return zA(GA(t))}(t)}throw $A(t)}function zA(t){return new Be(e=>{(function WG(t,e){var n,r,i,s;return PA(this,void 0,void 0,function*(){try{for(n=LG(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Zr(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Tt(t,e,n=1/0){return Ne(e)?Tt((r,i)=>oe((s,o)=>e(r,s,i,o))(qn(t(r,i))),n):("number"==typeof e&&(n=e),et((r,i)=>function zG(t,e,n,r,i,s,o,a){const u=[];let c=0,l=0,d=!1;const h=()=>{d&&!u.length&&!c&&e.complete()},f=g=>c<r?p(g):u.push(g),p=g=>{s&&e.next(g),c++;let _=!1;qn(n(g,l++)).subscribe(tt(e,I=>{i?.(I),s?f(I):e.next(I)},()=>{_=!0},void 0,()=>{if(_)try{for(c--;u.length&&c<r;){const I=u.shift();o?Zr(e,o,()=>p(I)):p(I)}h()}catch(I){e.error(I)}}))};return t.subscribe(tt(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function Qo(t=1/0){return Tt(Fi,t)}const Sr=new Be(t=>t.complete());function u_(t){return t[t.length-1]}function tc(t){return function KG(t){return t&&Ne(t.schedule)}(u_(t))?t.pop():void 0}function yh(t,e=0){return et((n,r)=>{n.subscribe(tt(r,i=>Zr(r,t,()=>r.next(i),e),()=>Zr(r,t,()=>r.complete(),e),i=>Zr(r,t,()=>r.error(i),e)))})}function vh(t,e=0){return et((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function qA(t,e){if(!t)throw new Error("Iterable cannot be null");return new Be(n=>{Zr(n,e,()=>{const r=t[Symbol.asyncIterator]();Zr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function pt(t,e){return e?function nW(t,e){if(null!=t){if(VA(t))return function XG(t,e){return qn(t).pipe(vh(e),yh(e))}(t,e);if(LA(t))return function JG(t,e){return new Be(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(UA(t))return function ZG(t,e){return qn(t).pipe(vh(e),yh(e))}(t,e);if(BA(t))return qA(t,e);if(HA(t))return function eW(t,e){return new Be(n=>{let r;return Zr(n,e,()=>{r=t[jA](),Zr(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>Ne(r?.return)&&r.return()})}(t,e);if(WA(t))return function tW(t,e){return qA(GA(t),e)}(t,e)}throw $A(t)}(t,e):qn(t)}function c_(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new ec({next:()=>{r.unsubscribe(),t()}});return qn(e(...n)).subscribe(r)}function xe(t){for(let e in t)if(t[e]===xe)return e;throw Error("Could not find renamed property on target object.")}function ke(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ke).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function d_(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const sW=xe({__forward_ref__:xe});function h_(t){return t.__forward_ref__=h_,t.toString=function(){return ke(this())},t}function G(t){return f_(t)?t():t}function f_(t){return"function"==typeof t&&t.hasOwnProperty(sW)&&t.__forward_ref__===h_}function p_(t){return t&&!!t.\u0275providers}class R extends Error{constructor(e,n){super(function wh(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function X(t){return"string"==typeof t?t:null==t?"":String(t)}function Ih(t,e){throw new R(-201,!1)}function Kn(t,e){null==t&&function Ee(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function W(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Eh(t){return QA(t,Ch)||QA(t,XA)}function QA(t,e){return t.hasOwnProperty(e)?t[e]:null}function YA(t){return t&&(t.hasOwnProperty(g_)||t.hasOwnProperty(pW))?t[g_]:null}const Ch=xe({\u0275prov:xe}),g_=xe({\u0275inj:xe}),XA=xe({ngInjectableDef:xe}),pW=xe({ngInjectorDef:xe});var z=(()=>((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z))();let m_;function Qn(t){const e=m_;return m_=t,e}function ZA(t,e,n){const r=Eh(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&z.Optional?null:void 0!==e?e:void Ih(ke(t))}const Me=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),nc={},__="__NG_DI_FLAG__",Th="ngTempTokenPath",_W=/\n/gm,JA="__source";let rc;function Yo(t){const e=rc;return rc=t,e}function vW(t,e=z.Default){if(void 0===rc)throw new R(-203,!1);return null===rc?ZA(t,void 0,e):rc.get(t,e&z.Optional?null:void 0,e)}function O(t,e=z.Default){return(function gW(){return m_}()||vW)(G(t),e)}function ge(t,e=z.Default){return O(t,Dh(e))}function Dh(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function y_(t){const e=[];for(let n=0;n<t.length;n++){const r=G(t[n]);if(Array.isArray(r)){if(0===r.length)throw new R(900,!1);let i,s=z.Default;for(let o=0;o<r.length;o++){const a=r[o],u=wW(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(O(i,s))}else e.push(O(r))}return e}function ic(t,e){return t[__]=e,t.prototype[__]=e,t}function wW(t){return t[__]}function Ui(t){return{toString:t}.toString()}var cr=(()=>((cr=cr||{})[cr.OnPush=0]="OnPush",cr[cr.Default=1]="Default",cr))(),Ar=(()=>{return(t=Ar||(Ar={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Ar;var t})();const Jr={},we=[],bh=xe({\u0275cmp:xe}),v_=xe({\u0275dir:xe}),w_=xe({\u0275pipe:xe}),tx=xe({\u0275mod:xe}),ei=xe({\u0275fac:xe}),sc=xe({__NG_ELEMENT_ID__:xe});let CW=0;function Xo(t){return Ui(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===cr.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||we,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ar.Emulated,id:"c"+CW++,styles:t.styles||we,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=t.dependencies,o=t.features;return i.inputs=ix(t.inputs,r),i.outputs=ix(t.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(nx).filter(rx):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(sn).filter(rx):null,i})}function nx(t){return Ce(t)||Kt(t)}function rx(t){return null!==t}function Yn(t){return Ui(()=>({type:t.type,bootstrap:t.bootstrap||we,declarations:t.declarations||we,imports:t.imports||we,exports:t.exports||we,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ix(t,e){if(null==t)return Jr;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const rn=Xo;function _n(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ce(t){return t[bh]||null}function Kt(t){return t[v_]||null}function sn(t){return t[w_]||null}function On(t,e){const n=t[tx]||null;if(!n&&!0===e)throw new Error(`Type ${ke(t)} does not have '\u0275mod' property.`);return n}function Fn(t){return Array.isArray(t)&&"object"==typeof t[1]}function dr(t){return Array.isArray(t)&&!0===t[1]}function C_(t){return 0!=(4&t.flags)}function cc(t){return t.componentOffset>-1}function Nh(t){return 1==(1&t.flags)}function hr(t){return null!==t.template}function bW(t){return 0!=(256&t[2])}function Rs(t,e){return t.hasOwnProperty(ei)?t[ei]:null}class xW{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ns(){return lx}function lx(t){return t.type.prototype.ngOnChanges&&(t.setInput=NW),RW}function RW(){const t=hx(this),e=t?.current;if(e){const n=t.previous;if(n===Jr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function NW(t,e,n,r){const i=this.declaredInputs[n],s=hx(t)||function kW(t,e){return t[dx]=e}(t,{previous:Jr,current:null}),o=s.current||(s.current={}),a=s.previous,u=a[i];o[i]=new xW(u&&u.currentValue,e,a===Jr),t[r]=e}Ns.ngInherit=!0;const dx="__ngSimpleChanges__";function hx(t){return t[dx]||null}function Mt(t){for(;Array.isArray(t);)t=t[0];return t}function Ln(t,e){return Mt(e[t.index])}function gx(t,e){return t.data[e]}function ra(t,e){return t[e]}function Un(t,e){const n=e[t];return Fn(n)?n:n[0]}function Mh(t){return 64==(64&t[2])}function Vi(t,e){return null==e?null:t[e]}function mx(t){t[18]=0}function D_(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Z={lFrame:Ax(null),bindingsEnabled:!0};function yx(){return Z.bindingsEnabled}function C(){return Z.lFrame.lView}function me(){return Z.lFrame.tView}function Pt(){let t=Ix();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ix(){return Z.lFrame.currentTNode}function Rr(t,e){const n=Z.lFrame;n.currentTNode=t,n.isParent=e}function b_(){return Z.lFrame.isParent}function ia(){return Z.lFrame.bindingIndex++}function WW(t,e){const n=Z.lFrame;n.bindingIndex=n.bindingRootIndex=t,A_(e)}function A_(t){Z.lFrame.currentDirectiveIndex=t}function R_(t){Z.lFrame.currentQueryIndex=t}function qW(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function bx(t,e,n){if(n&z.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&z.Host||(i=qW(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Z.lFrame=Sx();return r.currentTNode=e,r.lView=t,!0}function N_(t){const e=Sx(),n=t[1];Z.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Sx(){const t=Z.lFrame,e=null===t?null:t.child;return null===e?Ax(t):e}function Ax(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function xx(){const t=Z.lFrame;return Z.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Rx=xx;function k_(){const t=xx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function un(){return Z.lFrame.selectedIndex}function ks(t){Z.lFrame.selectedIndex=t}function Ph(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:l}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=l&&(t.destroyHooks||(t.destroyHooks=[])).push(n,l)}}function Oh(t,e,n){Nx(t,e,3,n)}function Fh(t,e,n,r){(3&t[2])===n&&Nx(t,e,n,r)}function M_(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Nx(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<s||-1==s)&&(nz(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function nz(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class dc{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function O_(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];Mx(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function kx(t){return 3===t||4===t||6===t}function Mx(t){return 64===t.charCodeAt(0)}function hc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Px(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Px(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function Ox(t){return-1!==t}function Lh(t){return 32767&t}function Uh(t,e){let n=function oz(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let F_=!0;function Vh(t){const e=F_;return F_=t,e}let az=0;const Nr={};function Bh(t,e){const n=Ux(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,L_(r.data,t),L_(e,null),L_(r.blueprint,null));const i=U_(t,e),s=t.injectorIndex;if(Ox(i)){const o=Lh(i),a=Uh(i,e),u=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|u[o+c]}return e[s+8]=i,s}function L_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ux(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function U_(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=zx(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function V_(t,e,n){!function uz(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(sc)&&(r=n[sc]),null==r&&(r=n[sc]=az++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Vx(t,e,n){if(n&z.Optional||void 0!==t)return t;Ih()}function Bx(t,e,n,r){if(n&z.Optional&&void 0===r&&(r=null),!(n&(z.Self|z.Host))){const i=t[9],s=Qn(void 0);try{return i?i.get(e,r,n&z.Optional):ZA(e,r,n&z.Optional)}finally{Qn(s)}}return Vx(r,0,n)}function $x(t,e,n,r=z.Default,i){if(null!==t){if(1024&e[2]){const o=function fz(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=jx(s,o,n,r|z.Self,Nr);if(a!==Nr)return a;let u=s.parent;if(!u){const c=o[21];if(c){const l=c.get(n,Nr,r);if(l!==Nr)return l}u=zx(o),o=o[15]}s=u}return i}(t,e,n,r,Nr);if(o!==Nr)return o}const s=jx(t,e,n,r,Nr);if(s!==Nr)return s}return Bx(e,n,r,i)}function jx(t,e,n,r,i){const s=function dz(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(sc)?t[sc]:void 0;return"number"==typeof e?e>=0?255&e:hz:e}(n);if("function"==typeof s){if(!bx(e,t,r))return r&z.Host?Vx(i,0,r):Bx(e,n,r,i);try{const o=s(r);if(null!=o||r&z.Optional)return o;Ih()}finally{Rx()}}else if("number"==typeof s){let o=null,a=Ux(t,e),u=-1,c=r&z.Host?e[16][6]:null;for((-1===a||r&z.SkipSelf)&&(u=-1===a?U_(t,e):e[a+8],-1!==u&&Gx(r,!1)?(o=e[1],a=Lh(u),e=Uh(u,e)):a=-1);-1!==a;){const l=e[1];if(Hx(s,a,l.data)){const d=lz(a,e,n,o,r,c);if(d!==Nr)return d}u=e[a+8],-1!==u&&Gx(r,e[1].data[a+8]===c)&&Hx(s,a,e)?(o=l,a=Lh(u),e=Uh(u,e)):a=-1}}return i}function lz(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],l=function $h(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,l=s>>20,h=i?a+l:t.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=o[f];if(f<u&&n===p||f>=u&&p.type===n)return f}if(i){const f=o[u];if(f&&hr(f)&&f.type===n)return u}return null}(a,o,n,null==r?cc(a)&&F_:r!=o&&0!=(3&a.type),i&z.Host&&s===a);return null!==l?Ms(e,o,l,a):Nr}function Ms(t,e,n,r){let i=t[n];const s=e.data;if(function rz(t){return t instanceof dc}(i)){const o=i;o.resolving&&function oW(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new R(-200,`Circular dependency in DI detected for ${t}${n}`)}(function Ie(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():X(t)}(s[n]));const a=Vh(o.canSeeViewProviders);o.resolving=!0;const u=o.injectImpl?Qn(o.injectImpl):null;bx(t,r,z.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function tz(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=lx(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==u&&Qn(u),Vh(a),o.resolving=!1,Rx()}}return i}function Hx(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Gx(t,e){return!(t&z.Self||t&z.Host&&e)}class oa{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return $x(this._tNode,this._lView,e,Dh(r),n)}}function hz(){return new oa(Pt(),C())}function B_(t){return f_(t)?()=>{const e=B_(G(t));return e&&e()}:Rs(t)}function zx(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const ua="__parameters__";function la(t,e,n){return Ui(()=>{const r=function $_(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,c,l){const d=u.hasOwnProperty(ua)?u[ua]:Object.defineProperty(u,ua,{value:[]})[ua];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class j{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=W({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ps(t,e){t.forEach(n=>Array.isArray(n)?Ps(n,e):e(n))}function Kx(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Hh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Qe=ic(la("Optional"),8),mc=ic(la("SkipSelf"),4);var yn=(()=>((yn=yn||{})[yn.Important=1]="Important",yn[yn.DashCase=2]="DashCase",yn))();const Q_=new Map;let Vz=0;const X_="__ngContext__";function Xt(t,e){Fn(e)?(t[X_]=e[20],function $z(t){Q_.set(t[20],t)}(e)):t[X_]=e}function J_(t,e){return undefined(t,e)}function wc(t){const e=t[3];return dr(e)?e[3]:e}function ey(t){return gR(t[13])}function ty(t){return gR(t[4])}function gR(t){for(;null!==t&&!dr(t);)t=t[4];return t}function fa(t,e,n,r,i){if(null!=r){let s,o=!1;dr(r)?s=r:Fn(r)&&(o=!0,r=r[0]);const a=Mt(r);0===t&&null!==n?null==i?IR(e,n,a):Os(e,n,a,i||null,!0):1===t&&null!==n?Os(e,n,a,i||null,!0):2===t?function uy(t,e,n){const r=qh(t,e);r&&function aq(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function lq(t,e,n,r,i){const s=n[7];s!==Mt(n)&&fa(e,t,r,s,i);for(let a=10;a<n.length;a++){const u=n[a];Ic(u[1],u,t,e,r,s)}}(e,t,s,n,i)}}function ry(t,e,n){return t.createElement(e,n)}function _R(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,D_(i,-1)),n.splice(r,1)}function iy(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&_R(i,r),e>0&&(t[n-1][4]=r[4]);const s=Hh(t,10+e);!function Jz(t,e){Ic(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function yR(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&Ic(t,e,n,3,null,null),function nq(t){let e=t[13];if(!e)return sy(t[1],t);for(;e;){let n=null;if(Fn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Fn(e)&&sy(e[1],e),e=e[3];null===e&&(e=t),Fn(e)&&sy(e[1],e),n=e&&e[4]}e=n}}(e)}}function sy(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function oq(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof dc)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];try{u.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function sq(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[i=o]():r[i=-o].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&dr(e[3])){n!==e[3]&&_R(n,e);const r=e[19];null!==r&&r.detachView(t)}!function jz(t){Q_.delete(t[20])}(e)}}function vR(t,e,n){return function wR(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Ar.None||s===Ar.Emulated)return null}return Ln(r,n)}}(t,e.parent,n)}function Os(t,e,n,r,i){t.insertBefore(e,n,r,i)}function IR(t,e,n){t.appendChild(e,n)}function ER(t,e,n,r,i){null!==r?Os(t,e,n,r,i):IR(t,e,n)}function qh(t,e){return t.parentNode(e)}let dy,DR=function TR(t,e,n){return 40&t.type?Ln(t,n):null};function Kh(t,e,n,r){const i=vR(t,r,e),s=e[11],a=function CR(t,e,n){return DR(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)ER(s,i,n[u],a,!1);else ER(s,i,n,a,!1)}function Qh(t,e){if(null!==e){const n=e.type;if(3&n)return Ln(e,t);if(4&n)return ay(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Qh(t,r);{const i=t[e.index];return dr(i)?ay(-1,i):Mt(i)}}if(32&n)return J_(e,t)()||Mt(t[e.index]);{const r=SR(t,e);return null!==r?Array.isArray(r)?r[0]:Qh(wc(t[16]),r):Qh(t,e.next)}}return null}function SR(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ay(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Qh(r,i)}return e[7]}function cy(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Xt(Mt(a),r),n.flags|=2),32!=(32&n.flags))if(8&u)cy(t,e,n.child,r,i,s,!1),fa(e,t,i,a,s);else if(32&u){const c=J_(n,r);let l;for(;l=c();)fa(e,t,i,l,s);fa(e,t,i,a,s)}else 16&u?AR(t,e,r,n,i,s):fa(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Ic(t,e,n,r,i,s){cy(n,r,t.firstChild,e,i,s,!1)}function AR(t,e,n,r,i,s){const o=n[16],u=o[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)fa(e,t,i,u[c],s);else cy(t,e,u,o[3],i,s,!0)}function xR(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function RR(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&O_(t,e,r),null!==i&&xR(t,e,i),null!==s&&function hq(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const Jh=new j("ENVIRONMENT_INITIALIZER"),WR=new j("INJECTOR",-1),zR=new j("INJECTOR_DEF_TYPES");class qR{get(e,n=nc){if(n===nc){const r=new Error(`NullInjectorError: No provider for ${ke(e)}!`);throw r.name="NullInjectorError",r}return n}}function Vq(...t){return{\u0275providers:KR(0,t),\u0275fromNgModule:!0}}function KR(t,...e){const n=[],r=new Set;let i;return Ps(e,s=>{const o=s;_y(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&QR(i,n),n}function QR(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];yy(i,s=>{e.push(s)})}}function _y(t,e,n,r){if(!(t=G(t)))return!1;let i=null,s=YA(t);const o=!s&&Ce(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=YA(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of u)_y(c,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Ps(s.imports,l=>{_y(l,e,n,r)&&(c||(c=[]),c.push(l))})}finally{}void 0!==c&&QR(c,e)}if(!a){const c=Rs(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:we},{provide:zR,useValue:i,multi:!0},{provide:Jh,useValue:()=>O(i),multi:!0})}const u=s.providers;null==u||a||yy(u,l=>{e.push(l)})}}return i!==t&&void 0!==t.providers}function yy(t,e){for(let n of t)p_(n)&&(n=n.\u0275providers),Array.isArray(n)?yy(n,e):e(n)}const Bq=xe({provide:String,useValue:xe});function vy(t){return null!==t&&"object"==typeof t&&Bq in t}function Ls(t){return"function"==typeof t}const wy=new j("Set Injector scope."),ef={},jq={};let Iy;function tf(){return void 0===Iy&&(Iy=new qR),Iy}class si{}class ZR extends si{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Cy(e,o=>this.processProvider(o)),this.records.set(WR,pa(void 0,this)),i.has("environment")&&this.records.set(si,pa(void 0,this));const s=this.records.get(wy);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(zR.multi,we,z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Yo(this),r=Qn(void 0);try{return e()}finally{Yo(n),Qn(r)}}get(e,n=nc,r=z.Default){this.assertNotDestroyed(),r=Dh(r);const i=Yo(this),s=Qn(void 0);try{if(!(r&z.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function qq(t){return"function"==typeof t||"object"==typeof t&&t instanceof j}(e)&&Eh(e);a=u&&this.injectableDefInScope(u)?pa(Ey(e),ef):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&z.Self?tf():this.parent).get(e,n=r&z.Optional&&n===nc?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Th]=o[Th]||[]).unshift(ke(e)),i)throw o;return function IW(t,e,n,r){const i=t[Th];throw e[JA]&&i.unshift(e[JA]),t.message=function EW(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=ke(e);if(Array.isArray(e))i=e.map(ke).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ke(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(_W,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[Th]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{Qn(s),Yo(i)}}resolveInjectorInitializers(){const e=Yo(this),n=Qn(void 0);try{const r=this.get(Jh.multi,we,z.Self);for(const i of r)i()}finally{Yo(e),Qn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(ke(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new R(205,!1)}processProvider(e){let n=Ls(e=G(e))?e:G(e&&e.provide);const r=function Gq(t){return vy(t)?pa(void 0,t.useValue):pa(function JR(t,e,n){let r;if(Ls(t)){const i=G(t);return Rs(i)||Ey(i)}if(vy(t))r=()=>G(t.useValue);else if(function XR(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...y_(t.deps||[]));else if(function YR(t){return!(!t||!t.useExisting)}(t))r=()=>O(G(t.useExisting));else{const i=G(t&&(t.useClass||t.provide));if(!function Wq(t){return!!t.deps}(t))return Rs(i)||Ey(i);r=()=>new i(...y_(t.deps))}return r}(t),ef)}(e);if(Ls(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=pa(void 0,ef,!0),i.factory=()=>y_(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===ef&&(n.value=jq,n.value=n.factory()),"object"==typeof n.value&&n.value&&function zq(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=G(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Ey(t){const e=Eh(t),n=null!==e?e.factory:Rs(t);if(null!==n)return n;if(t instanceof j)throw new R(204,!1);if(t instanceof Function)return function Hq(t){const e=t.length;if(e>0)throw function gc(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new R(204,!1);const n=function hW(t){const e=t&&(t[Ch]||t[XA]);if(e){const n=function fW(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new R(204,!1)}function pa(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Cy(t,e){for(const n of t)Array.isArray(n)?Cy(n,e):n&&p_(n)?Cy(n.\u0275providers,e):e(n)}class Kq{}class eN{}class Yq{resolveComponentFactory(e){throw function Qq(t){const e=Error(`No component factory found for ${ke(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let ga=(()=>{class t{}return t.NULL=new Yq,t})();function Xq(){return ma(Pt(),C())}function ma(t,e){return new $i(Ln(t,e))}let $i=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=Xq,t})();class nN{}let e3=(()=>{class t{}return t.\u0275prov=W({token:t,providedIn:"root",factory:()=>null}),t})();class Dc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rN=new Dc("15.1.2"),Ty={};function by(t){return t.ngOriginalError}class _a{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&by(e);for(;n&&by(n);)n=by(n);return n||null}}function oi(t){return t instanceof Function?t():t}function sN(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const oN="ng-template";function d3(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==sN(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function aN(t){return 4===t.type&&t.value!==oN}function h3(t,e,n){return e===(4!==t.type||n?t.value:oN)}function f3(t,e,n){let r=4;const i=t.attrs||[],s=function m3(t){for(let e=0;e<t.length;e++)if(kx(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!h3(t,u,n)||""===u&&1===e.length){if(fr(r))return!1;o=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!d3(t.attrs,c,n)){if(fr(r))return!1;o=!0}continue}const d=p3(8&r?"class":u,i,aN(t),n);if(-1===d){if(fr(r))return!1;o=!0;continue}if(""!==c){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==sN(f,c,0)||2&r&&c!==h){if(fr(r))return!1;o=!0}}}}else{if(!o&&!fr(r)&&!fr(u))return!1;if(o&&fr(u))continue;o=!1,r=u|1&r}}return fr(r)||o}function fr(t){return 0==(1&t)}function p3(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function _3(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function uN(t,e,n=!1){for(let r=0;r<e.length;r++)if(f3(t,e[r],n))return!0;return!1}function cN(t,e){return t?":not("+e.trim()+")":e}function v3(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!fr(o)&&(e+=cN(s,i),i=""),r=o,s=s||!fr(r);n++}return""!==i&&(e+=cN(s,i)),e}const J={};function bc(t){lN(me(),C(),un()+t,!1)}function lN(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&Oh(e,s,n)}else{const s=t.preOrderHooks;null!==s&&Fh(e,s,0,n)}ks(n)}function pN(t,e=null,n=null,r){const i=gN(t,e,n,r);return i.resolveInjectorInitializers(),i}function gN(t,e=null,n=null,r,i=new Set){const s=[n||we,Vq(t)];return r=r||("object"==typeof t?void 0:ke(t)),new ZR(s,e||tf(),r||null,i)}let Ot=(()=>{class t{static create(n,r){if(Array.isArray(n))return pN({name:""},r,n,"");{const i=n.name??"";return pN({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=nc,t.NULL=new qR,t.\u0275prov=W({token:t,providedIn:"any",factory:()=>O(WR)}),t.__NG_ELEMENT_ID__=-1,t})();function q(t,e=z.Default){const n=C();return null===n?O(t,e):$x(Pt(),n,G(t),e)}function CN(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const s=n[r+1];if(-1!==s){const o=t.data[s];R_(n[r]),o.contentQueries(2,e[s],s)}}}function sf(t,e,n,r,i,s,o,a,u,c,l){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==l||t&&1024&t[2])&&(d[2]|=1024),mx(d),d[3]=d[15]=t,d[8]=n,d[10]=o||t&&t[10],d[11]=a||t&&t[11],d[12]=u||t&&t[12]||null,d[9]=c||t&&t[9]||null,d[6]=s,d[20]=function Bz(){return Vz++}(),d[21]=l,d[16]=2==e.type?t[16]:d,d}function wa(t,e,n,r,i){let s=t.data[e];if(null===s)s=function Ny(t,e,n,r,i){const s=Ix(),o=b_(),u=t.data[e]=function W3(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u)),u}(t,e,n,r,i),function GW(){return Z.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function lc(){const t=Z.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Rr(s,!0),s}function Sc(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ky(t,e,n){N_(e);try{const r=t.viewQuery;null!==r&&jy(1,r,n);const i=t.template;null!==i&&TN(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&CN(t,e),t.staticViewQueries&&jy(2,t.viewQuery,n);const s=t.components;null!==s&&function j3(t,e){for(let n=0;n<e.length;n++)lK(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,k_()}}function af(t,e,n,r){const i=e[2];if(128!=(128&i)){N_(e);try{mx(e),function Cx(t){return Z.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&TN(t,e,n,2,r);const o=3==(3&i);if(o){const c=t.preOrderCheckHooks;null!==c&&Oh(e,c,null)}else{const c=t.preOrderHooks;null!==c&&Fh(e,c,0,null),M_(e,0)}if(function uK(t){for(let e=ey(t);null!==e;e=ty(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r];512&i[2]||D_(i[3],1),i[2]|=512}}}(e),function aK(t){for(let e=ey(t);null!==e;e=ty(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Mh(r)&&af(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&CN(t,e),o){const c=t.contentCheckHooks;null!==c&&Oh(e,c)}else{const c=t.contentHooks;null!==c&&Fh(e,c,1),M_(e,1)}!function B3(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ks(~i);else{const s=i,o=n[++r],a=n[++r];WW(o,s),a(2,e[s])}}}finally{ks(-1)}}(t,e);const a=t.components;null!==a&&function $3(t,e){for(let n=0;n<e.length;n++)cK(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&jy(2,u,r),o){const c=t.viewCheckHooks;null!==c&&Oh(e,c)}else{const c=t.viewHooks;null!==c&&Fh(e,c,2),M_(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,D_(e[3],-1))}finally{k_()}}}function TN(t,e,n,r,i){const s=un(),o=2&r;try{ks(-1),o&&e.length>22&&lN(t,e,22,!1),n(r,i)}finally{ks(s)}}function My(t,e,n){if(C_(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function Py(t,e,n){yx()&&(function X3(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;cc(n)&&function iK(t,e,n){const r=Ln(e,t),i=DN(n),s=t[10],o=uf(t,sf(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Bh(n,e),Xt(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],c=Ms(e,t,a,n);Xt(c,e),null!==o&&sK(0,a-i,c,u,0,o),hr(u)&&(Un(n.index,e)[8]=Ms(e,t,a,n))}}(t,e,n,Ln(n,e)),64==(64&n.flags)&&NN(t,e,n))}function Oy(t,e,n=Ln){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function DN(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Fy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Fy(t,e,n,r,i,s,o,a,u,c){const l=22+r,d=l+i,h=function H3(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:J);return n}(l,d),f="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function SN(t,e,n,r){for(let i in t)if(t.hasOwnProperty(i)){n=null===n?{}:n;const s=t[i];null===r?AN(n,e,i,s):r.hasOwnProperty(i)&&AN(n,e,r[i],s)}return n}function AN(t,e,n,r){t.hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}function xN(t,e){const n=Un(e,t);16&n[2]||(n[2]|=32)}function Ly(t,e,n,r){let i=!1;if(yx()){const s=null===r?null:{"":-1},o=function J3(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(uN(e,o.selectors,!1))if(r||(r=[]),hr(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),Uy(t,e,a.length)}else r.unshift(o),Uy(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let a,u;null===o?a=u=null:[a,u]=o,null!==a&&(i=!0,RN(t,e,n,a,s,u)),s&&function eK(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new R(-301,!1);r.push(e[i],s)}}}(n,r,s)}return n.mergedAttrs=hc(n.mergedAttrs,n.attrs),i}function RN(t,e,n,r,i,s){for(let c=0;c<r.length;c++)V_(Bh(n,e),t,r[c].type);!function nK(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let c=0;c<r.length;c++){const l=r[c];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,u=Sc(t,e,r.length,null);for(let c=0;c<r.length;c++){const l=r[c];n.mergedAttrs=hc(n.mergedAttrs,l.hostAttrs),rK(t,n,e,u,l),tK(u,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function z3(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,c=null;for(let l=e.directiveStart;l<i;l++){const d=s[l],h=n?n.get(d):null,p=h?h.outputs:null;u=SN(d.inputs,l,u,h?h.inputs:null),c=SN(d.outputs,l,c,p);const g=null===u||null===o||aN(e)?null:oK(u,l,o);a.push(g)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=c}(t,n,s)}function NN(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function zW(){return Z.lFrame.currentDirectiveIndex}();try{ks(s);for(let a=r;a<i;a++){const u=t.data[a],c=e[a];A_(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Z3(u,c)}}finally{ks(-1),A_(o)}}function Z3(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Uy(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function tK(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;hr(e)&&(n[""]=t)}}function rK(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Rs(i.type)),o=new dc(s,hr(i),q);t.blueprint[r]=o,n[r]=o,function Q3(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Y3(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,Sc(t,n,i.hostVars,J),i)}function sK(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let u=0;u<o.length;){const c=o[u++],l=o[u++],d=o[u++];null!==a?r.setInput(n,d,c,l):n[l]=d}}}function oK(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function kN(t,e,n,r){return[t,!0,!1,e,null,0,r,n,null,null]}function cK(t,e){const n=Un(e,t);if(Mh(n)){const r=n[1];48&n[2]?af(r,n,r.template,n[8]):n[5]>0&&By(n)}}function By(t){for(let r=ey(t);null!==r;r=ty(r))for(let i=10;i<r.length;i++){const s=r[i];if(Mh(s))if(512&s[2]){const o=s[1];af(o,s,o.template,s[8])}else s[5]>0&&By(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Un(n[r],t);Mh(i)&&i[5]>0&&By(i)}}function lK(t,e){const n=Un(e,t),r=n[1];(function dK(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),ky(r,n,n[8])}function uf(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function $y(t){for(;t;){t[2]|=32;const e=wc(t);if(bW(t)&&!e)return t;t=e}return null}function cf(t,e,n,r=!0){const i=e[10];i.begin&&i.begin();try{af(t,e,t.template,n)}catch(o){throw r&&FN(e,o),o}finally{i.end&&i.end()}}function jy(t,e,n){R_(0),e(t,n)}function MN(t){return t[7]||(t[7]=[])}function PN(t){return t.cleanup||(t.cleanup=[])}function FN(t,e){const n=t[9],r=n?n.get(_a,null):null;r&&r.handleError(e)}function Hy(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=e[o],c=t.data[o];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ai(t,e,n){const r=function kh(t,e){return Mt(e[t])}(e,t);!function mR(t,e,n){t.setValue(e,n)}(t[11],r,n)}function lf(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=d_(i,a):2==s&&(r=d_(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function df(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Mt(s)),dr(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1].firstChild;null!==c&&df(u[1],u,c,r)}const o=n.type;if(8&o)df(t,e,n.child,r);else if(32&o){const a=J_(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=SR(e,n);if(Array.isArray(a))r.push(...a);else{const u=wc(e[16]);df(u[1],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class Ac{get rootNodes(){const e=this._lView,n=e[1];return df(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(dr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(iy(e,r),Hh(n,r))}this._attachedToViewContainer=!1}yR(this._lView[1],this._lView)}onDestroy(e){!function bN(t,e,n,r){const i=MN(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&PN(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){$y(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){cf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new R(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function tq(t,e){Ic(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new R(902,!1);this._appRef=e}}class hK extends Ac{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;cf(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class LN extends ga{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Ce(e);return new xc(n,this.ngModule)}}function UN(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class pK{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Dh(r);const i=this.injector.get(e,Ty,r);return i!==Ty||n===Ty?i:this.parentInjector.get(e,n,r)}}class xc extends eN{get inputs(){return UN(this.componentDef.inputs)}get outputs(){return UN(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function w3(t){return t.map(v3).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof si?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new pK(e,s):e,a=o.get(nN,null);if(null===a)throw new R(407,!1);const u=o.get(e3,null),c=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",d=r?function G3(t,e,n){return t.selectRootElement(e,n===Ar.ShadowDom)}(c,r,this.componentDef.encapsulation):ry(c,l,function fK(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),h=this.componentDef.onPush?288:272,f=Fy(0,null,null,1,0,null,null,null,null,null),p=sf(null,f,null,h,null,null,a,c,u,o,null);let g,_;N_(p);try{const I=this.componentDef;let E,y=null;I.findHostDirectiveDefs?(E=[],y=new Map,I.findHostDirectiveDefs(I,E,y),E.push(I)):E=[I];const N=function mK(t,e){const n=t[1];return t[22]=e,wa(n,22,2,"#host",null)}(p,d),U=function _K(t,e,n,r,i,s,o,a){const u=i[1];!function yK(t,e,n,r){for(const i of t)e.mergedAttrs=hc(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(lf(e,e.mergedAttrs,!0),null!==n&&RR(r,n,e))}(r,t,e,o);const c=s.createRenderer(e,n),l=sf(i,DN(n),null,n.onPush?32:16,i[t.index],t,s,c,a||null,null,null);return u.firstCreatePass&&Uy(u,t,r.length-1),uf(i,l),i[t.index]=l}(N,d,I,E,p,a,c);_=gx(f,22),d&&function wK(t,e,n,r){if(r)O_(t,n,["ng-version",rN.full]);else{const{attrs:i,classes:s}=function I3(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!fr(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&O_(t,n,i),s&&s.length>0&&xR(t,n,s.join(" "))}}(c,I,d,r),void 0!==n&&function IK(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(_,this.ngContentSelectors,n),g=function vK(t,e,n,r,i,s){const o=Pt(),a=i[1],u=Ln(o,i);RN(a,i,o,n,null,r);for(let l=0;l<n.length;l++)Xt(Ms(i,a,o.directiveStart+l,o),i);NN(a,i,o),u&&Xt(u,i);const c=Ms(i,a,o.directiveStart+o.componentOffset,o);if(t[8]=i[8]=c,null!==s)for(const l of s)l(c,e);return My(a,o,t),c}(U,I,E,y,p,[EK]),ky(f,p,null)}finally{k_()}return new gK(this.componentType,g,ma(_,p),p,_)}}class gK extends Kq{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new hK(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Hy(s[1],s,i,e,n),xN(s,this._tNode.index)}}get injector(){return new oa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function EK(){const t=Pt();Ph(C()[1],t)}let hf=null;function Us(){if(!hf){const t=Me.Symbol;if(t&&t.iterator)hf=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(hf=r)}}}return hf}function ff(t){return!!function Wy(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Us()in t)}function Zt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function qy(t){return ra(function HW(){return Z.lFrame.contextLView}(),22+t)}function Ky(t,e,n){const r=C();return Zt(r,ia(),e)&&function Bn(t,e,n,r,i,s,o,a){const u=Ln(e,n);let l,c=e.inputs;!a&&null!=c&&(l=c[r])?(Hy(t,n,l,r,i),cc(e)&&xN(n,e.index)):3&e.type&&(r=function q3(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}(me(),function Ge(){const t=Z.lFrame;return gx(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),Ky}function Qy(t,e,n,r,i){const o=i?"class":"style";Hy(t,n,e.inputs[o],o,r)}function wn(t,e,n,r){const i=C(),s=me(),o=22+t,a=i[11],u=i[o]=ry(a,e,function ez(){return Z.lFrame.currentNamespace}()),c=s.firstCreatePass?function UK(t,e,n,r,i,s,o){const a=e.consts,c=wa(e,t,2,i,Vi(a,s));return Ly(e,n,c,Vi(a,o)),null!==c.attrs&&lf(c,c.attrs,!1),null!==c.mergedAttrs&&lf(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,i,0,e,n,r):s.data[o];return Rr(c,!0),RR(a,u,c),32!=(32&c.flags)&&Kh(s,i,u,c),0===function UW(){return Z.lFrame.elementDepthCount}()&&Xt(u,i),function VW(){Z.lFrame.elementDepthCount++}(),Nh(c)&&(Py(s,i,c),My(s,c,i)),null!==r&&Oy(i,c),wn}function In(){let t=Pt();b_()?function S_(){Z.lFrame.isParent=!1}():(t=t.parent,Rr(t,!1));const e=t;!function BW(){Z.lFrame.elementDepthCount--}();const n=me();return n.firstCreatePass&&(Ph(n,t),C_(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function iz(t){return 0!=(8&t.flags)}(e)&&Qy(n,e,C(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sz(t){return 0!=(16&t.flags)}(e)&&Qy(n,e,C(),e.stylesWithoutHost,!1),In}function Nc(t,e,n,r){return wn(t,e,n,r),In(),Nc}function gf(t){return!!t&&"function"==typeof t.then}function nk(t){return!!t&&"function"==typeof t.subscribe}const rk=nk;function mf(t,e,n,r){const i=C(),s=me(),o=Pt();return function sk(t,e,n,r,i,s,o){const a=Nh(r),c=t.firstCreatePass&&PN(t),l=e[8],d=MN(e);let h=!0;if(3&r.type||o){const g=Ln(r,e),_=o?o(g):g,I=d.length,E=o?N=>o(Mt(N[r.index])):r.index;let y=null;if(!o&&a&&(y=function BK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==y)(y.__ngLastListenerFn__||y).__ngNextListenerFn__=s,y.__ngLastListenerFn__=s,h=!1;else{s=ak(r,e,l,s,!1);const N=n.listen(_,i,s);d.push(s,N),c&&c.push(i,E,I,I+1)}}else s=ak(r,e,l,s,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const U=e[p[_]][p[_+1]].subscribe(s),B=d.length;d.push(s,U),c&&c.push(i,r.index,B,-(B+1))}}}(s,i,i[11],o,t,e,r),mf}function ok(t,e,n,r){try{return!1!==n(r)}catch(i){return FN(t,i),!1}}function ak(t,e,n,r,i){return function s(o){if(o===Function)return r;$y(t.componentOffset>-1?Un(t.index,e):e);let u=ok(e,0,r,o),c=s.__ngNextListenerFn__;for(;c;)u=ok(e,0,c,o)&&u,c=c.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function mr(t,e=""){const n=C(),r=me(),i=t+22,s=r.firstCreatePass?wa(r,i,1,e,null):r.data[i],o=n[i]=function ny(t,e){return t.createText(e)}(n[11],e);Kh(r,n,o,s),Rr(s,!1)}function Mc(t){return rv("",t,""),Mc}function rv(t,e,n){const r=C(),i=function Ea(t,e,n,r){return Zt(t,ia(),n)?e+X(n)+r:J}(r,t,e,n);return i!==J&&ai(r,un(),i),rv}const ka="en-US";let Jk=ka;class Ma{}class DM{}class bM extends Ma{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new LN(this);const r=On(e);this._bootstrapComponents=oi(r.bootstrap),this._r3Injector=gN(e,n,[{provide:Ma,useValue:this},{provide:ga,useValue:this.componentFactoryResolver}],ke(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class lv extends DM{constructor(e){super(),this.moduleType=e}create(e){return new bM(this.moduleType,e)}}class k8 extends Ma{constructor(e,n,r){super(),this.componentFactoryResolver=new LN(this),this.instance=null;const i=new ZR([...e,{provide:Ma,useValue:this},{provide:ga,useValue:this.componentFactoryResolver}],n||tf(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Cf(t,e,n=null){return new k8(t,e,n).injector}let M8=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=KR(0,n.type),i=r.length>0?Cf([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=W({token:t,providedIn:"environment",factory:()=>new t(O(si))}),t})();function SM(t){t.getStandaloneInjector=e=>e.get(M8).getOrCreateStandaloneInjector(t)}function PM(t,e,n,r,i,s){const o=e+n;return Zt(t,o,i)?function Mr(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Vc(t,e){const n=t[e];return n===J?void 0:n}(t,o+1)}function BM(t,e,n){const r=t+22,i=C(),s=ra(i,r);return function Bc(t,e){return t[1].data[e].pure}(i,r)?PM(i,function an(){const t=Z.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function hv(t){return e=>{setTimeout(t,void 0,e)}}const ln=class r6 extends br{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=hv(s),i&&(i=hv(i)),o&&(o=hv(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof kn&&e.add(a),a}};let ui=(()=>{class t{}return t.__NG_ELEMENT_ID__=a6,t})();const s6=ui,o6=class extends s6{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=sf(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),ky(r,i,e),new Ac(i)}};function a6(){return function Tf(t,e){return 4&t.type?new o6(e,t,ma(t,e)):null}(Pt(),C())}let _r=(()=>{class t{}return t.__NG_ELEMENT_ID__=u6,t})();function u6(){return function HM(t,e){let n;const r=e[t.index];if(dr(r))n=r;else{let i;if(8&t.type)i=Mt(r);else{const s=e[11];i=s.createComment("");const o=Ln(t,e);Os(s,qh(s,o),i,function uq(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=kN(r,e,i,t),uf(e,n)}return new $M(n,t,e)}(Pt(),C())}const c6=_r,$M=class extends c6{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ma(this._hostTNode,this._hostLView)}get injector(){return new oa(this._hostTNode,this._hostLView)}get parentInjector(){const e=U_(this._hostTNode,this._hostLView);if(Ox(e)){const n=Uh(e,this._hostLView),r=Lh(e);return new oa(n[1].data[r+8],n)}return new oa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=jM(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function pc(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const u=o?e:new xc(Ce(e)),c=r||this.parentInjector;if(!s&&null==u.ngModule){const h=(o?c:this.parentInjector).get(si,null);h&&(s=h)}const l=u.create(c,i,void 0,s);return this.insert(l.hostView,a),l}insert(e,n){const r=e._lView,i=r[1];if(function LW(t){return dr(t[3])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const d=r[3],h=new $M(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function rq(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],Kx(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function iq(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(i,r,o,s);const a=ay(s,o),u=r[11],c=qh(u,o[7]);return null!==c&&function eq(t,e,n,r,i,s){r[0]=i,r[6]=e,Ic(t,r,n,1,i,s)}(i,o[6],u,r,c,a),e.attachToViewContainerRef(),Kx(pv(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=jM(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=iy(this._lContainer,n);r&&(Hh(pv(this._lContainer),n),yR(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=iy(this._lContainer,n);return r&&null!=Hh(pv(this._lContainer),n)?new Ac(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function jM(t){return t[8]}function pv(t){return t[8]||(t[8]=[])}function bf(...t){}const jc=new j("Application Initializer");let Sf=(()=>{class t{constructor(n){this.appInits=n,this.resolve=bf,this.reject=bf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(gf(s))n.push(s);else if(rk(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(O(jc,8))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Hc=new j("AppId",{providedIn:"root",factory:function mP(){return`${Tv()}${Tv()}${Tv()}`}});function Tv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _P=new j("Platform Initializer"),Af=new j("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yP=new j("appBootstrapListener");let L6=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const ci=new j("LocaleId",{providedIn:"root",factory:()=>ge(ci,z.Optional|z.SkipSelf)||function U6(){return typeof $localize<"u"&&$localize.locale||ka}()});class B6{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let vP=(()=>{class t{compileModuleSync(n){return new lv(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=oi(On(n).declarations).reduce((o,a)=>{const u=Ce(a);return u&&o.push(new xc(u)),o},[]);return new B6(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const H6=(()=>Promise.resolve(0))();function Dv(t){typeof Zone>"u"?H6.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class be{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ln(!1),this.onMicrotaskEmpty=new ln(!1),this.onStable=new ln(!1),this.onError=new ln(!1),typeof Zone>"u")throw new R(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function G6(){let t=Me.requestAnimationFrame,e=Me.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function q6(t){const e=()=>{!function z6(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Me,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Sv(t),t.isCheckStableRunning=!0,bv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Sv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return EP(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),CP(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return EP(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),CP(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Sv(t),bv(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!be.isInAngularZone())throw new R(909,!1)}static assertNotInAngularZone(){if(be.isInAngularZone())throw new R(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,W6,bf,bf);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const W6={};function bv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Sv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function EP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function CP(t){t._nesting--,bv(t)}class K6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ln,this.onMicrotaskEmpty=new ln,this.onStable=new ln,this.onError=new ln}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const TP=new j(""),xf=new j("");let Rv,Av=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Rv||(function Q6(t){Rv=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{be.assertNotInAngularZone(),Dv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Dv(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(O(be),O(xv),O(xf))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),xv=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Rv?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Hi=null;const DP=new j("AllowMultipleToken"),Nv=new j("PlatformDestroyListeners");class bP{constructor(e,n){this.name=e,this.token=n}}function AP(t,e,n=[]){const r=`Platform: ${e}`,i=new j(r);return(s=[])=>{let o=kv();if(!o||o.injector.get(DP,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function Z6(t){if(Hi&&!Hi.get(DP,!1))throw new R(400,!1);Hi=t;const e=t.get(RP);(function SP(t){const e=t.get(_P,null);e&&e.forEach(n=>n())})(t)}(function xP(t=[],e){return Ot.create({name:e,providers:[{provide:wy,useValue:"platform"},{provide:Nv,useValue:new Set([()=>Hi=null])},...t]})}(a,r))}return function e7(t){const e=kv();if(!e)throw new R(401,!1);return e}()}}function kv(){return Hi?.get(RP)??null}let RP=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function kP(t,e){let n;return n="noop"===t?new K6:("zone.js"===t?void 0:t)||new be(e),n}(r?.ngZone,function NP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:be,useValue:i}];return i.run(()=>{const o=Ot.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),u=a.injector.get(_a,null);if(!u)throw new R(402,!1);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{u.handleError(l)}});a.onDestroy(()=>{Nf(this._modules,a),c.unsubscribe()})}),function MP(t,e,n){try{const r=n();return gf(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(u,i,()=>{const c=a.injector.get(Sf);return c.runInitializers(),c.donePromise.then(()=>(function eM(t){Kn(t,"Expected localeId to be defined"),"string"==typeof t&&(Jk=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(ci,ka)||ka),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=PP({},r);return function Y6(t,e,n){const r=new lv(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(Rf);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new R(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new R(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Nv,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(O(Ot))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function PP(t,e){return Array.isArray(e)?e.reduce(PP,t):{...t,...e}}let Rf=(()=>{class t{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Be(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Be(a=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{be.assertNotInAngularZone(),Dv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{be.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=function rW(...t){const e=tc(t),n=function YG(t,e){return"number"==typeof u_(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?qn(r[0]):Qo(n)(pt(r,e)):Sr}(s,o.pipe(function iW(t={}){const{connector:e=(()=>new br),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,c=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=u=void 0,l=d=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return et((g,_)=>{c++,!d&&!l&&h();const I=u=u??e();_.add(()=>{c--,0===c&&!d&&!l&&(a=c_(p,i))}),I.subscribe(_),!o&&c>0&&(o=new ec({next:E=>I.next(E),error:E=>{d=!0,h(),a=c_(f,n,E),I.error(E)},complete:()=>{l=!0,h(),a=c_(f,r),I.complete()}}),qn(g).subscribe(o))})(s)}}()))}bootstrap(n,r){const i=n instanceof eN;if(!this._injector.get(Sf).done)throw!i&&function Zo(t){const e=Ce(t)||Kt(t)||sn(t);return null!==e&&e.standalone}(n),new R(405,false);let o;o=i?n:this._injector.get(ga).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function X6(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Ma),c=o.create(Ot.NULL,[],r||o.selector,a),l=c.location.nativeElement,d=c.injector.get(TP,null);return d?.registerApplication(l),c.onDestroy(()=>{this.detachView(c.hostView),Nf(this.components,c),d?.unregisterApplication(l)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new R(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Nf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(yP,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Nf(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new R(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(O(be),O(si),O(_a))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Nf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let Mv=(()=>{class t{}return t.__NG_ELEMENT_ID__=n7,t})();function n7(t){return function r7(t,e,n){if(cc(t)&&!n){const r=Un(t.index,e);return new Ac(r,r)}return 47&t.type?new Ac(e[16],e):null}(Pt(),C(),16==(16&t))}class VP{constructor(){}supports(e){return ff(e)}create(e){return new c7(e)}}const u7=(t,e)=>e;class c7{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||u7}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<$P(r,i,s)?n:r,a=$P(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,l=u-i;if(c!=l){for(let h=0;h<c;h++){const f=h<s.length?s[h]:s[h]=0,p=f+h;l<=p&&p<c&&(s[h]=f+1)}s[o.previousIndex]=l-c}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!ff(e))throw new R(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function MK(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Us()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new l7(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new BP),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BP),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class l7{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class d7{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class BP{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new d7,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $P(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function HP(){return new Pf([new VP])}let Pf=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||HP()),deps:[[t,new mc,new Qe]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new R(901,!1)}}return t.\u0275prov=W({token:t,providedIn:"root",factory:HP}),t})();const m7=AP(null,"core",[]);let _7=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(O(Rf))},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({}),t})(),Vv=null;function Gi(){return Vv}class w7{}const En=new j("DocumentToken");let Bv=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return function I7(){return O(WP)}()},providedIn:"platform"}),t})();const E7=new j("Location Initialized");let WP=(()=>{class t extends Bv{constructor(n){super(),this._doc=n,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gi().getBaseHref(this._doc)}onPopState(n){const r=Gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){zP()?this._history.pushState(n,r,i):this._location.hash=i}replaceState(n,r,i){zP()?this._history.replaceState(n,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(O(En))},t.\u0275prov=W({token:t,factory:function(){return function C7(){return new WP(O(En))}()},providedIn:"platform"}),t})();function zP(){return!!window.history.pushState}function $v(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function qP(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function di(t){return t&&"?"!==t[0]?"?"+t:t}let Hs=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ge(QP)},providedIn:"root"}),t})();const KP=new j("appBaseHref");let QP=(()=>{class t extends Hs{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ge(En).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return $v(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+di(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+di(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+di(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(O(Bv),O(KP,8))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),T7=(()=>{class t extends Hs{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=$v(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+di(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+di(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(O(Bv),O(KP,8))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),jv=(()=>{class t{constructor(n){this._subject=new ln,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function S7(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(qP(YP(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+di(r))}normalize(n){return t.stripTrailingSlash(function b7(t,e){return t&&new RegExp(`^${t}([/;?#]|$)`).test(e)?e.substring(t.length):e}(this._basePath,YP(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+di(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+di(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=di,t.joinWithSlash=$v,t.stripTrailingSlash=qP,t.\u0275fac=function(n){return new(n||t)(O(Hs))},t.\u0275prov=W({token:t,factory:function(){return function D7(){return new jv(O(Hs))}()},providedIn:"root"}),t})();function YP(t){return t.replace(/\/index.html$/,"")}class f5{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let u1=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new f5(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),c1(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{c1(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(q(_r),q(ui),q(Pf))},t.\u0275dir=rn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function c1(t,e){t.context.$implicit=e.item}class v5{createSubscription(e,n){return e.subscribe({next:n,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class w5{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const I5=new w5,E5=new v5;let h1=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(gf(n))return I5;if(nk(n))return E5;throw function wr(t,e){return new R(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return t.\u0275fac=function(n){return new(n||t)(q(Mv,16))},t.\u0275pipe=_n({name:"async",type:t,pure:!1,standalone:!0}),t})(),B5=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({}),t})();let G5=(()=>{class t{}return t.\u0275prov=W({token:t,providedIn:"root",factory:()=>new W5(O(En),window)}),t})();class W5{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function z5(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=g1(this.window.history)||g1(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function g1(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class wQ extends w7{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sw extends wQ{static makeCurrent(){!function v7(t){Vv||(Vv=t)}(new sw)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function IQ(){return Kc=Kc||document.querySelector("base"),Kc?Kc.getAttribute("href"):null}();return null==n?null:function EQ(t){Wf=Wf||document.createElement("a"),Wf.setAttribute("href",t);const e=Wf.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Kc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function l5(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Wf,Kc=null;const I1=new j("TRANSITION_ID"),TQ=[{provide:jc,useFactory:function CQ(t,e,n){return()=>{n.get(Sf).donePromise.then(()=>{const r=Gi(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[I1,En,Ot],multi:!0}];let bQ=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const zf=new j("EventManagerPlugins");let qf=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(O(zf),O(be))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();class E1{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Gi().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let C1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),Qc=(()=>{class t extends C1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(T1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(T1))}}return t.\u0275fac=function(n){return new(n||t)(O(En))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();function T1(t){Gi().remove(t)}const ow={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},aw=/%COMP%/g;function uw(t,e){return e.flat(100).map(n=>n.replace(aw,t))}function S1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let cw=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new lw(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Ar.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new kQ(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case Ar.ShadowDom:return new MQ(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=uw(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(O(qf),O(Qc),O(Hc))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();class lw{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(ow[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(x1(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(x1(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=ow[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=ow[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(yn.DashCase|yn.Important)?e.style.setProperty(n,r,i&yn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&yn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,S1(r)):this.eventManager.addEventListener(e,n,S1(r))}}function x1(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class kQ extends lw{constructor(e,n,r,i){super(e),this.component=r;const s=uw(i+"-"+r.id,r.styles);n.addStyles(s),this.contentAttr=function xQ(t){return"_ngcontent-%COMP%".replace(aw,t)}(i+"-"+r.id),this.hostAttr=function RQ(t){return"_nghost-%COMP%".replace(aw,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class MQ extends lw{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=uw(i.id,i.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let PQ=(()=>{class t extends E1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(O(En))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const R1=["alt","control","meta","shift"],OQ={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FQ={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let LQ=(()=>{class t extends E1{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gi().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),R1.forEach(c=>{const l=r.indexOf(c);l>-1&&(r.splice(l,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=OQ[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),R1.forEach(o=>{o!==i&&(0,FQ[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(O(En))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const k1=[{provide:Af,useValue:"browser"},{provide:_P,useValue:function UQ(){sw.makeCurrent()},multi:!0},{provide:En,useFactory:function BQ(){return function mq(t){dy=t}(document),document},deps:[]}],$Q=AP(m7,"browser",k1),M1=new j(""),P1=[{provide:xf,useClass:class DQ{addToWindow(e){Me.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Me.getAllAngularTestabilities=()=>e.getAllTestabilities(),Me.getAllAngularRootElements=()=>e.getAllRootElements(),Me.frameworkStabilizers||(Me.frameworkStabilizers=[]),Me.frameworkStabilizers.push(r=>{const i=Me.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(u){o=o||u,s--,0==s&&r(o)};i.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Gi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:TP,useClass:Av,deps:[be,xv,xf]},{provide:Av,useClass:Av,deps:[be,xv,xf]}],O1=[{provide:wy,useValue:"root"},{provide:_a,useFactory:function VQ(){return new _a},deps:[]},{provide:zf,useClass:PQ,multi:!0,deps:[En,be,Af]},{provide:zf,useClass:LQ,multi:!0,deps:[En]},{provide:cw,useClass:cw,deps:[qf,Qc,Hc]},{provide:nN,useExisting:cw},{provide:C1,useExisting:Qc},{provide:Qc,useClass:Qc,deps:[En]},{provide:qf,useClass:qf,deps:[zf,be]},{provide:class q5{},useClass:bQ,deps:[]},[]];let jQ=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Hc,useValue:n.appId},{provide:I1,useExisting:Hc},TQ]}}}return t.\u0275fac=function(n){return new(n||t)(O(M1,12))},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({providers:[...O1,...P1],imports:[B5,_7]}),t})(),hw=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(O(En))},t.\u0275prov=W({token:t,factory:function(n){let r=null;return r=n?new n:function GQ(){return new hw(O(En))}(),r},providedIn:"root"}),t})();function $(...t){return pt(t,tc(t))}typeof window<"u"&&window;class Ir extends br{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Kf=Ju(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:ZQ}=Array,{getPrototypeOf:JQ,prototype:eY,keys:tY}=Object;const{isArray:iY}=Array;function U1(...t){const e=tc(t),n=function QG(t){return Ne(u_(t))?t.pop():void 0}(t),{args:r,keys:i}=function nY(t){if(1===t.length){const e=t[0];if(ZQ(e))return{args:e,keys:null};if(function rY(t){return t&&"object"==typeof t&&JQ(t)===eY}(e)){const n=tY(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return pt([],e);const s=new Be(function uY(t,e,n=Fi){return r=>{V1(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)V1(e,()=>{const c=pt(t[u],e);let l=!1;c.subscribe(tt(r,d=>{s[u]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function aY(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):Fi));return n?s.pipe(function oY(t){return oe(e=>function sY(t,e){return iY(e)?t(...e):t(e)}(t,e))}(n)):s}function V1(t,e,n){t?Zr(n,t,e):e()}function pw(...t){return function cY(){return Qo(1)}()(pt(t,tc(t)))}function B1(t){return new Be(e=>{qn(t()).subscribe(e)})}function Yc(t,e){const n=Ne(t)?t:()=>t,r=i=>i.error(n());return new Be(e?i=>e.schedule(r,0,i):r)}function gw(){return et((t,e)=>{let n=null;t._refCount++;const r=tt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class $1 extends Be{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,RA(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kn;const n=this.getSubject();e.add(this.source.subscribe(tt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kn.EMPTY)}return e}refCount(){return gw()(this)}}function nr(t,e){return et((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(tt(r,u=>{i?.unsubscribe();let c=0;const l=s++;qn(t(u,l)).subscribe(i=tt(r,d=>r.next(e?e(u,d,l,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Xc(t){return t<=0?()=>Sr:et((e,n)=>{let r=0;e.subscribe(tt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function j1(...t){const e=tc(t);return et((n,r)=>{(e?pw(t,n,e):pw(t,n)).subscribe(r)})}function Fr(t,e){return et((n,r)=>{let i=0;n.subscribe(tt(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Qf(t){return et((e,n)=>{let r=!1;e.subscribe(tt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function H1(t=lY){return et((e,n)=>{let r=!1;e.subscribe(tt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function lY(){return new Kf}function zi(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Fr((i,s)=>t(i,s,r)):Fi,Xc(1),n?Qf(e):H1(()=>new Kf))}function Gs(t,e){return Ne(e)?Tt(t,e,1):Tt(t,1)}function Ft(t,e,n){const r=Ne(t)||e||n?{next:t,error:e,complete:n}:t;return r?et((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(tt(s,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),s.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):Fi}function qi(t){return et((e,n)=>{let s,r=null,i=!1;r=e.subscribe(tt(n,void 0,void 0,o=>{s=qn(t(o,qi(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function dY(t,e,n,r,i){return(s,o)=>{let a=n,u=e,c=0;s.subscribe(tt(o,l=>{const d=c++;u=a?t(u,l,d):(a=!0,l),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function G1(t,e){return et(dY(t,e,arguments.length>=2,!0))}function mw(t){return t<=0?()=>Sr:et((e,n)=>{let r=[];e.subscribe(tt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function W1(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Fr((i,s)=>t(i,s,r)):Fi,mw(1),n?Qf(e):H1(()=>new Kf))}function _w(t){return et((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const ee="primary",Zc=Symbol("RouteTitle");class pY{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Fa(t){return new pY(t)}function gY(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Lr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!z1(t[i],e[i]))return!1;return!0}function z1(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function q1(t){return Array.prototype.concat.apply([],t)}function K1(t){return t.length>0?t[t.length-1]:null}function Lt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ki(t){return rk(t)?t:gf(t)?pt(Promise.resolve(t)):$(t)}const Yf=!1,_Y={exact:function X1(t,e,n){if(!zs(t.segments,e.segments)||!Xf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!X1(t.children[r],e.children[r],n))return!1;return!0},subset:Z1},Q1={exact:function yY(t,e){return Lr(t,e)},subset:function vY(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>z1(t[n],e[n]))},ignored:()=>!0};function Y1(t,e,n){return _Y[n.paths](t.root,e.root,n.matrixParams)&&Q1[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Z1(t,e,n){return J1(t,e,e.segments,n)}function J1(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!zs(i,n)||e.hasChildren()||!Xf(i,n,r))}if(t.segments.length===n.length){if(!zs(t.segments,n)||!Xf(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!Z1(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(zs(t.segments,i)&&Xf(t.segments,i,r)&&t.children[ee])&&J1(t.children[ee],e,s,r)}}function Xf(t,e,n){return e.every((r,i)=>Q1[n](t[i].parameters,r.parameters))}class Ws{constructor(e=new ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fa(this.queryParams)),this._queryParamMap}toString(){return EY.serialize(this)}}class ce{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Lt(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zf(this)}}class Jc{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Fa(this.parameters)),this._parameterMap}toString(){return nO(this)}}function zs(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let el=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return new yw},providedIn:"root"}),t})();class yw{parse(e){const n=new NY(e);return new Ws(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${tl(e.root,!0)}`,r=function DY(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Jf(n)}=${Jf(i)}`).join("&"):`${Jf(n)}=${Jf(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function CY(t){return encodeURI(t)}(e.fragment)}`:""}`}}const EY=new yw;function Zf(t){return t.segments.map(e=>nO(e)).join("/")}function tl(t,e){if(!t.hasChildren())return Zf(t);if(e){const n=t.children[ee]?tl(t.children[ee],!1):"",r=[];return Lt(t.children,(i,s)=>{s!==ee&&r.push(`${s}:${tl(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function IY(t,e){let n=[];return Lt(t.children,(r,i)=>{i===ee&&(n=n.concat(e(r,i)))}),Lt(t.children,(r,i)=>{i!==ee&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===ee?[tl(t.children[ee],!1)]:[`${i}:${tl(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ee]?`${Zf(t)}/${n[0]}`:`${Zf(t)}/(${n.join("//")})`}}function eO(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jf(t){return eO(t).replace(/%3B/gi,";")}function vw(t){return eO(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ep(t){return decodeURIComponent(t)}function tO(t){return ep(t.replace(/\+/g,"%20"))}function nO(t){return`${vw(t.path)}${function TY(t){return Object.keys(t).map(e=>`;${vw(e)}=${vw(t[e])}`).join("")}(t.parameters)}`}const bY=/^[^\/()?;=#]+/;function tp(t){const e=t.match(bY);return e?e[0]:""}const SY=/^[^=?&#]+/,xY=/^[^&#]+/;class NY{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new ce(e,n)),r}parseSegment(){const e=tp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new R(4009,Yf);return this.capture(e),new Jc(ep(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=tp(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=tp(this.remaining);i&&(r=i,this.capture(r))}e[ep(n)]=ep(r)}parseQueryParam(e){const n=function AY(t){const e=t.match(SY);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function RY(t){const e=t.match(xY);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=tO(n),s=tO(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tp(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new R(4010,Yf);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ee);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[ee]:new ce([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new R(4011,Yf)}}function ww(t){return t.segments.length>0?new ce([],{[ee]:t}):t}function np(t){const e={};for(const r of Object.keys(t.children)){const s=np(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function kY(t){if(1===t.numberOfChildren&&t.children[ee]){const e=t.children[ee];return new ce(t.segments.concat(e.segments),e.children)}return t}(new ce(t.segments,e))}function qs(t){return t instanceof Ws}function OY(t,e,n,r,i){if(0===n.length)return La(e.root,e.root,e.root,r,i);const s=function sO(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new iO(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Lt(s.outlets,(u,c)=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new iO(n,e,r)}(n);return s.toRoot()?La(e.root,e.root,new ce([],{}),r,i):function o(u){const c=function LY(t,e,n,r){if(t.isAbsolute)return new Ua(e.root,!0,0);if(-1===r)return new Ua(n,n===e.root,0);return function oO(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new R(4005,!1);i=r.segments.length}return new Ua(r,!1,i-s)}(n,r+(nl(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,u),l=c.processChildren?Va(c.segmentGroup,c.index,s.commands):Ew(c.segmentGroup,c.index,s.commands);return La(e.root,c.segmentGroup,l,r,i)}(t.snapshot?._lastPathIndex)}function nl(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function rl(t){return"object"==typeof t&&null!=t&&t.outlets}function La(t,e,n,r,i){let o,s={};r&&Lt(r,(u,c)=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),o=t===e?n:rO(t,e,n);const a=ww(np(o));return new Ws(a,s,i)}function rO(t,e,n){const r={};return Lt(t.children,(i,s)=>{r[s]=i===e?n:rO(i,e,n)}),new ce(t.segments,r)}class iO{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&nl(r[0]))throw new R(4003,!1);const i=r.find(rl);if(i&&i!==K1(r))throw new R(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ua{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function Ew(t,e,n){if(t||(t=new ce([],{})),0===t.segments.length&&t.hasChildren())return Va(t,e,n);const r=function VY(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(rl(a))break;const u=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&c&&"object"==typeof c&&void 0===c.outlets){if(!uO(u,c,o))return s;r+=2}else{if(!uO(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new ce(t.segments.slice(0,r.pathIndex),{});return s.children[ee]=new ce(t.segments.slice(r.pathIndex),t.children),Va(s,0,i)}return r.match&&0===i.length?new ce(t.segments,{}):r.match&&!t.hasChildren()?Cw(t,e,n):r.match?Va(t,0,i):Cw(t,e,n)}function Va(t,e,n){if(0===n.length)return new ce(t.segments,{});{const r=function UY(t){return rl(t[0])?t[0].outlets:{[ee]:t}}(n),i={};return!r[ee]&&t.children[ee]&&1===t.numberOfChildren&&0===t.children[ee].segments.length?Va(t.children[ee],e,n):(Lt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=Ew(t.children[o],e,s))}),Lt(t.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new ce(t.segments,i))}}function Cw(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(rl(s)){const u=BY(s.outlets);return new ce(r,u)}if(0===i&&nl(n[0])){r.push(new Jc(t.segments[e].path,aO(n[0]))),i++;continue}const o=rl(s)?s.outlets[ee]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&nl(a)?(r.push(new Jc(o,aO(a))),i+=2):(r.push(new Jc(o,{})),i++)}return new ce(r,{})}function BY(t){const e={};return Lt(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Cw(new ce([],{}),0,n))}),e}function aO(t){const e={};return Lt(t,(n,r)=>e[r]=`${n}`),e}function uO(t,e,n){return t==n.path&&Lr(e,n.parameters)}const il="imperative";class Ur{constructor(e,n){this.id=e,this.url=n}}class Tw extends Ur{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ks extends Ur{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rp extends Ur{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cO extends Ur{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=16}}class lO extends Ur{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class $Y extends Ur{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jY extends Ur{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HY extends Ur{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class GY extends Ur{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class WY extends Ur{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zY{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qY{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class KY{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class QY{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YY{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dO{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hO{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let ZY=(()=>{class t{createUrlTree(n,r,i,s,o,a){return OY(n||r.root,i,s,o,a)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})(),JY=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(e){return ZY.\u0275fac(e)},providedIn:"root"}),t})();class fO{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Dw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Dw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=bw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bw(e,this._root).map(n=>n.value)}}function Dw(t,e){if(t===e.value)return e;for(const n of e.children){const r=Dw(t,n);if(r)return r}return null}function bw(t,e){if(t===e.value)return[e];for(const n of e.children){const r=bw(t,n);if(r.length)return r.unshift(e),r}return[]}class fi{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ba(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class pO extends fO{constructor(e,n){super(e),this.snapshot=n,Sw(this,e)}toString(){return this.snapshot.toString()}}function gO(t,e){const n=function e9(t,e){const o=new ip([],{},{},"",{},ee,e,null,t.root,-1,{});return new _O("",new fi(o,[]))}(t,e),r=new Ir([new Jc("",{})]),i=new Ir({}),s=new Ir({}),o=new Ir({}),a=new Ir(""),u=new $a(r,i,o,a,s,ee,e,n.root);return u.snapshot=n.root,new pO(new fi(u,[]),n)}class $a{constructor(e,n,r,i,s,o,a,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(oe(c=>c[Zc]))??$(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(oe(e=>Fa(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(oe(e=>Fa(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mO(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function t9(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ip{get title(){return this.data?.[Zc]}constructor(e,n,r,i,s,o,a,u,c,l,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._urlSegment=c,this._lastPathIndex=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fa(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fa(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _O extends fO{constructor(e,n){super(n),this.url=e,Sw(this,n)}toString(){return yO(this._root)}}function Sw(t,e){e.value._routerState=t,e.children.forEach(n=>Sw(t,n))}function yO(t){const e=t.children.length>0?` { ${t.children.map(yO).join(", ")} } `:"";return`${t.value}${e}`}function Aw(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Lr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Lr(e.params,n.params)||t.params.next(n.params),function mY(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Lr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Lr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function xw(t,e){const n=Lr(t.params,e.params)&&function wY(t,e){return zs(t,e)&&t.every((n,r)=>Lr(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||xw(t.parent,e.parent))}function sl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function r9(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return sl(t,r,i);return sl(t,r)})}(t,e,n);return new fi(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>sl(t,a)),o}}const r=function i9(t){return new $a(new Ir(t.url),new Ir(t.params),new Ir(t.queryParams),new Ir(t.fragment),new Ir(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>sl(t,s));return new fi(r,i)}}const Rw="ngNavigationCancelingError";function vO(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=qs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wO(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function wO(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[Rw]=!0,r.cancellationCode=e,n&&(r.url=n),r}function IO(t){return EO(t)&&qs(t.url)}function EO(t){return t&&t[Rw]}class s9{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ol,this.attachRef=null}}let ol=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new s9,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const sp=!1;let Nw=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new ln,this.deactivateEvents=new ln,this.attachEvents=new ln,this.detachEvents=new ln,this.parentContexts=ge(ol),this.location=ge(_r),this.changeDetector=ge(Mv),this.environmentInjector=ge(si)}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new R(4012,sp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new R(4012,sp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new R(4012,sp);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new R(4013,sp);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new o9(n,a,i.injector);if(r&&function a9(t){return!!t.resolveComponentFactory}(r)){const c=r.resolveComponentFactory(o);this.activated=i.createComponent(c,i.length,u)}else this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=rn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ns]}),t})();class o9{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===$a?this.route:e===ol?this.childContexts:this.parent.get(e,n)}}let op=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Xo({type:t,selectors:[["ng-component"]],standalone:!0,features:[SM],decls:1,vars:0,template:function(n,r){1&n&&Nc(0,"router-outlet")},dependencies:[Nw],encapsulation:2}),t})();function CO(t,e){return t.providers&&!t._injector&&(t._injector=Cf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Mw(t){const e=t.children&&t.children.map(Mw),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=op),n}function rr(t){return t.outlet||ee}function TO(t,e){const n=t.filter(r=>rr(r)===e);return n.push(...t.filter(r=>rr(r)!==e)),n}function al(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class h9{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Aw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=Ba(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Lt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ba(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ba(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=Ba(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new dO(s.value.snapshot))}),e.children.length&&this.forwardEvent(new QY(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(Aw(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Aw(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=al(i.snapshot),u=a?.get(ga)??null;o.attachRef=null,o.route=i,o.resolver=u,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class DO{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ap{constructor(e,n){this.component=e,this.route=n}}function f9(t,e,n){const r=t._root;return ul(r,e?e._root:null,n,[r.value])}function ja(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function dW(t){return null!==Eh(t)}(t)?e.get(t):t:r}function ul(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ba(e);return t.children.forEach(o=>{(function g9(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function m9(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!zs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!zs(t.url,e.url)||!Lr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xw(t,e)||!Lr(t.queryParams,e.queryParams);default:return!xw(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new DO(r)):(s.data=o.data,s._resolvedData=o._resolvedData),ul(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ap(a.outlet.component,o))}else o&&cl(e,a,i),i.canActivateChecks.push(new DO(r)),ul(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Lt(s,(o,a)=>cl(o,n.getContext(a),i)),i}function cl(t,e,n){const r=Ba(t),i=t.value;Lt(r,(s,o)=>{cl(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new ap(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ll(t){return"function"==typeof t}function Pw(t){return t instanceof Kf||"EmptyError"===t?.name}const up=Symbol("INITIAL_VALUE");function Ha(){return nr(t=>U1(t.map(e=>e.pipe(Xc(1),j1(up)))).pipe(oe(e=>{for(const n of e)if(!0!==n){if(n===up)return up;if(!1===n||n instanceof Ws)return n}return!0}),Fr(e=>e!==up),Xc(1)))}function bO(t){return function NG(...t){return SA(t)}(Ft(e=>{if(qs(e))throw vO(0,e)}),oe(e=>!0===e))}const Ow={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SO(t,e,n,r,i){const s=Fw(t,e,n);return s.matched?function M9(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?$(i.map(o=>{const a=ja(o,t);return Ki(function E9(t){return t&&ll(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Ha(),bO()):$(!0)}(r=CO(e,r),e,n).pipe(oe(o=>!0===o?s:{...Ow})):$(s)}function Fw(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Ow}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gY)(n,t,e);if(!i)return{...Ow};const s={};Lt(i.posParams,(a,u)=>{s[u]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function cp(t,e,n,r){if(n.length>0&&function F9(t,e,n){return n.some(r=>lp(t,e,r)&&rr(r)!==ee)}(t,n,r)){const s=new ce(e,function O9(t,e,n,r){const i={};i[ee]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&rr(s)!==ee){const o=new ce([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,i[rr(s)]=o}return i}(t,e,r,new ce(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function L9(t,e,n){return n.some(r=>lp(t,e,r))}(t,n,r)){const s=new ce(t.segments,function P9(t,e,n,r,i){const s={};for(const o of r)if(lp(t,n,o)&&!i[rr(o)]){const a=new ce([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,s[rr(o)]=a}return{...i,...s}}(t,e,n,r,t.children));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const i=new ce(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function lp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function AO(t,e,n,r){return!!(rr(t)===r||r!==ee&&lp(e,n,t))&&("**"===t.path||Fw(e,t,n).matched)}function xO(t,e,n){return 0===e.length&&!t.children[n]}const dp=!1;class hp{constructor(e){this.segmentGroup=e||null}}class RO{constructor(e){this.urlTree=e}}function dl(t){return Yc(new hp(t))}function NO(t){return Yc(new RO(t))}class $9{constructor(e,n,r,i,s){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=cp(this.urlTree.root,[],[],this.config).segmentGroup,n=new ce(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,ee).pipe(oe(s=>this.createUrlTree(np(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(qi(s=>{if(s instanceof RO)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof hp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ee).pipe(oe(i=>this.createUrlTree(np(i),e.queryParams,e.fragment))).pipe(qi(i=>{throw i instanceof hp?this.noMatchError(i):i}))}noMatchError(e){return new R(4002,dp)}createUrlTree(e,n,r){const i=ww(e);return new Ws(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(oe(s=>new ce([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return pt(i).pipe(Gs(s=>{const o=r.children[s],a=TO(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(oe(u=>({segment:u,outlet:s})))}),G1((s,o)=>(s[o.outlet]=o.segment,s),{}),W1())}expandSegment(e,n,r,i,s,o){return pt(r).pipe(Gs(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,s,o).pipe(qi(c=>{if(c instanceof hp)return $(null);throw c}))),zi(a=>!!a),qi((a,u)=>{if(Pw(a))return xO(n,i,s)?$(new ce([],{})):dl(n);throw a}))}expandSegmentAgainstRoute(e,n,r,i,s,o,a){return AO(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o):dl(n):dl(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?NO(s):this.lineralizeSegments(r,s).pipe(Tt(o=>{const a=new ce(o,{});return this.expandSegment(e,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:u,remainingSegments:c,positionalParamSegments:l}=Fw(n,i,s);if(!a)return dl(n);const d=this.applyRedirectCommands(u,i.redirectTo,l);return i.redirectTo.startsWith("/")?NO(d):this.lineralizeSegments(i,d).pipe(Tt(h=>this.expandSegment(e,n,r,h.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){return"**"===r.path?(e=CO(r,e),r.loadChildren?(r._loadedRoutes?$({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(oe(a=>(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,new ce(i,{})))):$(new ce(i,{}))):SO(n,r,i,e).pipe(nr(({matched:o,consumedSegments:a,remainingSegments:u})=>o?this.getChildConfig(e=r._injector??e,r,i).pipe(Tt(l=>{const d=l.injector??e,h=l.routes,{segmentGroup:f,slicedSegments:p}=cp(n,a,u,h),g=new ce(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(d,h,g).pipe(oe(y=>new ce(a,y)));if(0===h.length&&0===p.length)return $(new ce(a,{}));const _=rr(r)===s;return this.expandSegment(d,g,h,p,_?ee:s,!0).pipe(oe(E=>new ce(a.concat(E.segments),E.children)))})):dl(n)))}getChildConfig(e,n,r){return n.children?$({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?$({routes:n._loadedRoutes,injector:n._loadedInjector}):function k9(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?$(!0):$(i.map(o=>{const a=ja(o,t);return Ki(function y9(t){return t&&ll(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Ha(),bO())}(e,n,r).pipe(Tt(i=>i?this.configLoader.loadChildren(e,n).pipe(Ft(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function V9(t){return Yc(wO(dp,3))}())):$({routes:[],injector:e})}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $(r);if(i.numberOfChildren>1||!i.children[ee])return Yc(new R(4e3,dp));i=i.children[ee]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Ws(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Lt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Lt(n.children,(a,u)=>{o[u]=this.createSegmentGroup(e,a,r,i)}),new ce(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new R(4001,dp);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}class H9{}class z9{constructor(e,n,r,i,s,o,a){this.injector=e,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=cp(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ee).pipe(oe(n=>{if(null===n)return null;const r=new ip([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},ee,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fi(r,n),s=new _O(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const n=e.value,r=mO(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i)}processChildren(e,n,r){return pt(Object.keys(r.children)).pipe(Gs(i=>{const s=r.children[i],o=TO(n,i);return this.processSegmentGroup(e,o,s,i)}),G1((i,s)=>i&&s?(i.push(...s),i):null),function hY(t,e=!1){return et((n,r)=>{let i=0;n.subscribe(tt(r,s=>{const o=t(s,i++);(o||e)&&r.next(s),!o&&r.complete()}))})}(i=>null!==i),Qf(null),W1(),oe(i=>{if(null===i)return null;const s=MO(i);return function q9(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(e,n,r,i,s){return pt(n).pipe(Gs(o=>this.processSegmentAgainstRoute(o._injector??e,o,r,i,s)),zi(o=>!!o),qi(o=>{if(Pw(o))return xO(r,i,s)?$([]):$(null);throw o}))}processSegmentAgainstRoute(e,n,r,i,s){if(n.redirectTo||!AO(n,r,i,s))return $(null);let o;if("**"===n.path){const a=i.length>0?K1(i).parameters:{},u=OO(r)+i.length;o=$({snapshot:new ip(i,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,FO(n),rr(n),n.component??n._loadedComponent??null,n,PO(r),u,LO(n)),consumedSegments:[],remainingSegments:[]})}else o=SO(r,n,i,e).pipe(oe(({matched:a,consumedSegments:u,remainingSegments:c,parameters:l})=>{if(!a)return null;const d=OO(r)+u.length;return{snapshot:new ip(u,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,FO(n),rr(n),n.component??n._loadedComponent??null,n,PO(r),d,LO(n)),consumedSegments:u,remainingSegments:c}}));return o.pipe(nr(a=>{if(null===a)return $(null);const{snapshot:u,consumedSegments:c,remainingSegments:l}=a;e=n._injector??e;const d=n._loadedInjector??e,h=function K9(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:f,slicedSegments:p}=cp(r,c,l,h.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(d,h,f).pipe(oe(_=>null===_?null:[new fi(u,_)]));if(0===h.length&&0===p.length)return $([new fi(u,[])]);const g=rr(n)===s;return this.processSegment(d,h,f,p,g?ee:s).pipe(oe(_=>null===_?null:[new fi(u,_)]))}))}}function Q9(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function MO(t){const e=[],n=new Set;for(const r of t){if(!Q9(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=MO(r.children);e.push(new fi(r.value,i))}return e.filter(r=>!n.has(r))}function PO(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function OO(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function FO(t){return t.data||{}}function LO(t){return t.resolve||{}}function UO(t){return"string"==typeof t.title||null===t.title}function Lw(t){return nr(e=>{const n=t(e);return n?pt(n).pipe(oe(()=>e)):$(e)})}const Ga=new j("ROUTES");let Uw=(()=>{class t{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=Ki(n.loadComponent()).pipe(oe(BO),Ft(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),_w(()=>{this.componentLoaders.delete(n)})),i=new $1(r,()=>new br).pipe(gw());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(oe(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let u,c,l=!1;Array.isArray(a)?c=a:(u=a.create(n).injector,c=q1(u.get(Ga,[],z.Self|z.Optional)));return{routes:c.map(Mw),injector:u}}),_w(()=>{this.childrenLoaders.delete(r)})),o=new $1(s,()=>new br).pipe(gw());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return Ki(n()).pipe(oe(BO),Tt(i=>i instanceof DM||Array.isArray(i)?$(i):pt(this.compiler.compileModuleAsync(i))))}}return t.\u0275fac=function(n){return new(n||t)(O(Ot),O(vP))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function BO(t){return function iX(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let pp=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new br,this.configLoader=ge(Uw),this.environmentInjector=ge(si),this.urlSerializer=ge(el),this.rootContexts=ge(ol),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new qY(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new zY(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n){return this.transitions=new Ir({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:il,restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Fr(r=>0!==r.id),oe(r=>({...r,extractedUrl:n.urlHandlingStrategy.extract(r.rawUrl)})),nr(r=>{let i=!1,s=!1;return $(r).pipe(Ft(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),nr(o=>{const a=n.browserUrlTree.toString(),u=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(!u&&"reload"!==(o.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const l="";return this.events.next(new cO(o.id,n.serializeUrl(r.rawUrl),l,0)),n.rawUrlTree=o.rawUrl,o.resolve(null),Sr}if(n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return $O(o.source)&&(n.browserUrlTree=o.extractedUrl),$(o).pipe(nr(l=>{const d=this.transitions?.getValue();return this.events.next(new Tw(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),d!==this.transitions?.getValue()?Sr:Promise.resolve(l)}),function j9(t,e,n,r){return nr(i=>function B9(t,e,n,r,i){return new $9(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(oe(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),Ft(l=>{this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},r.urlAfterRedirects=l.urlAfterRedirects}),function X9(t,e,n,r,i){return Tt(s=>function W9(t,e,n,r,i,s,o="emptyOnly"){return new z9(t,e,n,r,i,o,s).recognize().pipe(nr(a=>null===a?function G9(t){return new Be(e=>e.error(t))}(new H9):$(a)))}(t,e,n,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe(oe(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Ft(l=>{if(r.targetSnapshot=l.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!l.extras.skipLocationChange){const h=n.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);n.setBrowserUrl(h,l)}n.browserUrlTree=l.urlAfterRedirects}const d=new $Y(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=o,g=new Tw(l,this.urlSerializer.serialize(d),h,f);this.events.next(g);const _=gO(d,this.rootComponentType).snapshot;return $(r={...o,targetSnapshot:_,urlAfterRedirects:d,extras:{...p,skipLocationChange:!1,replaceUrl:!1}})}{const l="";return this.events.next(new cO(o.id,n.serializeUrl(r.extractedUrl),l,1)),n.rawUrlTree=o.rawUrl,o.resolve(null),Sr}}),Ft(o=>{const a=new jY(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),oe(o=>r={...o,guards:f9(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function T9(t,e){return Tt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?$({...n,guardsResult:!0}):function D9(t,e,n,r){return pt(t).pipe(Tt(i=>function N9(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?$(s.map(a=>{const u=al(e)??i,c=ja(a,u);return Ki(function I9(t){return t&&ll(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):u.runInContext(()=>c(t,e,n,r))).pipe(zi())})).pipe(Ha()):$(!0)}(i.component,i.route,n,e,r)),zi(i=>!0!==i,!0))}(o,r,i,t).pipe(Tt(a=>a&&function _9(t){return"boolean"==typeof t}(a)?function b9(t,e,n,r){return pt(e).pipe(Gs(i=>pw(function A9(t,e){return null!==t&&e&&e(new KY(t)),$(!0)}(i.route.parent,r),function S9(t,e){return null!==t&&e&&e(new YY(t)),$(!0)}(i.route,r),function R9(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function p9(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>B1(()=>$(o.guards.map(u=>{const c=al(o.node)??n,l=ja(u,c);return Ki(function w9(t){return t&&ll(t.canActivateChild)}(l)?l.canActivateChild(r,t):c.runInContext(()=>l(r,t))).pipe(zi())})).pipe(Ha())));return $(s).pipe(Ha())}(t,i.path,n),function x9(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return $(!0);const i=r.map(s=>B1(()=>{const o=al(e)??n,a=ja(s,o);return Ki(function v9(t){return t&&ll(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(zi())}));return $(i).pipe(Ha())}(t,i.route,n))),zi(i=>!0!==i,!0))}(r,s,t,e):$(a)),oe(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Ft(o=>{if(r.guardsResult=o.guardsResult,qs(o.guardsResult))throw vO(0,o.guardsResult);const a=new HY(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Fr(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Lw(o=>{if(o.guards.canActivateChecks.length)return $(o).pipe(Ft(a=>{const u=new GY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),nr(a=>{let u=!1;return $(a).pipe(function Z9(t,e){return Tt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let s=0;return pt(i).pipe(Gs(o=>function J9(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!UO(i)&&(s[Zc]=i.title),function eX(t,e,n,r){const i=function tX(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return $({});const s={};return pt(i).pipe(Tt(o=>function nX(t,e,n,r){const i=al(e)??r,s=ja(t,i);return Ki(s.resolve?s.resolve(e,n):i.runInContext(()=>s(e,n)))}(t[o],e,n,r).pipe(zi(),Ft(a=>{s[o]=a}))),mw(1),function fY(t){return oe(()=>t)}(s),qi(o=>Pw(o)?Sr:Yc(o)))}(s,t,e,r).pipe(oe(o=>(t._resolvedData=o,t.data=mO(t,n).resolve,i&&UO(i)&&(t.data[Zc]=i.title),null)))}(o.route,r,t,e)),Ft(()=>s++),mw(1),Tt(o=>s===i.length?$(n):Sr))})}(n.paramsInheritanceStrategy,this.environmentInjector),Ft({next:()=>u=!0,complete:()=>{u||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Ft(a=>{const u=new WY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),Lw(o=>{const a=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ft(l=>{u.component=l}),oe(()=>{})));for(const l of u.children)c.push(...a(l));return c};return U1(a(o.targetSnapshot.root)).pipe(Qf(),Xc(1))}),Lw(()=>this.afterPreactivation()),oe(o=>{const a=function n9(t,e,n){const r=sl(t,e._root,n?n._root:void 0);return new pO(r,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),Ft(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n)=>oe(r=>(new h9(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o)),Ft({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new Ks(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),_w(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),qi(o=>{if(s=!0,EO(o)){IO(o)||(n.navigated=!0,n.restoreHistory(r,!0));const a=new rp(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),IO(o)){const u=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||$O(r.source)};n.scheduleNavigation(u,il,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{n.restoreHistory(r,!0);const a=new lO(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(n.errorHandler(o))}catch(u){r.reject(u)}}return Sr}))}))}cancelNavigationTransition(n,r,i){const s=new rp(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function $O(t){return t!==il}let jO=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[Zc]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ge(sX)},providedIn:"root"}),t})(),sX=(()=>{class t extends jO{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(O(hw))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oX=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ge(uX)},providedIn:"root"}),t})();class aX{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let uX=(()=>{class t extends aX{}return t.\u0275fac=function(){let e;return function(r){return(e||(e=function Wx(t){return Ui(()=>{const e=t.prototype.constructor,n=e[ei]||B_(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[ei]||B_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}(t)))(r||t)}}(),t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const gp=new j("",{providedIn:"root",factory:()=>({})});let lX=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:function(){return ge(dX)},providedIn:"root"}),t})(),dX=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function hX(t){throw t}function fX(t,e,n){return e.parse("/")}const pX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Tn=(()=>{class t{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=ge(L6),this.isNgZoneEnabled=!1,this.options=ge(gp,{optional:!0})||{},this.errorHandler=this.options.errorHandler||hX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||fX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=ge(lX),this.routeReuseStrategy=ge(oX),this.urlCreationStrategy=ge(JY),this.titleStrategy=ge(jO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=q1(ge(Ga,{optional:!0})??[]),this.navigationTransitions=ge(pp),this.urlSerializer=ge(el),this.location=ge(jv),this.isNgZoneEnabled=ge(be)instanceof be&&be.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ws,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=gO(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),il,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Mw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,c=u?this.currentUrlTree.fragment:o;let l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...s};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=s||null}return null!==l&&(l=this.removeEmptyProps(l)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,n,l,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=qs(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,il,null,r)}navigate(n,r={skipLocationChange:!1}){return function mX(t){for(let e=0;e<t.length;e++){if(null==t[e])throw new R(4008,!1)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...pX}:!1===r?{...gX}:r,qs(n))return Y1(this.currentUrlTree,n,i);const s=this.parseUrl(n);return Y1(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,c,l;return o?(a=o.resolve,u=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,u=h}),l="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:l,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class GO{}let vX=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Fr(n=>n instanceof Ks),Gs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=Cf(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return pt(i).pipe(Qo())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):$(null);const s=i.pipe(Tt(o=>null===o?$(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?pt([s,this.loader.loadComponent(r)]).pipe(Qo()):s})}}return t.\u0275fac=function(n){return new(n||t)(O(Tn),O(vP),O(si),O(GO),O(Uw))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Bw=new j("");let WO=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Tw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ks&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof hO&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hO(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function EN(){throw new Error("invalid")}()},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();function Qs(t,e){return{\u0275kind:t,\u0275providers:e}}function qO(){const t=ge(Ot);return e=>{const n=t.get(Rf);if(e!==n.components[0])return;const r=t.get(Tn),i=t.get(KO);1===t.get(jw)&&r.initialNavigation(),t.get(QO,null,z.Optional)?.setUpPreloading(),t.get(Bw,null,z.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const KO=new j("",{factory:()=>new br}),jw=new j("",{providedIn:"root",factory:()=>1});const QO=new j("");function TX(t){return Qs(0,[{provide:QO,useExisting:vX},{provide:GO,useExisting:t}])}const YO=new j("ROUTER_FORROOT_GUARD"),DX=[jv,{provide:el,useClass:yw},Tn,ol,{provide:$a,useFactory:function zO(t){return t.routerState.root},deps:[Tn]},Uw,[]];function bX(){return new bP("Router",Tn)}let XO=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[DX,[],{provide:Ga,multi:!0,useValue:n},{provide:YO,useFactory:RX,deps:[[Tn,new Qe,new mc]]},{provide:gp,useValue:r||{}},r?.useHash?{provide:Hs,useClass:T7}:{provide:Hs,useClass:QP},{provide:Bw,useFactory:()=>{const t=ge(G5),e=ge(be),n=ge(gp),r=ge(pp),i=ge(el);return n.scrollOffset&&t.setOffset(n.scrollOffset),new WO(i,r,t,e,n)}},r?.preloadingStrategy?TX(r.preloadingStrategy).\u0275providers:[],{provide:bP,multi:!0,useFactory:bX},r?.initialNavigation?NX(r):[],[{provide:ZO,useFactory:qO},{provide:yP,multi:!0,useExisting:ZO}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Ga,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(O(YO,8))},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({imports:[op]}),t})();function RX(t){return"guarded"}function NX(t){return["disabled"===t.initialNavigation?Qs(3,[{provide:jc,multi:!0,useFactory:()=>{const e=ge(Tn);return()=>{e.setUpLocationChangeListener()}}},{provide:jw,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Qs(2,[{provide:jw,useValue:0},{provide:jc,multi:!0,deps:[Ot],useFactory:e=>{const n=e.get(E7,Promise.resolve());return()=>n.then(()=>new Promise(i=>{const s=e.get(Tn),o=e.get(KO);(function r(i){e.get(Tn).events.pipe(Fr(o=>o instanceof Ks||o instanceof rp||o instanceof lO),oe(o=>o instanceof Ks||o instanceof rp&&(0===o.code||1===o.code)&&null),Fr(o=>null!==o),Xc(1)).subscribe(()=>{i()})})(()=>{i(!0)}),e.get(pp).afterPreactivation=()=>(i(!0),o.closed?$(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const ZO=new j("");class za{}za.\u0275fac=function(e){return new(e||za)},za.\u0275mod=Yn({type:za}),za.\u0275inj=Pn({imports:[XO.forRoot([]),XO]});class fl{}function JO(t,e,n,r,i,s,o){try{var a=t[s](o),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(u){JO(s,r,i,o,a,"next",u)}function a(u){JO(s,r,i,o,a,"throw",u)}o(void 0)})}}fl.\u0275fac=function(e){return new(e||fl)},fl.\u0275cmp=Xo({type:fl,selectors:[["app-navbar"]],decls:3,vars:0,template:function(e,n){1&e&&(wn(0,"nav")(1,"p"),mr(2,"Youtube Project"),In()())},styles:["nav[_ngcontent-%COMP%]{background-color:#8a2be2;text-align:center}"]});const A=function(t,e){if(!t)throw qa(e)},qa=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},eF=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},mp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0;let h=(15&a)<<2|c>>6,f=63&c;u||(f=64,o||(h=64)),r.push(n[s>>2],n[(3&s)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eF(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const u=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(1023&u))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,null==s||null==a||null==c||null==d)throw Error();r.push(s<<2|a>>4),64!==c&&(r.push(a<<4&240|c>>2),64!==d&&r.push(c<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},tF=function(t){const e=eF(t);return mp.encodeByteArray(e,!0)},_p=function(t){return tF(t).replace(/\./g,"")},yp=function(t){try{return mp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function OX(t){return nF(void 0,t)}function nF(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!FX(n)||(t[n]=nF(t[n],e[n]));return t}function FX(t){return"__proto__"!==t}const vp=()=>{try{return function LX(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0})()||(()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yp(t[1]);return e&&JSON.parse(e)})()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},rF=t=>{var e,n;return null===(n=null===(e=vp())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},iF=t=>{const e=rF(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),r]:[e.substring(0,n),r]},sF=t=>{var e;return null===(e=vp())||void 0===e?void 0:e[`_${t}`]};class Ka{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(n):e(n,r))}}}function oF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[_p(JSON.stringify({alg:"none",type:"JWT"})),_p(JSON.stringify(o)),""].join(".")}function Dt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Gw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function Ww(){const t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function aF(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ys(){try{return"object"==typeof indexedDB}catch{return!1}}function pl(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e((null===(s=i.error)||void 0===s?void 0:s.message)||"")}}catch(n){e(n)}})}function zw(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vr.prototype.create)}}class Vr{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?function WX(t,e){return t.replace(zX,(n,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(s,r):"Error";return new ir(i,`${this.serviceName}: ${o} (${i}).`,r)}}const zX=/\{\$([^}]+)}/g;function gl(t){return JSON.parse(t)}function Ut(t){return JSON.stringify(t)}const wp=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=gl(yp(s[0])||""),n=gl(yp(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};function gi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function qw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ip(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(uF(s)&&uF(o)){if(!ml(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function uF(t){return null!==t&&"object"==typeof t}function _l(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}class QX{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if("string"==typeof e)for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let c,l,i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),l=1518500249):(c=s^o^a,l=1859775393):d<60?(c=s&o|a&(s|o),l=2400959708):(c=s^o^a,l=3395469782);const h=(i<<5|i>>>27)+c+u+l+r[d]&4294967295;u=a,a=o,o=4294967295&(s<<30|s>>>2),s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(null==e)return;void 0===n&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(0===o)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if("string"==typeof e){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}class XX{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(void 0===e&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function ZX(t,e){if("object"!=typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"==typeof t[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:n,complete:r},void 0===i.next&&(i.next=Kw),void 0===i.error&&(i.error=Kw),void 0===i.complete&&(i.complete=Kw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kw(){}const Cp=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Qw(t,e=1e3,n=2){const r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function vt(t){return t&&t._delegate?t._delegate:t}class Vt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Xs="[DEFAULT]";class sZ{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ka;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=null!==(n=e?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function aZ(t){return"EAGER"===t.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return m(function*(){const n=Array.from(e.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(s)&&o.resolve(i);return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(t=e,t===Xs?void 0:t),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var t;return r||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class uZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new sZ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Yw=[];var fe=(()=>{return(t=fe||(fe={}))[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",fe;var t})();const cF={debug:fe.DEBUG,verbose:fe.VERBOSE,info:fe.INFO,warn:fe.WARN,error:fe.ERROR,silent:fe.SILENT},cZ=fe.INFO,lZ={[fe.DEBUG]:"log",[fe.VERBOSE]:"log",[fe.INFO]:"info",[fe.WARN]:"warn",[fe.ERROR]:"error"},dZ=(t,e,...n)=>{if(e<t.logLevel)return;const r=(new Date).toISOString(),i=lZ[e];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[i](`[${r}]  ${t.name}:`,...n)};class Zs{constructor(e){this.name=e,this._logLevel=cZ,this._logHandler=dZ,this._userLogHandler=null,Yw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?cF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,fe.DEBUG,...e),this._logHandler(this,fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,fe.VERBOSE,...e),this._logHandler(this,fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,fe.INFO,...e),this._logHandler(this,fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,fe.WARN,...e),this._logHandler(this,fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,fe.ERROR,...e),this._logHandler(this,fe.ERROR,...e)}}let lF,dF;const hF=new WeakMap,Xw=new WeakMap,fF=new WeakMap,Zw=new WeakMap,Jw=new WeakMap;let eI={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return Xw.get(t);if("objectStoreNames"===e)return t.objectStoreNames||fF.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mi(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function vZ(t){return"function"==typeof t?function yZ(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pZ(){return dF||(dF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(t)?function(...e){return t.apply(tI(this),e),mi(hF.get(this))}:function(...e){return mi(t.apply(tI(this),e))}:function(e,...n){const r=t.call(tI(this),e,...n);return fF.set(r,e.sort?e.sort():[e]),mi(r)}}(t):(t instanceof IDBTransaction&&function mZ(t){if(Xw.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Xw.set(t,e)}(t),((t,e)=>e.some(n=>t instanceof n))(t,function fZ(){return lF||(lF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(t,eI):t)}function mi(t){if(t instanceof IDBRequest)return function gZ(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(mi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hF.set(n,t)}).catch(()=>{}),Jw.set(e,t),e}(t);if(Zw.has(t))return Zw.get(t);const e=vZ(t);return e!==t&&(Zw.set(t,e),Jw.set(e,t)),e}const tI=t=>Jw.get(t);function Tp(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=mi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(mi(o.result),u.oldVersion,u.newVersion,mi(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function nI(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",()=>e()),mi(n).then(()=>{})}const wZ=["get","getKey","getAll","getAllKeys","count"],IZ=["put","add","delete","clear"],rI=new Map;function pF(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(rI.get(e))return rI.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=IZ.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!wZ.includes(n))return;const s=function(){var o=m(function*(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(u.shift())),(yield Promise.all([l[n](...u),i&&c.done]))[0]});return function(u){return o.apply(this,arguments)}}();return rI.set(e,s),s}!function _Z(t){eI=t(eI)}(t=>({...t,get:(e,n,r)=>pF(e,n)||t.get(e,n,r),has:(e,n)=>!!pF(e,n)||t.has(e,n)}));class EZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function CZ(t){return"VERSION"===t.getComponent()?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const iI="@firebase/app",Js=new Zs("@firebase/app"),Dp="[DEFAULT]",QZ={[iI]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},eo=new Map,bp=new Map;function YZ(t,e){try{t.container.addComponent(e)}catch(n){Js.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jt(t){const e=t.name;if(bp.has(e))return Js.debug(`There were multiple attempts to register component ${e}.`),!1;bp.set(e,t);for(const n of eo.values())YZ(n,t);return!0}function _i(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}const yi=new Vr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class ZZ{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}const to="9.16.0";function mF(t,e={}){let n=t;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:Dp,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw yi.create("bad-app-name",{appName:String(i)});if(n||(n=(()=>{var t;return null===(t=vp())||void 0===t?void 0:t.config})()),!n)throw yi.create("no-options");const s=eo.get(i);if(s){if(ml(n,s.options)&&ml(r,s.config))return s;throw yi.create("duplicate-app",{appName:i})}const o=new uZ(i);for(const u of bp.values())o.addComponent(u);const a=new ZZ(n,r,o);return eo.set(i,a),a}function yl(t=Dp){const e=eo.get(t);if(!e&&t===Dp)return mF();if(!e)throw yi.create("no-app",{appName:t});return e}function _F(){return Array.from(eo.values())}function Se(t,e,n){var r;let i=null!==(r=QZ[t])&&void 0!==r?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];return s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Js.warn(a.join(" "))}Jt(new Vt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const vl="firebase-heartbeat-store";let oI=null;function yF(){return oI||(oI=Tp("firebase-heartbeat-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(vl)}}).catch(t=>{throw yi.create("idb-open",{originalErrorMessage:t.message})})),oI}function aI(){return(aI=m(function*(t){try{return(yield yF()).transaction(vl).objectStore(vl).get(wF(t))}catch(e){if(e instanceof ir)Js.warn(e.message);else{const n=yi.create("idb-get",{originalErrorMessage:e?.message});Js.warn(n.message)}}})).apply(this,arguments)}function vF(t,e){return uI.apply(this,arguments)}function uI(){return(uI=m(function*(t,e){try{const r=(yield yF()).transaction(vl,"readwrite");return yield r.objectStore(vl).put(e,wF(t)),r.done}catch(n){if(n instanceof ir)Js.warn(n.message);else{const r=yi.create("idb-set",{originalErrorMessage:n?.message});Js.warn(r.message)}}})).apply(this,arguments)}function wF(t){return`${t.name}!${t.options.appId}`}class iJ{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oJ(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return m(function*(){const r=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=IF();if(null===e._heartbeatsCache&&(e._heartbeatsCache=yield e._heartbeatsCachePromise),e._heartbeatsCache.lastSentHeartbeatDate!==i&&!e._heartbeatsCache.heartbeats.some(s=>s.date===i))return e._heartbeatsCache.heartbeats.push({date:i,agent:r}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(s=>{const o=new Date(s.date).valueOf();return Date.now()-o<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return m(function*(){if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null===e._heartbeatsCache||0===e._heartbeatsCache.heartbeats.length)return"";const n=IF(),{heartbeatsToSend:r,unsentEntries:i}=function sJ(t,e=1024){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),EF(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),EF(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(e._heartbeatsCache.heartbeats),s=_p(JSON.stringify({version:2,heartbeats:r}));return e._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(e._heartbeatsCache.heartbeats=i,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),s})()}}function IF(){return(new Date).toISOString().substring(0,10)}class oJ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!Ys()&&pl().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return m(function*(){return(yield e._canUseIndexedDBPromise)&&(yield function tJ(t){return aI.apply(this,arguments)}(e.app))||{heartbeats:[]}})()}overwrite(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return vF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const s=yield n.read();return vF(n.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}})()}}function EF(t){return _p(JSON.stringify({version:2,heartbeats:t})).length}!function aJ(t){Jt(new Vt("platform-logger",e=>new EZ(e),"PRIVATE")),Jt(new Vt("heartbeat",e=>new iJ(e),"PRIVATE")),Se(iI,"0.9.1",t),Se(iI,"0.9.1","esm2017"),Se("fire-js","")}(""),Se("firebase","9.16.0","app");const CF="@firebase/installations",cI="0.6.1",DF=`w:${cI}`,bF="FIS_v2",vi=new Vr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function SF(t){return t instanceof ir&&t.code.includes("request-failed")}function lI({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function AF(t){return{token:t.token,requestStatus:2,expiresIn:gJ(t.expiresIn),creationTime:Date.now()}}function dI(t,e){return hI.apply(this,arguments)}function hI(){return(hI=m(function*(t,e){const r=(yield e.json()).error;return vi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function xF({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function RF(t,{refreshToken:e}){const n=xF(t);return n.append("Authorization",function mJ(t){return`${bF} ${t}`}(e)),n}function fI(t){return pI.apply(this,arguments)}function pI(){return(pI=m(function*(t){const e=yield t();return e.status>=500&&e.status<600?t():e})).apply(this,arguments)}function gJ(t){return Number(t.replace("s","000"))}function _J(t,e){return gI.apply(this,arguments)}function gI(){return(gI=m(function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=lI(t),i=xF(t),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:bF,appId:t.appId,sdkVersion:DF})},u=yield fI(()=>fetch(r,a));if(u.ok){const c=yield u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:AF(c.authToken)}}throw yield dI("Create Installation",u)})).apply(this,arguments)}function NF(t){return new Promise(e=>{setTimeout(e,t)})}const vJ=/^[cdef][\w-]{21}$/;function wJ(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=function IJ(t){return function yJ(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return vJ.test(n)?n:""}catch{return""}}function Ya(t){return`${t.appName}!${t.appId}`}const Xa=new Map;function kF(t,e){const n=Ya(t);MF(n,e),function TJ(t,e){const n=function PF(){return!no&&"BroadcastChannel"in self&&(no=new BroadcastChannel("[Firebase] FID Change"),no.onmessage=t=>{MF(t.data.key,t.data.fid)}),no}();n&&n.postMessage({key:t,fid:e}),function OF(){0===Xa.size&&no&&(no.close(),no=null)}()}(n,e)}function MF(t,e){const n=Xa.get(t);if(n)for(const r of n)r(e)}let no=null;const ro="firebase-installations-store";let _I=null;function yI(){return _I||(_I=Tp("firebase-installations-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(ro)}})),_I}function Sp(t,e){return vI.apply(this,arguments)}function vI(){return(vI=m(function*(t,e){const n=Ya(t),i=(yield yI()).transaction(ro,"readwrite"),s=i.objectStore(ro),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&kF(t,e.fid),e})).apply(this,arguments)}function wI(t){return II.apply(this,arguments)}function II(){return(II=m(function*(t){const e=Ya(t),r=(yield yI()).transaction(ro,"readwrite");yield r.objectStore(ro).delete(e),yield r.done})).apply(this,arguments)}function wl(t,e){return EI.apply(this,arguments)}function EI(){return(EI=m(function*(t,e){const n=Ya(t),i=(yield yI()).transaction(ro,"readwrite"),s=i.objectStore(ro),o=yield s.get(n),a=e(o);return void 0===a?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&kF(t,a.fid),a})).apply(this,arguments)}function CI(t){return TI.apply(this,arguments)}function TI(){return(TI=m(function*(t){let e;const n=yield wl(t.appConfig,r=>{const i=SJ(r),s=AJ(t,i);return e=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})).apply(this,arguments)}function SJ(t){return LF(t||{fid:wJ(),registrationStatus:0})}function AJ(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(vi.create("app-offline"))};const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function xJ(t,e){return DI.apply(this,arguments)}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:RJ(t)}:{installationEntry:e}}function DI(){return(DI=m(function*(t,e){try{const n=yield _J(t,e);return Sp(t.appConfig,n)}catch(n){throw SF(n)&&409===n.customData.serverCode?yield wI(t.appConfig):yield Sp(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})).apply(this,arguments)}function RJ(t){return bI.apply(this,arguments)}function bI(){return(bI=m(function*(t){let e=yield FF(t.appConfig);for(;1===e.registrationStatus;)yield NF(100),e=yield FF(t.appConfig);if(0===e.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield CI(t);return r||n}return e})).apply(this,arguments)}function FF(t){return wl(t,e=>{if(!e)throw vi.create("installation-not-found");return LF(e)})}function LF(t){return function NJ(t){return 1===t.registrationStatus&&t.registrationTime+1e4<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function kJ(t,e){return SI.apply(this,arguments)}function SI(){return(SI=m(function*({appConfig:t,heartbeatServiceProvider:e},n){const r=MJ(t,n),i=RF(t,n),s=e.getImmediate({optional:!0});if(s){const c=yield s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:DF,appId:t.appId}})},u=yield fI(()=>fetch(r,a));if(u.ok)return AF(yield u.json());throw yield dI("Generate Auth Token",u)})).apply(this,arguments)}function MJ(t,{fid:e}){return`${lI(t)}/${e}/authTokens:generate`}function AI(t){return xI.apply(this,arguments)}function xI(){return(xI=m(function*(t,e=!1){let n;const r=yield wl(t.appConfig,s=>{if(!VF(s))throw vi.create("not-registered");const o=s.authToken;if(!e&&FJ(o))return s;if(1===o.requestStatus)return n=PJ(t,e),s;{if(!navigator.onLine)throw vi.create("app-offline");const a=UJ(s);return n=OJ(t,a),a}});return n?yield n:r.authToken})).apply(this,arguments)}function PJ(t,e){return RI.apply(this,arguments)}function RI(){return(RI=m(function*(t,e){let n=yield UF(t.appConfig);for(;1===n.authToken.requestStatus;)yield NF(100),n=yield UF(t.appConfig);const r=n.authToken;return 0===r.requestStatus?AI(t,e):r})).apply(this,arguments)}function UF(t){return wl(t,e=>{if(!VF(e))throw vi.create("not-registered");return function VJ(t){return 1===t.requestStatus&&t.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function OJ(t,e){return NI.apply(this,arguments)}function NI(){return(NI=m(function*(t,e){try{const n=yield kJ(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Sp(t.appConfig,r),n}catch(n){if(!SF(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Sp(t.appConfig,r)}else yield wI(t.appConfig);throw n}})).apply(this,arguments)}function VF(t){return void 0!==t&&2===t.registrationStatus}function FJ(t){return 2===t.requestStatus&&!function LJ(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}function UJ(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function kI(){return(kI=m(function*(t){const e=t,{installationEntry:n,registrationPromise:r}=yield CI(e);return r?r.catch(console.error):AI(e).catch(console.error),n.fid})).apply(this,arguments)}function MI(){return(MI=m(function*(t,e=!1){const n=t;return yield jJ(n),(yield AI(n,e)).token})).apply(this,arguments)}function jJ(t){return PI.apply(this,arguments)}function PI(){return(PI=m(function*(t){const{registrationPromise:e}=yield CI(t);e&&(yield e)})).apply(this,arguments)}function LI(t){return vi.create("missing-app-config-values",{valueName:t})}const BF="installations",qJ=t=>{const e=t.getProvider("app").getImmediate(),n=function WJ(t){if(!t||!t.options)throw LI("App Configuration");if(!t.name)throw LI("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw LI(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:n,heartbeatServiceProvider:_i(e,"heartbeat"),_delete:()=>Promise.resolve()}},KJ=t=>{const n=_i(t.getProvider("app").getImmediate(),BF).getImmediate();return{getId:()=>function BJ(t){return kI.apply(this,arguments)}(n),getToken:i=>function $J(t){return MI.apply(this,arguments)}(n,i)}};(function QJ(){Jt(new Vt(BF,qJ,"PUBLIC")),Jt(new Vt("installations-internal",KJ,"PRIVATE"))})(),Se(CF,cI),Se(CF,cI,"esm2017");const UI="@firebase/remote-config",Dn=new Vr("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class oee{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield n.client.fetch(e),o=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&o.push(n.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(o),s})()}}function aee(t=navigator){return t.languages&&t.languages[0]||t.language}class uee{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},u={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:aee()},c={method:"POST",headers:a,body:JSON.stringify(u)},l=fetch(o,c),d=new Promise((I,E)=>{e.signal.addEventListener(()=>{const y=new Error("The operation was aborted.");y.name="AbortError",E(y)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(I){let E="fetch-client-network";throw"AbortError"===I?.name&&(E="fetch-timeout"),Dn.create(E,{originalErrorMessage:I?.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,_;if(200===h.status){let I;try{I=yield h.json()}catch(E){throw Dn.create("fetch-client-parse",{originalErrorMessage:E?.message})}g=I.entries,_=I.state}if("INSTANCE_STATE_UNSPECIFIED"===_?f=500:"NO_CHANGE"===_?f=304:("NO_TEMPLATE"===_||"EMPTY_CONFIG"===_)&&(g={}),304!==f&&200!==f)throw Dn.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class dee{constructor(e,n){this.client=e,this.storage=n}fetch(e){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:n,backoffCount:r}){var i=this;return m(function*(){yield function cee(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,n);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function lee(t){if(!(t instanceof ir&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const o={throttleEndTimeMillis:Date.now()+Qw(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(o),i.attemptFetch(e,o)}})()}}class pee{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function xp(t,e){const n=t.target.error||void 0;return Dn.create(e,{originalErrorMessage:n&&n?.message})}const io="app_namespace_store";class yee{constructor(e,n,r,i=function _ee(){return new Promise((t,e)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{e(xp(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(io,{keyPath:"compositeKey"})}}catch(n){e(Dn.create("storage-open",{originalErrorMessage:n?.message}))}})}()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([io],"readonly").objectStore(io),u=n.createCompositeKey(e);try{const c=a.get(u);c.onerror=l=>{s(xp(l,"storage-get"))},c.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(c){s(Dn.create("storage-get",{originalErrorMessage:c?.message}))}})})()}set(e,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((s,o)=>{const u=i.transaction([io],"readwrite").objectStore(io),c=r.createCompositeKey(e);try{const l=u.put({compositeKey:c,value:n});l.onerror=d=>{o(xp(d,"storage-set"))},l.onsuccess=()=>{s()}}catch(l){o(Dn.create("storage-set",{originalErrorMessage:l?.message}))}})})()}delete(e){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const a=r.transaction([io],"readwrite").objectStore(io),u=n.createCompositeKey(e);try{const c=a.delete(u);c.onerror=l=>{s(xp(l,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){s(Dn.create("storage-delete",{originalErrorMessage:c?.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class vee{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return m(function*(){const n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield n;s&&(e.lastFetchStatus=s);const o=yield r;o&&(e.lastSuccessfulFetchTimestampMillis=o);const a=yield i;a&&(e.activeConfig=a)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function Iee(){return HI.apply(this,arguments)}function HI(){return(HI=m(function*(){if(!Ys())return!1;try{return yield pl()}catch{return!1}})).apply(this,arguments)}!function wee(){Jt(new Vt("remote-config",function t(e,{instanceIdentifier:n}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Dn.create("registration-window");if(!Ys())throw Dn.create("indexed-db-unavailable");const{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Dn.create("registration-project-id");if(!o)throw Dn.create("registration-api-key");if(!a)throw Dn.create("registration-app-id");const u=new yee(a,r.name,n=n||"firebase"),c=new vee(u),l=new Zs(UI);l.logLevel=fe.ERROR;const d=new uee(i,to,n,s,o,a),h=new dee(d,u),f=new oee(h,u,c,l),p=new pee(r,f,c,u,l);return function ree(t){const e=vt(t);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Se(UI,"0.4.1"),Se(UI,"0.4.1","esm2017")}();const Eee="/firebase-messaging-sw.js",Cee="/firebase-cloud-messaging-push-scope",GF="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",WF="google.c.a.c_id",Dee="google.c.a.c_l",bee="google.c.a.ts",See="google.c.a.e";var Za=(()=>{return(t=Za||(Za={})).PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",Za;var t})();function wi(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Aee(t){const n=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const GI="fcm_token_details_db",zF="fcm_token_object_Store";function Ree(t){return WI.apply(this,arguments)}function WI(){return WI=m(function*(t){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(GI))return null;let e=null;return(yield Tp(GI,5,{upgrade:(r=m(function*(i,s,o,a){var u;if(s<2||!i.objectStoreNames.contains(zF))return;const c=a.objectStore(zF),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),l)if(2===s){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:null!==(u=d.createTime)&&void 0!==u?u:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:wi(d.vapidKey)}}}else if(3===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:wi(d.auth),p256dh:wi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:wi(d.vapidKey)}}}else if(4===s){const d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:wi(d.auth),p256dh:wi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:wi(d.vapidKey)}}}}),function(s,o,a,u){return r.apply(this,arguments)})})).close(),yield nI(GI),yield nI("fcm_vapid_details_db"),yield nI("undefined"),Nee(e)?e:null;var r}),WI.apply(this,arguments)}function Nee(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const so="firebase-messaging-store";let zI=null;function qI(){return zI||(zI=Tp("firebase-messaging-database",1,{upgrade:(t,e)=>{0===e&&t.createObjectStore(so)}})),zI}function qF(t){return KI.apply(this,arguments)}function KI(){return(KI=m(function*(t){const e=ZI(t),r=yield(yield qI()).transaction(so).objectStore(so).get(e);if(r)return r;{const i=yield Ree(t.appConfig.senderId);if(i)return yield QI(t,i),i}})).apply(this,arguments)}function QI(t,e){return YI.apply(this,arguments)}function YI(){return(YI=m(function*(t,e){const n=ZI(t),i=(yield qI()).transaction(so,"readwrite");return yield i.objectStore(so).put(e,n),yield i.done,e})).apply(this,arguments)}function Pee(t){return XI.apply(this,arguments)}function XI(){return(XI=m(function*(t){const e=ZI(t),r=(yield qI()).transaction(so,"readwrite");yield r.objectStore(so).delete(e),yield r.done})).apply(this,arguments)}function ZI({appConfig:t}){return t.appId}const Bt=new Vr("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fee(t,e){return JI.apply(this,arguments)}function JI(){return(JI=m(function*(t,e){const n=yield rE(t),r=QF(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(nE(t.appConfig),i)).json()}catch(o){throw Bt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error)throw Bt.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw Bt.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function Lee(t,e){return eE.apply(this,arguments)}function eE(){return(eE=m(function*(t,e){const n=yield rE(t),r=QF(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${nE(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw Bt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error)throw Bt.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw Bt.create("token-update-no-token");return s.token})).apply(this,arguments)}function KF(t,e){return tE.apply(this,arguments)}function tE(){return(tE=m(function*(t,e){const r={method:"DELETE",headers:yield rE(t)};try{const s=yield(yield fetch(`${nE(t.appConfig)}/${e}`,r)).json();if(s.error)throw Bt.create("token-unsubscribe-failed",{errorInfo:s.error.message})}catch(i){throw Bt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})).apply(this,arguments)}function nE({projectId:t}){return`https://fcmregistrations.googleapis.com/v1/projects/${t}/registrations`}function rE(t){return iE.apply(this,arguments)}function iE(){return(iE=m(function*({appConfig:t,installations:e}){const n=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function QF({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==GF&&(i.web.applicationPubKey=r),i}function Vee(t){return sE.apply(this,arguments)}function sE(){return(sE=m(function*(t){const e=yield $ee(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:wi(e.getKey("auth")),p256dh:wi(e.getKey("p256dh"))},r=yield qF(t.firebaseDependencies);if(r){if(jee(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?Bee(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield KF(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return XF(t.firebaseDependencies,n)}return XF(t.firebaseDependencies,n)})).apply(this,arguments)}function YF(t){return oE.apply(this,arguments)}function oE(){return(oE=m(function*(t){const e=yield qF(t.firebaseDependencies);e&&(yield KF(t.firebaseDependencies,e.token),yield Pee(t.firebaseDependencies));const n=yield t.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function Bee(t,e){return aE.apply(this,arguments)}function aE(){return(aE=m(function*(t,e){try{const n=yield Lee(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield QI(t.firebaseDependencies,r),n}catch(n){throw yield YF(t),n}})).apply(this,arguments)}function XF(t,e){return uE.apply(this,arguments)}function uE(){return(uE=m(function*(t,e){const r={token:yield Fee(t,e),createTime:Date.now(),subscriptionOptions:e};return yield QI(t,r),r.token})).apply(this,arguments)}function $ee(t,e){return cE.apply(this,arguments)}function cE(){return(cE=m(function*(t,e){return(yield t.pushManager.getSubscription())||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Aee(e)})})).apply(this,arguments)}function jee(t,e){return e.vapidKey===t.vapidKey&&e.endpoint===t.endpoint&&e.auth===t.auth&&e.p256dh===t.p256dh}function ZF(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return function Hee(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}(e,t),function Gee(t,e){e.data&&(t.data=e.data)}(e,t),function Wee(t,e){var n,r,i,s,o;if(!(e.fcmOptions||null!==(n=e.notification)&&void 0!==n&&n.click_action))return;t.fcmOptions={};const a=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;a&&(t.fcmOptions.link=a);const u=null===(o=e.fcmOptions)||void 0===o?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}(e,t),e}function zee(t){return"object"==typeof t&&!!t&&WF in t}function JF(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function lE(t){return Bt.create("missing-app-config-values",{valueName:t})}JF("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),JF("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Kee{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function qee(t){if(!t||!t.options)throw lE("App Configuration Object");if(!t.name)throw lE("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw lE(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function eL(t){return dE.apply(this,arguments)}function dE(){return(dE=m(function*(t){try{t.swRegistration=yield navigator.serviceWorker.register(Eee,{scope:Cee}),t.swRegistration.update().catch(()=>{})}catch(e){throw Bt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})).apply(this,arguments)}function Qee(t,e){return hE.apply(this,arguments)}function hE(){return(hE=m(function*(t,e){if(!e&&!t.swRegistration&&(yield eL(t)),e||!t.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Bt.create("invalid-sw-registration");t.swRegistration=e}})).apply(this,arguments)}function Yee(t,e){return fE.apply(this,arguments)}function fE(){return(fE=m(function*(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=GF)})).apply(this,arguments)}function pE(){return(pE=m(function*(t,e){if(!navigator)throw Bt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bt.create("permission-blocked");return yield Yee(t,e?.vapidKey),yield Qee(t,e?.serviceWorkerRegistration),Vee(t)})).apply(this,arguments)}function Xee(t,e,n){return gE.apply(this,arguments)}function gE(){return(gE=m(function*(t,e,n){const r=Zee(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[WF],message_name:n[Dee],message_time:n[bee],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zee(t){switch(t){case Za.NOTIFICATION_CLICKED:return"notification_open";case Za.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function mE(){return(mE=m(function*(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Za.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(ZF(n)):t.onMessageHandler.next(ZF(n)));const r=n.data;zee(r)&&"1"===r[See]&&(yield Xee(t,n.messageType,r))})).apply(this,arguments)}const nL="@firebase/messaging",ete=t=>{const e=new Kee(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function Jee(t,e){return mE.apply(this,arguments)}(e,n)),e},tte=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>function tL(t,e){return pE.apply(this,arguments)}(e,r)}};function iL(){return _E.apply(this,arguments)}function _E(){return(_E=m(function*(){try{yield pl()}catch{return!1}return typeof window<"u"&&Ys()&&zw()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nte(){Jt(new Vt("messaging",ete,"PUBLIC")),Jt(new Vt("messaging-internal",tte,"PRIVATE")),Se(nL,"0.12.1"),Se(nL,"0.12.1","esm2017")}();const Rp="analytics",ste="firebase_id",ute="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",sL="https://www.googletagmanager.com/gtag/js",$t=new Zs("@firebase/analytics");function oL(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function cte(t,e){const n=document.createElement("script");n.src=`${sL}?l=${t}&id=${e}`,n.async=!0,document.head.appendChild(n)}function dte(t,e,n,r,i,s){return wE.apply(this,arguments)}function wE(){return(wE=m(function*(t,e,n,r,i,s){const o=r[i];try{if(o)yield e[o];else{const u=(yield oL(n)).find(c=>c.measurementId===i);u&&(yield e[u.appId])}}catch(a){$t.error(a)}t("config",i,s)})).apply(this,arguments)}function hte(t,e,n,r,i){return IE.apply(this,arguments)}function IE(){return(IE=m(function*(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=yield oL(n);for(const u of o){const c=a.find(d=>d.measurementId===u),l=c&&e[c.appId];if(!l){s=[];break}s.push(l)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){$t.error(s)}})).apply(this,arguments)}function gte(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(sL)&&n.src.includes(t))return n;return null}const $n=new Vr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),aL=new class vte{constructor(e={},n=1e3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function wte(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Ite(t){return EE.apply(this,arguments)}function EE(){return(EE=m(function*(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:wte(r)},s=ute.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let a="";try{const u=yield o.json();null!==(e=u.error)&&void 0!==e&&e.message&&(a=u.error.message)}catch{}throw $n.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})).apply(this,arguments)}function Ete(t){return CE.apply(this,arguments)}function CE(){return(CE=m(function*(t,e=aL,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw $n.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw $n.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Dte;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:6e4),uL({appId:r,apiKey:i,measurementId:s},o,a,e)})).apply(this,arguments)}function uL(t,e,n){return TE.apply(this,arguments)}function TE(){return(TE=m(function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=aL){var s;const{appId:o,measurementId:a}=t;try{yield Cte(r,e)}catch(u){if(a)return $t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:o,measurementId:a};throw u}try{const u=yield Ite(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!Tte(c)){if(i.deleteThrottleMetadata(o),a)return $t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:o,measurementId:a};throw u}const l=503===Number(null===(s=c?.customData)||void 0===s?void 0:s.httpStatus)?Qw(n,i.intervalMillis,30):Qw(n,i.intervalMillis),d={throttleEndTimeMillis:Date.now()+l,backoffCount:n+1};return i.setThrottleMetadata(o,d),$t.debug(`Calling attemptFetch again in ${l} millis`),uL(t,d,r,i)}})).apply(this,arguments)}function Cte(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Tte(t){if(!(t instanceof ir&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}class Dte{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let DE,NE;function bE(){return(bE=m(function*(t,e,n,r,i){if(i&&i.global)t("event",n,r);else{const s=yield e;t("event",n,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function AE(){return(AE=m(function*(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();t("config",yield e,{update:!0,user_id:n})})).apply(this,arguments)}function cL(t){NE=t}function lL(t){DE=t}function Nte(){return kE.apply(this,arguments)}function kE(){return(kE=m(function*(){if(!Ys())return $t.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield pl()}catch(t){return $t.warn($n.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}return!0})).apply(this,arguments)}function ME(){return(ME=m(function*(t,e,n,r,i,s,o){var a;const u=Ete(t);u.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&$t.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>$t.error(f)),e.push(u);const c=Nte().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([u,c]);gte(s)||cte(s,l.measurementId),NE&&(i("consent","default",NE),cL(void 0)),i("js",new Date);const h=null!==(a=o?.config)&&void 0!==a?a:{};return h.origin="firebase",h.update=!0,null!=d&&(h[ste]=d),i("config",l.measurementId,h),DE&&(i("set",DE),lL(void 0)),l.measurementId})).apply(this,arguments)}class Mte{constructor(e){this.app=e}_delete(){return delete Ii[this.app.options.appId],Promise.resolve()}}let Ii={},dL=[];const hL={};let pL,Ei,Np="dataLayer",PE=!1;function Ote(t,e,n){!function Pte(){const t=[];if(Ww()&&t.push("This is a browser extension environment."),zw()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=$n.create("invalid-analytics-context",{errorInfo:e});$t.warn(n.message)}}();const r=t.options.appId;if(!r)throw $n.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw $n.create("no-api-key");$t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ii[r])throw $n.create("already-exists",{id:r});if(!PE){!function lte(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Np);const{wrappedGtag:s,gtagCore:o}=function pte(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function fte(t,e,n,r){function s(){return(s=m(function*(o,a,u){try{"event"===o?yield hte(t,e,n,a,u):"config"===o?yield dte(t,e,n,r,a,u):"consent"===o?t("consent","update",u):t("set",a)}catch(c){$t.error(c)}})).apply(this,arguments)}return function i(o,a,u){return s.apply(this,arguments)}}(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}(Ii,dL,hL,Np,"gtag");Ei=s,pL=o,PE=!0}return Ii[r]=function kte(t,e,n,r,i,s,o){return ME.apply(this,arguments)}(t,dL,hL,e,pL,Np,n),new Mte(t)}function Fte(t=yl()){const e=_i(t=vt(t),Rp);return e.isInitialized()?e.getImmediate():function Lte(t,e={}){const n=_i(t,Rp);if(n.isInitialized()){const i=n.getImmediate();if(ml(e,n.getOptions()))return i;throw $n.create("already-initialized")}return n.initialize({options:e})}(t)}function Ute(){return OE.apply(this,arguments)}function OE(){return(OE=m(function*(){if(Ww()||!zw()||!Ys())return!1;try{return yield pl()}catch{return!1}})).apply(this,arguments)}function Vte(t,e,n){t=vt(t),function Ate(t,e,n,r){return AE.apply(this,arguments)}(Ei,Ii[t.app.options.appId],e,n).catch(r=>$t.error(r))}function gL(t,e,n,r){t=vt(t),function bte(t,e,n,r,i){return bE.apply(this,arguments)}(Ei,Ii[t.app.options.appId],e,n,r).catch(i=>$t.error(i))}const mL="@firebase/analytics";!function Bte(){Jt(new Vt(Rp,(e,{options:n})=>Ote(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Jt(new Vt("analytics-internal",function t(e){try{const n=e.getProvider(Rp).getImmediate();return{logEvent:(r,i,s)=>gL(n,r,i,s)}}catch(n){throw $n.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Se(mL,"0.9.1"),Se(mL,"0.9.1","esm2017")}();class $te extends kn{constructor(e,n){super()}schedule(e,n=0){return this}}const kp={setInterval(t,e,...n){const{delegate:r}=kp;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=kp;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class yL extends $te{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return kp.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&kp.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ko(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}const vL={now:()=>(vL.delegate||Date).now(),delegate:void 0};class Il{constructor(e,n=Il.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}Il.now=vL.now;class wL extends Il{constructor(e,n=Il.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const Gte=new class Hte extends wL{}(class jte extends yL{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),Wte=new wL(yL),Qi=new Dc("7.5.0"),FE="__angularfire_symbol__analyticsIsSupportedValue",LE="__angularfire_symbol__analyticsIsSupported",UE="__angularfire_symbol__remoteConfigIsSupportedValue",VE="__angularfire_symbol__remoteConfigIsSupported",BE="__angularfire_symbol__messagingIsSupportedValue",$E="__angularfire_symbol__messagingIsSupported";globalThis[LE]||(globalThis[LE]=Ute().then(t=>globalThis[FE]=t).catch(()=>globalThis[FE]=!1)),globalThis[$E]||(globalThis[$E]=iL().then(t=>globalThis[BE]=t).catch(()=>globalThis[BE]=!1)),globalThis[VE]||(globalThis[VE]=Iee().then(t=>globalThis[UE]=t).catch(()=>globalThis[UE]=!1));const Mp={async:()=>globalThis[LE],sync:()=>{const t=globalThis[FE];if(void 0===t)throw new Error((t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`)("Analytics"));return t}};function El(t,e,n){if(e){if(1===e.length)return e[0];const s=e.filter(o=>o.app===n);if(1===s.length)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}const Cl=(t,e)=>{const n=e?[e]:_F(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r};function Ja(){}class IL{constructor(e,n=Gte){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class zte{constructor(e){this.zone=e,this.task=null}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ja,{},Ja,Ja)),n.pipe(Ft({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tl=(()=>{class t{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new IL(Zone.current)),this.insideAngular=n.run(()=>new IL(Zone.current,Wte)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return t.\u0275fac=function(n){return new(n||t)(O(be))},t.\u0275prov=W({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function oo(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function qte(t){return oo().ngZone.runOutsideAngular(()=>t())}function ao(t){return oo().ngZone.run(()=>t())}function Kte(t){return oo(),function Qte(t){return function(n){return(n=n.lift(new zte(t.ngZone))).pipe(vh(t.outsideAngular),yh(t.insideAngular))}}(oo())(t)}const Yte=(t,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),ao(()=>t.apply(void 0,r))},sr=(t,e)=>function(){let n;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(n||(n=ao(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ja,{},Ja,Ja)))),r[s]=Yte(r[s],n));const i=qte(()=>t.apply(this,r));if(!e){if(i instanceof Be){const s=oo();return i.pipe(vh(s.outsideAngular),yh(s.insideAngular))}return ao(()=>i)}return i instanceof Be?i.pipe(Kte):i instanceof Promise?ao(()=>new Promise((s,o)=>i.then(a=>ao(()=>s(a)),a=>ao(()=>o(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:ao(()=>i)};class Yi{constructor(e){return e}}class Dl{constructor(){return _F()}}const HE=new j("angularfire2._apps"),Zte={provide:Yi,useFactory:function Xte(t){return t&&1===t.length?t[0]:new Yi(yl())},deps:[[new Qe,HE]]},Jte={provide:Dl,deps:[[new Qe,HE]]};function ene(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Yi(r)}}let tne=(()=>{class t{constructor(n){Se("angularfire",Qi.full,"core"),Se("angularfire",Qi.full,"app"),Se("angular",rN.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(O(Af))},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({providers:[Zte,Jte]}),t})();const rne=sr(mF,!0),GE=new Map,EL={activated:!1,tokenObservers:[]},ine={initialized:!1,enabled:!1};function jt(t){return GE.get(t)||Object.assign({},EL)}function Pp(){return ine}class lne{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return m(function*(){n.stop();try{n.pending=new Ka,yield function dne(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new Ka,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const hn=new Vr("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TL(t){if(!jt(t).activated)throw hn.create("use-before-activation",{appName:t.name})}function qE(t,e){return KE.apply(this,arguments)}function KE(){return(KE=m(function*({url:t,body:e},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(e),headers:r};let o,a;try{o=yield fetch(t,s)}catch(d){throw hn.create("fetch-network-error",{originalErrorMessage:d?.message})}if(200!==o.status)throw hn.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(d){throw hn.create("fetch-parse-error",{originalErrorMessage:d?.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw hn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const c=1e3*Number(u[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+c,issuedAtTimeMillis:l}})).apply(this,arguments)}function gne(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const bl="firebase-app-check-store";let Lp=null;function bL(){return Lp||(Lp=new Promise((t,e)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(hn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(bl,{keyPath:"compositeKey"})}}catch(n){e(hn.create("storage-open",{originalErrorMessage:n?.message}))}}),Lp)}function QE(){return(QE=m(function*(t,e){const r=(yield bL()).transaction(bl,"readwrite"),s=r.objectStore(bl).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var c;a(hn.create("storage-set",{originalErrorMessage:null===(c=u.target.error)||void 0===c?void 0:c.message}))}})})).apply(this,arguments)}const Sl=new Zs("@firebase/app-check");function ZE(t,e){return Ys()?function vne(t,e){return function SL(t,e){return QE.apply(this,arguments)}(function xL(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{Sl.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function RL(){return Pp().enabled}function NL(){return eC.apply(this,arguments)}function eC(){return(eC=m(function*(){const t=Pp();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Dne={error:"UNKNOWN_ERROR"};function bne(t){return mp.encodeString(JSON.stringify(t),!1)}function Up(t){return tC.apply(this,arguments)}function tC(){return(tC=m(function*(t,e=!1){const n=t.app;TL(n);const r=jt(n);let s,i=r.token;if(i&&!eu(i)&&(r.token=void 0,i=void 0),!i){const u=yield r.cachedTokenPromise;u&&(eu(u)?i=u:yield ZE(n,void 0))}if(!e&&i&&eu(i))return{token:i.token};let a,o=!1;if(RL()){r.exchangeTokenPromise||(r.exchangeTokenPromise=qE(gne(n,yield NL()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=yield r.exchangeTokenPromise;return yield ZE(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield jt(n).exchangeTokenPromise}catch(u){"appCheck/throttled"===u.code?Sl.warn(u.message):Sl.error(u),s=u}return i?s?a=eu(i)?{token:i.token,internalError:s}:PL(s):(a={token:i.token},r.token=i,yield ZE(n,i)):a=PL(s),o&&ML(n,a),a})).apply(this,arguments)}function rC(t,e){const n=jt(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function kL(t){const{app:e}=t,n=jt(e);let r=n.tokenRefresher;r||(r=function Sne(t){const{app:e}=t;return new lne(m(function*(){let r;if(r=jt(e).token?yield Up(t,!0):yield Up(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const n=jt(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function ML(t,e){const n=jt(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function eu(t){return t.expireTimeMillis-Date.now()>0}function PL(t){return{token:bne(Dne),error:t}}class Ane{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=jt(this.app);for(const n of e)rC(this.app,n.next);return Promise.resolve()}}const jL="app-check-internal";!function jne(){Jt(new Vt("app-check",t=>function xne(t,e){return new Ane(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(jL).initialize()})),Jt(new Vt(jL,t=>function Rne(t){return{getToken:e=>Up(t,e),addTokenListener:e=>function nC(t,e,n,r){const{app:i}=t,s=jt(i);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:r,type:e}],s.token&&eu(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),kL(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>kL(t))}(t,"INTERNAL",e),removeTokenListener:e=>rC(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Se("@firebase/app-check","0.6.1")}();class Bp{constructor(){return Cl("app-check")}}typeof window<"u"&&window;const qne=function GL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},WL=new Vr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),zL=new Zs("@firebase/auth");function $p(t,...e){zL.logLevel<=fe.ERROR&&zL.error(`Auth (${to}): ${t}`,...e)}function bn(t,...e){throw uC(t,...e)}function Br(t,...e){return uC(t,...e)}function qL(t,e,n){const r=Object.assign(Object.assign({},qne()),{[e]:n});return new Vr("auth","Firebase",r).create(e,{appName:t.name})}function uC(t,...e){if("string"!=typeof t){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WL.create(t,...e)}function b(t,e,...n){if(!t)throw uC(e,...n)}function $r(t){const e="INTERNAL ASSERTION FAILED: "+t;throw $p(e),new Error(e)}function Xi(t,e){t||$r(e)}const KL=new Map;function Ci(t){Xi(t instanceof Function,"Expected a class definition");let e=KL.get(t);return e?(Xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KL.set(t,e),e)}function Al(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function QL(){var t;return typeof self<"u"&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}class xl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xi(n>e,"Short delay should be less than long delay!"),this.isMobile=Gw()||aF()}get(){return function Yne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function cC(){return"http:"===QL()||"https:"===QL()}()||Ww()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lC(t,e){Xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class YL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void $r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void $r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void $r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zne={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Jne=new xl(3e4,6e4);function wt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function bt(t,e,n,r){return dC.apply(this,arguments)}function dC(){return(dC=m(function*(t,e,n,r,i={}){return XL(t,i,m(function*(){let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=_l(Object.assign({key:t.config.apiKey},o)).slice(1),u=yield t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),YL.fetch()(ZL(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))}))})).apply(this,arguments)}function XL(t,e,n){return hC.apply(this,arguments)}function hC(){return(hC=m(function*(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Zne),e);try{const i=new ere(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=yield s.json();if("needConfirmation"in o)throw Rl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===u)throw Rl(t,"credential-already-in-use",o);if("EMAIL_EXISTS"===u)throw Rl(t,"email-already-in-use",o);if("USER_DISABLED"===u)throw Rl(t,"user-disabled",o);const l=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qL(t,l,c);bn(t,l)}}catch(i){if(i instanceof ir)throw i;bn(t,"network-request-failed")}})).apply(this,arguments)}function Ti(t,e,n,r){return fC.apply(this,arguments)}function fC(){return(fC=m(function*(t,e,n,r,i={}){const s=yield bt(t,e,n,r,i);return"mfaPendingCredential"in s&&bn(t,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function ZL(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?lC(t.config,i):`${t.config.apiScheme}://${i}`}class ere{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Br(this.auth,"network-request-failed")),Jne.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Br(t,e,r);return i.customData._tokenResponse=n,i}function pC(){return(pC=m(function*(t,e){return bt(t,"POST","/v1/accounts:delete",e)})).apply(this,arguments)}function rre(t,e){return mC.apply(this,arguments)}function mC(){return(mC=m(function*(t,e){return bt(t,"POST","/v1/accounts:lookup",e)})).apply(this,arguments)}function Nl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function _C(){return(_C=m(function*(t,e=!1){const n=vt(t),r=yield n.getIdToken(e),i=jp(r);b(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Nl(yC(i.auth_time)),issuedAtTime:Nl(yC(i.iat)),expirationTime:Nl(yC(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})).apply(this,arguments)}function yC(t){return 1e3*Number(t)}function jp(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return $p("JWT malformed, contained fewer than 3 sections"),null;try{const i=yp(n);return i?JSON.parse(i):($p("Failed to decode base64 JWT payload"),null)}catch(i){return $p("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Di(t,e){return vC.apply(this,arguments)}function vC(){return(vC=m(function*(t,e,n=!1){if(n)return e;try{return yield e}catch(r){throw r instanceof ir&&ore(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})).apply(this,arguments)}function ore({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}class are{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var e=this;return m(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class JL{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kl(t){return wC.apply(this,arguments)}function wC(){return(wC=m(function*(t){var e;const n=t.auth,r=yield t.getIdToken(),i=yield Di(t,rre(n,{idToken:r}));b(i?.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=null!==(e=s.providerUserInfo)&&void 0!==e&&e.length?lre(s.providerUserInfo):[],a=cre(t.providerData,o),l=!!t.isAnonymous&&!(t.email&&s.passwordHash||a?.length),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new JL(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})).apply(this,arguments)}function IC(){return(IC=m(function*(t){const e=vt(t);yield kl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})).apply(this,arguments)}function cre(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lre(t){return t.map(e=>{var{providerId:n}=e,r=MA(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function EC(){return(EC=m(function*(t,e){const n=yield XL(t,{},m(function*(){const r=_l({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ZL(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YL.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Ml{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(typeof e.idToken<"u","internal-error"),b(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function sre(t){const e=jp(t);return b(e,"internal-error"),b(typeof e.exp<"u","internal-error"),b(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var r=this;return m(function*(){return b(!r.accessToken||r.refreshToken,e,"user-token-expired"),n||!r.accessToken||r.isExpired?r.refreshToken?(yield r.refresh(e,r.refreshToken),r.accessToken):null:r.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:s,expiresIn:o}=yield function dre(t,e){return EC.apply(this,arguments)}(e,n);r.updateTokensAndExpiration(i,s,Number(o))})()}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ml;return r&&(b("string"==typeof r,"internal-error",{appName:e}),o.refreshToken=r),i&&(b("string"==typeof i,"internal-error",{appName:e}),o.accessToken=i),s&&(b("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ml,this.toJSON())}_performRefresh(){return $r("not implemented")}}function Zi(t,e){b("string"==typeof t||typeof t>"u","internal-error",{appName:e})}class uo{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=MA(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new are(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new JL(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return m(function*(){const r=yield Di(n,n.stsTokenManager.getToken(n.auth,e));return b(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(e){return function ire(t){return _C.apply(this,arguments)}(this,e)}reload(){return function ure(t){return IC.apply(this,arguments)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new uo(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var r=this;return m(function*(){let i=!1;e.idToken&&e.idToken!==r.stsTokenManager.accessToken&&(r.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield kl(r)),yield r.auth._persistUserIfCurrent(r),i&&r.auth._notifyListenersIfCurrent(r)})()}delete(){var e=this;return m(function*(){const n=yield e.getIdToken();return yield Di(e,function tre(t,e){return pC.apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,c,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,_=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,I=null!==(c=n.createdAt)&&void 0!==c?c:void 0,E=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:N,isAnonymous:U,providerData:B,stsTokenManager:ut}=n;b(y&&ut,e,"internal-error");const qo=Ml.fromJSON(this.name,ut);b("string"==typeof y,e,"internal-error"),Zi(d,e.name),Zi(h,e.name),b("boolean"==typeof N,e,"internal-error"),b("boolean"==typeof U,e,"internal-error"),Zi(f,e.name),Zi(p,e.name),Zi(g,e.name),Zi(_,e.name),Zi(I,e.name),Zi(E,e.name);const IA=new uo({uid:y,auth:e,email:h,emailVerified:N,displayName:d,isAnonymous:U,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:qo,createdAt:I,lastLoginAt:E});return B&&Array.isArray(B)&&(IA.providerData=B.map(Lpe=>Object.assign({},Lpe))),_&&(IA._redirectEventId=_),IA}static _fromIdTokenResponse(e,n,r=!1){return m(function*(){const i=new Ml;i.updateFromServerResponse(n);const s=new uo({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield kl(s),s})()}}const eU=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})();function Hp(t,e,n){return`firebase:${t}:${e}:${n}`}class nu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Hp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return m(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?uo._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return m(function*(){if(n.persistence===e)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return m(function*(){if(!n.length)return new nu(Ci(eU),e,r);const i=(yield Promise.all(n.map(function(){var c=m(function*(l){if(yield l._isAvailable())return l});return function(l){return c.apply(this,arguments)}}()))).filter(c=>c);let s=i[0]||Ci(eU);const o=Hp(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const l=yield c._get(o);if(l){const d=uo._fromJSON(e,l);c!==s&&(a=d),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return s._shouldAllowMigration&&u.length?(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(function(){var c=m(function*(l){if(l!==s)try{yield l._remove(o)}catch{}});return function(l){return c.apply(this,arguments)}}())),new nu(s,e,r)):new nu(s,e,r)})()}}function tU(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oU(e))return"Blackberry";if(aU(e))return"Webos";if(CC(e))return"Safari";if((e.includes("chrome/")||rU(e))&&!e.includes("edge/"))return"Chrome";if(sU(e))return"Android";{const r=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function nU(t=Dt()){return/firefox\//i.test(t)}function CC(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rU(t=Dt()){return/crios\//i.test(t)}function iU(t=Dt()){return/iemobile/i.test(t)}function sU(t=Dt()){return/android/i.test(t)}function oU(t=Dt()){return/blackberry/i.test(t)}function aU(t=Dt()){return/webos/i.test(t)}function Gp(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uU(t=Dt()){return Gp(t)||sU(t)||aU(t)||oU(t)||/windows phone/i.test(t)||iU(t)}function cU(t,e=[]){let n;switch(t){case"Browser":n=tU(Dt());break;case"Worker":n=`${tU(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${r}`}class gre{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{o(e(s))}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return m(function*(){if(n.auth.currentUser===e)return;const r=[];try{for(const i of n.queue)yield i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})()}}class mre{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lU(this),this.idTokenSubscription=new lU(this),this.beforeStateQueue=new gre(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WL,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var r=this;return n&&(this._popupRedirectResolver=Ci(n)),this._initializationPromise=this.queue(m(function*(){var i,s;if(!r._deleted&&(r.persistenceManager=yield nu.create(r,e),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(s=r.currentUser)||void 0===s?void 0:s.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return m(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,u=s?._redirectEventId,c=yield n.tryRedirectSignIn(e);(!a||a===u)&&c?.user&&(s=c.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(a){s=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return b(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(e){var n=this;return m(function*(){try{yield kl(e)}catch(r){if("auth/network-request-failed"!==r?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function Xne(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}()}_delete(){var e=this;return m(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return m(function*(){const r=e?vt(e):null;return r&&b(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(e,n=!1){var r=this;return m(function*(){if(!r._deleted)return e&&b(r.tenantId===e.tenantId,r,"tenant-id-mismatch"),n||(yield r.beforeStateQueue.runMiddleware(e)),r.queue(m(function*(){yield r.directlySetCurrentUser(e),r.notifyAuthListeners()}))})()}signOut(){var e=this;return m(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(Ci(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Vr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===e?i.removeCurrentUser():i.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=e&&Ci(e)||n._popupRedirectResolver;b(r,n,"argument-error"),n.redirectPersistenceManager=yield nu.create(n,[Ci(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===e?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return m(function*(){if(e===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return b(o,this,"internal-error"),o.then(()=>s(this.currentUser)),"function"==typeof n?e.addObserver(n,r,i):e.addObserver(n)}directlySetCurrentUser(e){var n=this;return m(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return m(function*(){var n;const r={"X-Client-Version":e.clientVersion};e.app.options.appId&&(r["X-Firebase-gmpid"]=e.app.options.appId);const i=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Sn(t){return vt(t)}class lU{constructor(e){this.auth=e,this.observer=null,this.addObserver=function YX(t,e){const n=new XX(t,e);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function dU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function hU(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}class wre{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,n){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}function bi(t,e){return FC.apply(this,arguments)}function FC(){return(FC=m(function*(t,e){return Ti(t,"POST","/v1/accounts:signInWithIdp",wt(t,e))})).apply(this,arguments)}class Ji{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Lre extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return m(function*(){const s=yield uo._fromIdTokenResponse(e,r,i),o=_U(r);return new or({user:s,providerId:o,_tokenResponse:r,operationType:n})})()}static _forOperation(e,n,r){return m(function*(){yield e._updateTokensIfNecessary(r,!0);const i=_U(r);return new or({user:e,providerId:i,_tokenResponse:r,operationType:n})})()}}function _U(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}class Kp extends ir{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kp.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kp(e,n,r,i)}}function yU(t,e,n,r){return("reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw"auth/multi-factor-auth-required"===s.code?Kp._fromErrorAndOperation(t,s,e,r):s})}function WC(t,e){return zC.apply(this,arguments)}function zC(){return(zC=m(function*(t,e,n=!1){const r=yield Di(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return or._forOperation(t,"link",r)})).apply(this,arguments)}function KC(){return(KC=m(function*(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=yield Di(t,yU(r,i,e,t),n);b(s.idToken,r,"internal-error");const o=jp(s.idToken);b(o,r,"internal-error");const{sub:a}=o;return b(t.uid===a,r,"user-mismatch"),or._forOperation(t,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&bn(r,"user-mismatch"),s}})).apply(this,arguments)}function QC(){return(QC=m(function*(t,e,n=!1){const r="signIn",i=yield yU(t,r,e),s=yield or._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})).apply(this,arguments)}const Xp="__sak";class CU{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xp,"1"),this.storage.removeItem(Xp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const oie=(()=>{class t extends CU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rie(){const t=Dt();return CC(t)||Gp(t)}()&&function pre(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=uU(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);!function fre(){return function HX(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()&&10===document.documentMode}()||o===n.newValue||n.newValue===n.oldValue?s():setTimeout(s,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,s=this;return m(function*(){yield i().call(s,n,r),s.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return m(function*(){const s=yield r().call(i,n);return i.localCache[n]=JSON.stringify(s),s})()}_remove(n){var r=()=>super._remove,i=this;return m(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return t.type="LOCAL",t})(),TU=(()=>{class t extends CU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})();let uie=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;const i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return m(function*(){const i=n,{eventId:s,eventType:o,data:a}=i.data,u=r.handlersMap[o];if(!u?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const c=Array.from(u).map(function(){var d=m(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function aie(t){return Promise.all(t.map(function(){var e=m(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return e.apply(this,arguments)}}()))}(c);i.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:l})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return t.receivers=[],t})();function TT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(10*Math.random());return t+n}class cie{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){var i=this;return m(function*(){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((u,c)=>{const l=TT("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(f.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"))}}},i.handlers.add(a),s.port1.addEventListener("message",a.onMessage),i.target.postMessage({eventType:e,eventId:l,data:n},[s.port2])}).finally(()=>{a&&i.removeMessageHandler(a)})})()}}function It(){return window}function DT(){return typeof It().WorkerGlobalScope<"u"&&"function"==typeof It().importScripts}function bT(){return(bT=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const DU="firebaseLocalStorageDb",Zp="firebaseLocalStorage",bU="fbase_key";class Ll{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Jp(t,e){return t.transaction([Zp],e?"readwrite":"readonly").objectStore(Zp)}function ST(){const t=indexedDB.open(DU,1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Zp,{keyPath:bU})}catch(i){n(i)}}),t.addEventListener("success",m(function*(){const r=t.result;r.objectStoreNames.contains(Zp)?e(r):(r.close(),yield function gie(){const t=indexedDB.deleteDatabase(DU);return new Ll(t).toPromise()}(),e(yield ST()))}))})}function SU(t,e,n){return AT.apply(this,arguments)}function AT(){return(AT=m(function*(t,e,n){const r=Jp(t,!0).put({[bU]:e,value:n});return new Ll(r).toPromise()})).apply(this,arguments)}function xT(){return(xT=m(function*(t,e){const n=Jp(t,!1).get(e),r=yield new Ll(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function AU(t,e){const n=Jp(t,!0).delete(e);return new Ll(n).toPromise()}const vie=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return m(function*(){return n.db||(n.db=yield ST()),n.db})()}_withRetries(n){var r=this;return m(function*(){let i=0;for(;;)try{const s=yield r._openDb();return yield n(s)}catch(s){if(i++>3)throw s;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return m(function*(){return DT()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return m(function*(){n.receiver=uie._getInstance(function fie(){return DT()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=m(function*(i,s){return{keyProcessed:(yield n._poll()).includes(s.key)}});return function(i,s){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=m(function*(i,s){return["keyChanged"]});return function(i,s){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return m(function*(){var r,i;if(n.activeServiceWorker=yield function die(){return bT.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new cie(n.activeServiceWorker);const s=yield n.sender._send("ping",{},800);s&&null!==(r=s[0])&&void 0!==r&&r.fulfilled&&null!==(i=s[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return m(function*(){if(r.sender&&r.activeServiceWorker&&function hie(){var t;return(null===(t=navigator?.serviceWorker)||void 0===t?void 0:t.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const n=yield ST();return yield SU(n,Xp,"1"),yield AU(n,Xp),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return m(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(s=>SU(s,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return m(function*(){const i=yield r._withRetries(s=>function mie(t,e){return xT.apply(this,arguments)}(s,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(i=>AU(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return m(function*(){const r=yield n._withRetries(o=>{const a=Jp(o,!1).getAll();return new Ll(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],s=new Set;for(const{fbase_key:o,value:a}of r)s.add(o),JSON.stringify(n.localCache[o])!==JSON.stringify(a)&&(n.notifyListeners(o,a),i.push(o));for(const o of Object.keys(n.localCache))n.localCache[o]&&!s.has(o)&&(n.notifyListeners(o,null),i.push(o));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const s of Array.from(i))s(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return t.type="LOCAL",t})();function RU(t){return`__${t}${Math.floor(1e6*Math.random())}`}function lo(t,e){return e?Ci(e):(b(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}RU("rcb"),new xl(3e4,6e4);class VT extends wre{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Fie(t){return function IU(t,e){return QC.apply(this,arguments)}(t.auth,new VT(t),t.bypassAuthState)}function Lie(t){const{auth:e,user:n}=t;return b(n,e,"internal-error"),function wU(t,e){return KC.apply(this,arguments)}(n,new VT(t),t.bypassAuthState)}function Uie(t){return BT.apply(this,arguments)}function BT(){return(BT=m(function*(t){const{auth:e,user:n}=t;return b(n,e,"internal-error"),WC(n,new VT(t),t.bypassAuthState)})).apply(this,arguments)}class Vie{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var e=this;return new Promise(function(){var n=m(function*(r,i){e.pendingPromise={resolve:r,reject:i};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(s){e.reject(s)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(e){var n=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:u}=e;if(a)return void n.reject(a);const c={auth:n.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(u)(c))}catch(l){n.reject(l)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Fie;case"linkViaPopup":case"linkViaRedirect":return Uie;case"reauthViaPopup":case"reauthViaRedirect":return Lie;default:bn(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new xl(2e3,1e4);const Ul=new Map;class $ie extends Vie{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var e=()=>super.execute,n=this;return m(function*(){let r=Ul.get(n.auth._key());if(!r){try{const s=(yield function jie(t,e){return WT.apply(this,arguments)}(n.resolver,n.auth))?yield e().call(n):null;r=()=>Promise.resolve(s)}catch(i){r=()=>Promise.reject(i)}Ul.set(n.auth._key(),r)}return n.bypassAuthState||Ul.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(e){var n=()=>super.onAuthEvent,r=this;return m(function*(){if("signInViaRedirect"===e.type)return n().call(r,e);if("unknown"!==e.type){if(e.eventId){const i=yield r.auth._redirectUserForId(e.eventId);if(i)return r.user=i,n().call(r,e);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function WT(){return(WT=m(function*(t,e){const n=MU(e),r=kU(t);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function Hie(t,e){Ul.set(t._key(),e)}function kU(t){return Ci(t._redirectPersistence)}function MU(t){return Hp("pendingRedirect",t.config.apiKey,t.name)}function PU(t,e){return ZT.apply(this,arguments)}function ZT(){return(ZT=m(function*(t,e,n=!1){const r=Sn(t),i=lo(r,e),o=yield new $ie(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})).apply(this,arguments)}class Kie{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function Qie(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LU(t);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LU(e)){const i=(null===(r=e.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Br(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=null===n.eventId||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(FU(e))}saveEventToCache(e){this.cachedEventUids.add(FU(e)),this.lastProcessedEventTime=Date.now()}}function FU(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LU({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===e?.code}function Yie(t){return eD.apply(this,arguments)}function eD(){return(eD=m(function*(t,e={}){return bt(t,"GET","/v1/projects",e)})).apply(this,arguments)}const Xie=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zie=/^https?/;function tD(){return(tD=m(function*(t){if(t.config.emulator)return;const{authorizedDomains:e}=yield Yie(t);for(const n of e)try{if(ese(n))return}catch{}bn(t,"unauthorized-domain")})).apply(this,arguments)}function ese(t){const e=Al(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return""===o.hostname&&""===r?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&o.hostname===r}if(!Zie.test(n))return!1;if(Xie.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const tse=new xl(3e4,6e4);function UU(){const t=It().___jsl;if(t?.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}let tg=null;function rse(t){return tg=tg||function nse(t){return new Promise((e,n)=>{var r,i,s;function o(){UU(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{UU(),n(Br(t,"network-request-failed"))},timeout:tse.get()})}if(null!==(i=null===(r=It().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)e(gapi.iframes.getContext());else{if(null===(s=It().gapi)||void 0===s||!s.load){const a=RU("iframefcb");return It()[a]=()=>{gapi.load?o():n(Br(t,"network-request-failed"))},function xU(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Br("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",function Cie(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(u=>n(u))}o()}}).catch(e=>{throw tg=null,e})}(t),tg}const ise=new xl(5e3,15e3),ase={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},use=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cse(t){const e=t.config;b(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lC(e,"emulator/auth/iframe"):`https://${t.config.authDomain}/__/auth/iframe`,r={apiKey:e.apiKey,appName:t.name,v:to},i=use.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${_l(r).slice(1)}`}function nD(){return nD=m(function*(t){const e=yield rse(t),n=It().gapi;return b(n,t,"internal-error"),e.open({where:document.body,url:cse(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ase,dontclear:!0},r=>new Promise(function(){var i=m(function*(s,o){yield r.restyle({setHideOnLeave:!1});const a=Br(t,"network-request-failed"),u=It().setTimeout(()=>{o(a)},ise.get());function c(){It().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{o(a)})});return function(s,o){return i.apply(this,arguments)}}()))}),nD.apply(this,arguments)}const dse={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class VU{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BU(t,e,n,r,i,s){b(t.config.authDomain,t,"auth-domain-config-required"),b(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:to,eventId:i};if(e instanceof Ji){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",qw(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(s||{}))o[u]=c}if(e instanceof Lre){const u=e.getScopes().filter(c=>""!==c);u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];return`${function wse({config:t}){return t.emulator?lC(t,"emulator/auth/handler"):`https://${t.authDomain}/__/auth/handler`}(t)}?${_l(a).slice(1)}`}const rD="webStorageSupport",Ese=class Ise{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TU,this._completeRedirectFn=PU,this._overrideRedirectResult=Hie}_openPopup(e,n,r,i){var s=this;return m(function*(){var o;Xi(null===(o=s.eventManagers[e._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()");const a=BU(e,n,r,Al(),i);return function mse(t,e,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},dse),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Dt().toLowerCase();n&&(a=rU(c)?"_blank":n),nU(c)&&(e=e||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function hre(t=Dt()){var e;return Gp(t)&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==a)return function _se(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(e||"",a),new VU(null);const d=window.open(e||"",a,l);b(d,t,"popup-blocked");try{d.focus()}catch{}return new VU(d)}(e,a,TT())})()}_openRedirect(e,n,r,i){var s=this;return m(function*(){return yield s._originValidation(e),function lie(t){It().location.href=t}(BU(e,n,r,Al(),i)),new Promise(()=>{})})()}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){var n=this;return m(function*(){const r=yield function lse(t){return nD.apply(this,arguments)}(e),i=new Kie(e);return r.register("authEvent",s=>(b(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[e._key()]={manager:i},n.iframes[e._key()]=r,i})()}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rD,{type:rD},i=>{var s;const o=null===(s=i?.[0])||void 0===s?void 0:s[rD];void 0!==o&&n(!!o),bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function Jie(t){return tD.apply(this,arguments)}(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uU()||CC()||Gp()}};var jU="@firebase/auth";class Cse{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Sse=sF("authIdTokenMaxAge")||300;let GU=null;const Ase=t=>function(){var e=m(function*(n){const r=n&&(yield n.getIdTokenResult()),i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Sse)return;const s=r?.token;GU!==s&&(GU=s,yield fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))});return function(n){return e.apply(this,arguments)}}();function xse(t=yl()){const e=_i(t,"auth");if(e.isInitialized())return e.getImmediate();const n=function Kne(t,e){const n=_i(t,"auth");if(n.isInitialized()){const i=n.getImmediate();if(ml(n.getOptions(),e??{}))return i;bn(i,"already-initialized")}return n.initialize({options:e})}(t,{popupRedirectResolver:Ese,persistence:[vie,oie,TU]}),r=sF("authTokenSyncURL");if(r){const s=Ase(r);(function Zre(t,e,n){vt(t).beforeAuthStateChanged(e,n)})(n,s,()=>s(n.currentUser)),function Xre(t,e,n,r){vt(t).onIdTokenChanged(e,n,r)}(n,o=>s(o))}const i=rF("auth");return i&&function _re(t,e,n){const r=Sn(t);b(r._canInitEmulator,r,"emulator-config-failed"),b(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=dU(e),{host:o,port:a}=function yre(t){const e=dU(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:hU(r.substr(s.length+1))}}{const[s,o]=r.split(":");return{host:s,port:hU(o)}}}(e);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function vre(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}()}(n,`http://${i}`),n}function Rse(t){return new Be(function(e){var n=function Jre(t,e,n,r){return vt(t).onAuthStateChanged(e,n,r)}(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}!function Dse(t){Jt(new Vt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((a,u)=>{b(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),b(!o?.includes(":"),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cU(t)},l=new mre(a,u,c);return function Qne(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ci);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}(l,n),l})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jt(new Vt("auth-internal",e=>{const n=Sn(e.getProvider("auth").getImmediate());return new Cse(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(jU,"0.21.1",function Tse(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(t)),Se(jU,"0.21.1","esm2017")}("Browser");class ng{constructor(e){return e}}class iD{constructor(){return Cl("auth")}}const sD=new j("angularfire2.auth-instances");function Mse(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new ng(r)}}const Pse={provide:iD,deps:[[new Qe,sD]]},Ose={provide:ng,useFactory:function kse(t,e){const n=El("auth",t,e);return n&&new ng(n)},deps:[[new Qe,sD],Yi]};let Fse=(()=>{class t{constructor(){Se("angularfire",Qi.full,"auth")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({providers:[Ose,Pse]}),t})();const Use=sr(Rse,!0),Vse=sr(xse,!0);var L,Bse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Si={},oD=oD||{},Q=Bse||self;function rg(){}function ig(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vl(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var aD="closure_uid_"+(1e9*Math.random()>>>0),jse=0;function Hse(t,e,n){return t.call.apply(t.bind,arguments)}function Gse(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function en(t,e,n){return(en=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Hse:Gse).apply(null,arguments)}function sg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Ht(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function es(){this.s=this.s,this.o=this.o}es.prototype.s=!1,es.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function $se(t){Object.prototype.hasOwnProperty.call(t,aD)&&t[aD]||(t[aD]=++jse)}(this)},es.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const zU=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function uD(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function qU(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(ig(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function tn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}tn.prototype.h=function(){this.defaultPrevented=!0};var zse=function(){if(!Q.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Q.addEventListener("test",rg,e),Q.removeEventListener("test",rg,e)}catch{}return t}();function og(t){return/^[\s\xa0]*$/.test(t)}var KU=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function cD(t,e){return t<e?-1:t>e?1:0}function ag(){var t=Q.navigator;return t&&(t=t.userAgent)?t:""}function jr(t){return-1!=ag().indexOf(t)}function lD(t){return lD[" "](t),t}lD[" "]=rg;var ug,t,Kse=jr("Opera"),ru=jr("Trident")||jr("MSIE"),QU=jr("Edge"),dD=QU||ru,YU=jr("Gecko")&&!(-1!=ag().toLowerCase().indexOf("webkit")&&!jr("Edge"))&&!(jr("Trident")||jr("MSIE"))&&!jr("Edge"),Qse=-1!=ag().toLowerCase().indexOf("webkit")&&!jr("Edge");function XU(){var t=Q.document;return t?t.documentMode:void 0}e:{var hD="",fD=(t=ag(),YU?/rv:([^\);]+)(\)|;)/.exec(t):QU?/Edge\/([\d\.]+)/.exec(t):ru?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Qse?/WebKit\/(\S+)/.exec(t):Kse?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(fD&&(hD=fD?fD[1]:""),ru){var pD=XU();if(null!=pD&&pD>parseFloat(hD)){ug=String(pD);break e}}ug=hD}var Yse={};var Zse=Q.document&&ru&&(XU()||parseInt(ug,10))||void 0;function Bl(t,e){if(tn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(YU){e:{try{lD(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jse[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Bl.X.h.call(this)}}Ht(Bl,tn);var Jse={2:"touch",3:"pen",4:"mouse"};Bl.prototype.h=function(){Bl.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var $l="closure_listenable_"+(1e6*Math.random()|0),eoe=0;function toe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++eoe,this.ba=this.ea=!1}function cg(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function mD(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function JU(t){const e={};for(const n in t)e[n]=t[n];return e}const eV="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tV(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<eV.length;s++)n=eV[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function lg(t){this.src=t,this.g={},this.h=0}function _D(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=zU(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(cg(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function yD(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}lg.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var o=yD(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):((e=new toe(e,this.src,s,!!r,i)).ea=n,t.push(e)),e};var vD="closure_lm_"+(1e6*Math.random()|0),wD={};function nV(t,e,n,r,i){if(r&&r.once)return iV(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)nV(t,e[s],n,r,i);return null}return n=TD(n),t&&t[$l]?t.N(e,n,Vl(r)?!!r.capture:!!r,i):rV(t,e,n,!1,r,i)}function rV(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Vl(i)?!!i.capture:!!i,a=ED(t);if(a||(t[vD]=a=new lg(t)),(n=a.add(e,n,r,o,s)).proxy)return n;if(r=function noe(){const e=roe;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zse||(i=o),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(oV(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function iV(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)iV(t,e[s],n,r,i);return null}return n=TD(n),t&&t[$l]?t.O(e,n,Vl(r)?!!r.capture:!!r,i):rV(t,e,n,!0,r,i)}function sV(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)sV(t,e[s],n,r,i);else r=Vl(r)?!!r.capture:!!r,n=TD(n),t&&t[$l]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=yD(s=t.g[e],n,r,i))&&(cg(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=ED(t))&&(e=t.g[e.toString()],t=-1,e&&(t=yD(e,n,r,i)),(n=-1<t?e[t]:null)&&ID(n))}function ID(t){if("number"!=typeof t&&t&&!t.ba){var e=t.src;if(e&&e[$l])_D(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(oV(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ED(e))?(_D(n,t),0==n.h&&(n.src=null,e[vD]=null)):cg(t)}}}function oV(t){return t in wD?wD[t]:wD[t]="on"+t}function roe(t,e){if(t.ba)t=!0;else{e=new Bl(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&ID(t),t=n.call(r,e)}return t}function ED(t){return(t=t[vD])instanceof lg?t:null}var CD="__closure_events_fn_"+(1e9*Math.random()>>>0);function TD(t){return"function"==typeof t?t:(t[CD]||(t[CD]=function(e){return t.handleEvent(e)}),t[CD])}function St(){es.call(this),this.i=new lg(this),this.P=this,this.I=null}function Gt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new tn(e,t);else if(e instanceof tn)e.target=e.target||t;else{var i=e;tV(e=new tn(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=dg(o,r,!0,e)&&i}if(i=dg(o=e.g=t,r,!0,e)&&i,i=dg(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=dg(o=e.g=n[s],r,!1,e)&&i}function dg(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var a=o.listener,u=o.ha||o.src;o.ea&&_D(t.i,o),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Ht(St,es),St.prototype[$l]=!0,St.prototype.removeEventListener=function(t,e,n,r){sV(this,t,e,n,r)},St.prototype.M=function(){if(St.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cg(n[r]);delete t.g[e],t.h--}}this.I=null},St.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},St.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var DD=Q.JSON.stringify;function ioe(){var t=cV;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var bD,aV=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new ooe,t=>t.reset());class ooe{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function aoe(t){Q.setTimeout(()=>{throw t},0)}function uV(t,e){bD||function uoe(){var t=Q.Promise.resolve(void 0);bD=function(){t.then(coe)}}(),SD||(bD(),SD=!0),cV.add(t,e)}var SD=!1,cV=new class soe{constructor(){this.h=this.g=null}add(e,n){const r=aV.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function coe(){for(var t;t=ioe();){try{t.h.call(t.g)}catch(n){aoe(n)}var e=aV;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}SD=!1}function hg(t,e){St.call(this),this.h=t||1,this.g=e||Q,this.j=en(this.lb,this),this.l=Date.now()}function AD(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}function xD(t,e,n){if("function"==typeof t)n&&(t=en(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=en(t.handleEvent,t)}return 2147483647<Number(e)?-1:Q.setTimeout(t,e||0)}function lV(t){t.g=xD(()=>{t.g=null,t.i&&(t.i=!1,lV(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Ht(hg,St),(L=hg.prototype).ca=!1,L.R=null,L.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Gt(this,"tick"),this.ca&&(AD(this),this.start()))}},L.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},L.M=function(){hg.X.M.call(this),AD(this),delete this.g};class loe extends es{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:lV(this)}M(){super.M(),this.g&&(Q.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jl(t){es.call(this),this.h=t,this.g={}}Ht(jl,es);var dV=[];function hV(t,e,n,r){Array.isArray(n)||(n&&(dV[0]=n.toString()),n=dV);for(var i=0;i<n.length;i++){var s=nV(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function fV(t){mD(t.g,function(e,n){this.g.hasOwnProperty(n)&&ID(e)},t),t.g={}}function fg(){this.g=!0}function iu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function poe(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return DD(n)}catch{return e}}(t,n)+(r?" "+r:"")})}jl.prototype.M=function(){jl.X.M.call(this),fV(this)},jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fg.prototype.Aa=function(){this.g=!1},fg.prototype.info=function(){};var ho={},pV=null;function pg(){return pV=pV||new St}function gV(t){tn.call(this,ho.Pa,t)}function Hl(t){const e=pg();Gt(e,new gV(e))}function mV(t,e){tn.call(this,ho.STAT_EVENT,t),this.stat=e}function fn(t){const e=pg();Gt(e,new mV(e,t))}function _V(t,e){tn.call(this,ho.Qa,t),this.size=e}function Gl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Q.setTimeout(function(){t()},e)}ho.Pa="serverreachability",Ht(gV,tn),ho.STAT_EVENT="statevent",Ht(mV,tn),ho.Qa="timingevent",Ht(_V,tn);var gg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},yV={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function RD(){}function wV(){}RD.prototype.h=null;var MD,Wl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ND(){tn.call(this,"d")}function kD(){tn.call(this,"c")}function mg(){}function zl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new jl(this),this.O=goe,this.T=new hg(t=dD?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new IV}function IV(){this.i=null,this.g="",this.h=!1}Ht(ND,tn),Ht(kD,tn),Ht(mg,RD),mg.prototype.g=function(){return new XMLHttpRequest},mg.prototype.i=function(){return{}},MD=new mg;var goe=45e3,PD={},_g={};function OD(t,e,n){t.K=1,t.v=Ig(Ai(e)),t.s=n,t.P=!0,EV(t,null)}function EV(t,e){t.F=Date.now(),ql(t),t.A=Ai(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),kV(n.i,"t",r),t.C=0,n=t.l.H,t.h=new IV,t.g=n2(t.l,n?e:null,!t.s),0<t.N&&(t.L=new loe(en(t.La,t,t.g),t.N)),hV(t.S,t.g,"readystatechange",t.ib),e=t.H?JU(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Hl(),function doe(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+o})}(t.j,t.u,t.A,t.m,t.U,t.s)}function CV(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Da}function TV(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=moe(t,n),i==_g){4==e&&(t.o=4,fn(14),r=!1),iu(t.j,t.m,null,"[Incomplete Response]");break}if(i==PD){t.o=4,fn(15),iu(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}iu(t.j,t.m,i,null),FD(t,i)}CV(t)&&i!=_g&&i!=PD&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,fn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,(e=t.l).g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),GD(e),e.K=!0,fn(11))):(iu(t.j,t.m,n,"[Invalid Chunked Response]"),fo(t),Kl(t))}function moe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?_g:(n=Number(e.substring(n,r)),isNaN(n)?PD:(r+=1)+n>e.length?_g:(e=e.substr(r,n),t.C=r+n,e))}function ql(t){t.V=Date.now()+t.O,DV(t,t.O)}function DV(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Gl(en(t.gb,t),e)}function yg(t){t.B&&(Q.clearTimeout(t.B),t.B=null)}function Kl(t){0==t.l.G||t.I||ZV(t.l,t)}function fo(t){yg(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,AD(t.T),fV(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function FD(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||LD(n.h,t)))if(!t.J&&LD(n.h,t)&&3==n.G){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;Sg(n),Dg(n)}HD(n),fn(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Gl(en(n.cb,n),6e3));if(1>=OV(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else go(n,11)}else if((t.J||n.g==t)&&Sg(n),!og(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.I=c[1],n.ka=c[2];const l=c[3];null!=l&&(n.ma=l,n.j.info("VER="+n.ma));const d=c[4];null!=d&&(n.Ca=d,n.j.info("SVER="+n.Ca));const h=c[5];null!=h&&"number"==typeof h&&0<h&&(n.J=r=1.5*h,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=r.h;s.g||-1==p.indexOf("spdy")&&-1==p.indexOf("quic")&&-1==p.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(UD(s,s.h),s.h=null))}if(r.D){const g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(r.za=g,$e(r.F,r.D,g))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms"));var o=t;if((r=n).sa=t2(r,r.H?r.ka:null,r.V),o.J){FV(r.h,o);var a=o,u=r.J;u&&a.setTimeout(u),a.B&&(yg(a),ql(a)),r.g=o}else YV(r);0<n.i.length&&bg(n)}else"stop"!=c[0]&&"close"!=c[0]||go(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?go(n,7):jD(n):"noop"!=c[0]&&n.l&&n.l.wa(c),n.A=0)}Hl()}catch{}}function bV(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ig(t)||"string"==typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=function yoe(t){if(t.oa&&"function"==typeof t.oa)return t.oa();if(!t.W||"function"!=typeof t.W){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(ig(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}(t),r=function _oe(t){if(t.W&&"function"==typeof t.W)return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if("string"==typeof t)return t.split("");if(ig(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}(L=zl.prototype).setTimeout=function(t){this.O=t},L.ib=function(t){t=t.target;const e=this.L;e&&3==xi(t)?e.l():this.La(t)},L.La=function(t){try{if(t==this.g)e:{const l=xi(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>l)&&(3!=l||dD||this.g&&(this.h.h||this.g.fa()||GV(this.g)))){this.I||4!=l||7==e||Hl(),yg(this);var n=this.g.aa();this.Y=n;t:if(CV(this)){var r=GV(this.g);t="";var i=r.length,s=4==xi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){fo(this),Kl(this);var o="";break t}this.h.i=new Q.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==n,function hoe(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,l,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!og(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,fn(12),fo(this),Kl(this);break e}iu(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,FD(this,n)}this.P?(TV(this,l,o),dD&&this.i&&3==l&&(hV(this.S,this.T,"tick",this.hb),this.T.start())):(iu(this.j,this.m,o,null),FD(this,o)),4==l&&fo(this),this.i&&!this.I&&(4==l?ZV(this.l,this):(this.i=!1,ql(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,fn(12)):(this.o=0,fn(13)),fo(this),Kl(this)}}}catch{}},L.hb=function(){if(this.g){var t=xi(this.g),e=this.g.fa();this.C<e.length&&(yg(this),TV(this,t,e),this.i&&4!=t&&ql(this))}},L.cancel=function(){this.I=!0,fo(this)},L.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(function foe(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hl(),fn(17)),fo(this),this.o=2,Kl(this)):DV(this,this.V-t)};var SV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof po){this.h=void 0!==e?e:t.h,vg(this,t.j),this.s=t.s,this.g=t.g,wg(this,t.m),this.l=t.l,e=t.i;var n=new Xl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),AV(this,n),this.o=t.o}else t&&(n=String(t).match(SV))?(this.h=!!e,vg(this,n[1]||"",!0),this.s=Ql(n[2]||""),this.g=Ql(n[3]||"",!0),wg(this,n[4]),this.l=Ql(n[5]||"",!0),AV(this,n[6]||"",!0),this.o=Ql(n[7]||"")):(this.h=!!e,this.i=new Xl(null,this.h))}function Ai(t){return new po(t)}function vg(t,e,n){t.j=n?Ql(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function wg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function AV(t,e,n){e instanceof Xl?(t.i=e,function Doe(t,e){e&&!t.j&&(ts(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(RV(this,r),kV(this,i,n))},t)),t.j=e}(t.i,t.h)):(n||(e=Yl(e,Coe)),t.i=new Xl(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function Ig(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ql(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yl(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,woe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function woe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}po.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Yl(e,xV,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Yl(e,xV,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(Yl(n,"/"==n.charAt(0)?Eoe:Ioe,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Yl(n,Toe)),t.join("")};var xV=/[#\/\?@]/g,Ioe=/[#\?:]/g,Eoe=/[#\?]/g,Coe=/[#\?@]/g,Toe=/#/g;function Xl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ts(t){t.g||(t.g=new Map,t.h=0,t.i&&function voe(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function RV(t,e){ts(t),e=su(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function NV(t,e){return ts(t),e=su(t,e),t.g.has(e)}function kV(t,e,n){RV(t,e),0<n.length&&(t.i=null,t.g.set(su(t,e),uD(n)),t.h+=n.length)}function su(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function MV(t){this.l=t||Soe,t=Q.PerformanceNavigationTiming?0<(t=Q.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Q.g&&Q.g.Ga&&Q.g.Ga()&&Q.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(L=Xl.prototype).add=function(t,e){ts(this),this.i=null,t=su(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},L.forEach=function(t,e){ts(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)},L.oa=function(){ts(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n},L.W=function(t){ts(this);let e=[];if("string"==typeof t)NV(this,t)&&(e=e.concat(this.g.get(su(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},L.set=function(t,e){return ts(this),this.i=null,NV(this,t=su(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},L.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},L.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};var Soe=10;function PV(t){return!!t.h||!!t.g&&t.g.size>=t.j}function OV(t){return t.h?1:t.g?t.g.size:0}function LD(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function UD(t,e){t.g?t.g.add(e):t.h=e}function FV(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function LV(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return uD(t.i)}function VD(){}function Aoe(){this.g=new VD}function xoe(t,e,n){const r=n||"";try{bV(t,function(i,s){let o=i;Vl(i)&&(o=DD(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Eg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Zl(t){this.l=t.ac||null,this.j=t.jb||!1}function Cg(t,e){St.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=BD,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}MV.prototype.cancel=function(){if(this.i=LV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},VD.prototype.stringify=function(t){return Q.JSON.stringify(t,void 0)},VD.prototype.parse=function(t){return Q.JSON.parse(t,void 0)},Ht(Zl,RD),Zl.prototype.g=function(){return new Cg(this.l,this.j)},Zl.prototype.i=function(t){return function(){return t}}({}),Ht(Cg,St);var BD=0;function UV(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}function Jl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ed(t)}function ed(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(L=Cg.prototype).open=function(t,e){if(this.readyState!=BD)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ed(this)},L.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Q).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},L.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jl(this)),this.readyState=BD},L.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ed(this)),this.g&&(this.readyState=3,ed(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Q.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UV(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))},L.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Jl(this):ed(this),3==this.readyState&&UV(this)}},L.Va=function(t){this.g&&(this.response=this.responseText=t,Jl(this))},L.Ua=function(t){this.g&&(this.response=t,Jl(this))},L.ga=function(){this.g&&Jl(this)},L.setRequestHeader=function(t,e){this.v.append(t,e)},L.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},L.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Cg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Noe=Q.JSON.parse;function Xe(t){St.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=VV,this.K=this.L=!1}Ht(Xe,St);var VV="",koe=/^https?$/i,Moe=["POST","PUT"];function BV(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,$V(t),Tg(t)}function $V(t){t.D||(t.D=!0,Gt(t,"complete"),Gt(t,"error"))}function jV(t){if(t.h&&typeof oD<"u"&&(!t.C[1]||4!=xi(t)||2!=t.aa()))if(t.v&&4==xi(t))xD(t.Ha,0,t);else if(Gt(t,"readystatechange"),4==xi(t)){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===a){var i=String(t.H).match(SV)[1]||null;if(!i&&Q.self&&Q.self.location){var s=Q.self.location.protocol;i=s.substr(0,s.length-1)}r=!koe.test(i?i.toLowerCase():"")}n=r}if(n)Gt(t,"complete"),Gt(t,"success");else{t.m=6;try{var o=2<xi(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",$V(t)}}finally{Tg(t)}}}function Tg(t,e){if(t.g){HV(t);const n=t.g,r=t.C[0]?rg:null;t.g=null,t.C=null,e||Gt(t,"ready");try{n.onreadystatechange=r}catch{}}}function HV(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Q.clearTimeout(t.A),t.A=null)}function xi(t){return t.g?t.g.readyState:0}function GV(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case VV:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function WV(t){let e="";return mD(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function $D(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=WV(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$e(t,e,n))}function td(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zV(t){this.Ca=0,this.i=[],this.j=new fg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=td("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=td("baseRetryDelayMs",5e3,t),this.bb=td("retryDelaySeedMs",1e4,t),this.$a=td("forwardChannelMaxRetries",2,t),this.ta=td("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new MV(t&&t.concurrentRequestLimit),this.Fa=new Aoe,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function jD(t){if(qV(t),3==t.G){var e=t.U++,n=Ai(t.F);$e(n,"SID",t.I),$e(n,"RID",e),$e(n,"TYPE","terminate"),nd(t,n),(e=new zl(t,t.j,e,void 0)).K=2,e.v=Ig(Ai(n)),n=!1,Q.navigator&&Q.navigator.sendBeacon&&(n=Q.navigator.sendBeacon(e.v.toString(),"")),!n&&Q.Image&&((new Image).src=e.v,n=!0),n||(e.g=n2(e.l,null),e.g.da(e.v)),e.F=Date.now(),ql(e)}e2(t)}function Dg(t){t.g&&(GD(t),t.g.cancel(),t.g=null)}function qV(t){Dg(t),t.u&&(Q.clearTimeout(t.u),t.u=null),Sg(t),t.h.cancel(),t.m&&("number"==typeof t.m&&Q.clearTimeout(t.m),t.m=null)}function bg(t){PV(t.h)||t.m||(t.m=!0,uV(t.Ja,t),t.C=0)}function KV(t,e){var n;n=e?e.m:t.U++;const r=Ai(t.F);$e(r,"SID",t.I),$e(r,"RID",n),$e(r,"AID",t.T),nd(t,r),t.o&&t.s&&$D(r,t.o,t.s),n=new zl(t,t.j,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=QV(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),UD(t.h,n),OD(n,r,e)}function nd(t,e){t.ia&&mD(t.ia,function(n,r){$e(e,r,n)}),t.l&&bV({},function(n,r){$e(e,r,n)})}function QV(t,e,n){n=Math.min(t.i.length,n);var r=t.l?en(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let u=0;u<n;u++){let c=i[u].h;const l=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),a=!1;else try{xoe(l,o,"req"+c+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function YV(t){t.g||t.u||(t.Z=1,uV(t.Ia,t),t.A=0)}function HD(t){return!(t.g||t.u||3<=t.A||(t.Z++,t.u=Gl(en(t.Ia,t),JV(t,t.A)),t.A++,0))}function GD(t){null!=t.B&&(Q.clearTimeout(t.B),t.B=null)}function XV(t){t.g=new zl(t,t.j,"rpc",t.Z),null===t.o&&(t.g.H=t.s),t.g.N=0;var e=Ai(t.sa);$e(e,"RID","rpc"),$e(e,"SID",t.I),$e(e,"CI",t.L?"0":"1"),$e(e,"AID",t.T),$e(e,"TYPE","xmlhttp"),nd(t,e),t.o&&t.s&&$D(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Ig(Ai(e)),n.s=null,n.P=!0,EV(n,t)}function Sg(t){null!=t.v&&(Q.clearTimeout(t.v),t.v=null)}function ZV(t,e){var n=null;if(t.g==e){Sg(t),GD(t),t.g=null;var r=2}else{if(!LD(t.h,e))return;n=e.D,FV(t.h,e),r=1}if(0!=t.G)if(t.pa=e.Y,e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Gt(r=pg(),new _V(r,n)),bg(t)}else YV(t);else if(3==(i=e.o)||0==i&&0<t.pa||!(1==r&&function Ooe(t,e){return!(OV(t.h)>=t.h.j-(t.m?1:0)||(t.m?(t.i=e.D.concat(t.i),0):1==t.G||2==t.G||t.C>=(t.Za?0:t.$a)||(t.m=Gl(en(t.Ja,t,e),JV(t,t.C)),t.C++,0)))}(t,e)||2==r&&HD(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:go(t,5);break;case 4:go(t,10);break;case 3:go(t,6);break;default:go(t,2)}}function JV(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function go(t,e){if(t.j.info("Error code "+e),2==e){var n=null;t.l&&(n=null);var r=en(t.kb,t);n||(n=new po("//www.google.com/images/cleardot.gif"),Q.location&&"http"==Q.location.protocol||vg(n,"https"),Ig(n)),function Roe(t,e){const n=new fg;if(Q.Image){const r=new Image;r.onload=sg(Eg,n,r,"TestLoadImage: loaded",!0,e),r.onerror=sg(Eg,n,r,"TestLoadImage: error",!1,e),r.onabort=sg(Eg,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=sg(Eg,n,r,"TestLoadImage: timeout",!1,e),Q.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else fn(2);t.G=0,t.l&&t.l.va(e),e2(t),qV(t)}function e2(t){if(t.G=0,t.la=[],t.l){const e=LV(t.h);(0!=e.length||0!=t.i.length)&&(qU(t.la,e),qU(t.la,t.i),t.h.i.length=0,uD(t.i),t.i.length=0),t.l.ua()}}function t2(t,e,n){var r=n instanceof po?Ai(n):new po(n,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),wg(r,r.m);else{var i=Q.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new po(null,void 0);r&&vg(s,r),e&&(s.g=e),i&&wg(s,i),n&&(s.l=n),r=s}return e=t.za,(n=t.D)&&e&&$e(r,n,e),$e(r,"VER",t.ma),nd(t,r),r}function n2(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xe(n&&t.Da&&!t.ra?new Zl({jb:!0}):t.ra)).Ka(t.H),e}function r2(){}function Ag(){if(ru&&!(10<=Number(Zse)))throw Error("Environmental error: no available transport.")}function jn(t,e){St.call(this),this.g=new zV(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!og(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!og(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new ou(this)}function i2(t){ND.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function s2(){kD.call(this),this.status=1}function ou(t){this.g=t}(L=Xe.prototype).Ka=function(t){this.L=t},L.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():MD.g(),this.C=function vV(t){return t.h||(t.h=t.i())}(this.u?this.u:MD),this.g.onreadystatechange=en(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void BV(this,s)}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())n.set(s,r.get(s))}r=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),i=Q.FormData&&t instanceof Q.FormData,!(0<=zU(Moe,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{HV(this),0<this.B&&((this.K=function Poe(t){return ru&&function Xse(){return function qse(t){var e=Yse;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=KU(String(ug)).split("."),n=KU("9").split("."),r=Math.max(e.length,n.length);for(let o=0;0==t&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=cD(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||cD(0==i[2].length,0==s[2].length)||cD(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=en(this.qa,this)):this.A=xD(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){BV(this,s)}},L.qa=function(){typeof oD<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Gt(this,"timeout"),this.abort(8))},L.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Gt(this,"complete"),Gt(this,"abort"),Tg(this))},L.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Tg(this,!0)),Xe.X.M.call(this)},L.Ha=function(){this.s||(this.F||this.v||this.l?jV(this):this.fb())},L.fb=function(){jV(this)},L.aa=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},L.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},L.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Noe(e)}},L.Ea=function(){return this.m},L.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(L=zV.prototype).ma=8,L.G=1,L.Ja=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new zl(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=JU(s),tV(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=QV(this,i,e),$e(n=Ai(this.F),"RID",t),$e(n,"CVER",22),this.D&&$e(n,"X-HTTP-Session-Id",this.D),nd(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(WV(s)))+"&"+e:this.o&&$D(n,this.o,s)),UD(this.h,i),this.Ya&&$e(n,"TYPE","init"),this.O?($e(n,"$req",e),$e(n,"SID","null"),i.Z=!0,OD(i,n,null)):OD(i,n,e),this.G=2}}else 3==this.G&&(t?KV(this,t):0==this.i.length||PV(this.h)||KV(this))},L.Ia=function(){if(this.u=null,XV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Gl(en(this.eb,this),t)}},L.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,fn(10),Dg(this),XV(this))},L.cb=function(){null!=this.v&&(this.v=null,Dg(this),HD(this),fn(19))},L.kb=function(t){t?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))},(L=r2.prototype).xa=function(){},L.wa=function(){},L.va=function(){},L.ua=function(){},L.Ra=function(){},Ag.prototype.g=function(t,e){return new jn(t,e)},Ht(jn,St),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;fn(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=t2(t,null,t.V),bg(t)},jn.prototype.close=function(){jD(this.g)},jn.prototype.u=function(t){var e=this.g;if("string"==typeof t){var n={};n.__data__=t,t=n}else this.v&&((n={}).__data__=DD(t),t=n);e.i.push(new class{constructor(t,e){this.h=t,this.g=e}}(e.ab++,t)),3==e.G&&bg(e)},jn.prototype.M=function(){this.g.l=null,delete this.j,jD(this.g),delete this.g,jn.X.M.call(this)},Ht(i2,ND),Ht(s2,kD),Ht(ou,r2),ou.prototype.xa=function(){Gt(this.g,"a")},ou.prototype.wa=function(t){Gt(this.g,new i2(t))},ou.prototype.va=function(t){Gt(this.g,new s2)},ou.prototype.ua=function(){Gt(this.g,"b")},Ag.prototype.createWebChannel=Ag.prototype.g,jn.prototype.send=jn.prototype.u,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,gg.NO_ERROR=0,gg.TIMEOUT=8,gg.HTTP_ERROR=6,yV.COMPLETE="complete",wV.EventType=Wl,Wl.OPEN="a",Wl.CLOSE="b",Wl.ERROR="c",Wl.MESSAGE="d",St.prototype.listen=St.prototype.N,Xe.prototype.listenOnce=Xe.prototype.O,Xe.prototype.getLastError=Xe.prototype.Oa,Xe.prototype.getLastErrorCode=Xe.prototype.Ea,Xe.prototype.getStatus=Xe.prototype.aa,Xe.prototype.getResponseJson=Xe.prototype.Sa,Xe.prototype.getResponseText=Xe.prototype.fa,Xe.prototype.send=Xe.prototype.da,Xe.prototype.setWithCredentials=Xe.prototype.Ka;var Foe=Si.createWebChannelTransport=function(){return new Ag},Loe=Si.getStatEventTarget=function(){return pg()},WD=Si.ErrorCode=gg,Uoe=Si.EventType=yV,Voe=Si.Event=ho,o2=Si.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Boe=Si.FetchXmlHttpFactory=Zl,xg=Si.WebChannel=wV,$oe=Si.XhrIo=Xe;const a2="@firebase/firestore";class At{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");let au="9.16.0";const ns=new Zs("@firebase/firestore");function zD(){return ns.logLevel}function D(t,...e){if(ns.logLevel<=fe.DEBUG){const n=e.map(qD);ns.debug(`Firestore (${au}): ${t}`,...n)}}function it(t,...e){if(ns.logLevel<=fe.ERROR){const n=e.map(qD);ns.error(`Firestore (${au}): ${t}`,...n)}}function uu(t,...e){if(ns.logLevel<=fe.WARN){const n=e.map(qD);ns.warn(`Firestore (${au}): ${t}`,...n)}}function qD(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function P(t="Unexpected state"){const e=`FIRESTORE (${au}) INTERNAL ASSERTION FAILED: `+t;throw it(e),new Error(e)}function F(t,e){t||P()}function x(t,e){return t}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Et{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class u2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class joe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class Hoe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Goe{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let o=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Et,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(m(function*(){yield c.promise,yield s(r.currentUser)}))},u=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Et)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(F("string"==typeof r.accessToken),new u2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return F(null===e||"string"==typeof e),new At(e)}}class Woe{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=At.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(F(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class zoe{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new Woe(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class qoe{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{null!=s.error&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(F("string"==typeof n.token),this.A=n.token,new c2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Koe(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class l2{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Koe(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Y(t,e){return t<e?-1:t>e?1:0}function cu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class V{constructor(e){this.timestamp=e}static fromTimestamp(e){return new V(e)}static min(){return new V(new ze(0,0))}static max(){return new V(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rd{constructor(e,n,r){void 0===n?n=0:n>e.length&&P(),void 0===r?r=e.length-n:r>e.length-n&&P(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===rd.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _e extends rd{construct(e,n,r){return new _e(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new T(w.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _e(n)}static emptyPath(){return new _e([])}}const Qoe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends rd{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return Qoe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new T(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new T(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new T(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new T(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}class S{constructor(e){this.path=e}static fromPath(e){return new S(_e.fromString(e))}static fromName(e){return new S(_e.fromString(e).popFirst(5))}static empty(){return new S(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_e.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return _e.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new S(new _e(e.slice()))}}function f2(t){return new Hn(t.readTime,t.key,-1)}class Hn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hn(V.min(),S.empty(),-1)}static max(){return new Hn(V.max(),S.empty(),-1)}}function QD(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=S.comparator(t.documentKey,e.documentKey),0!==n?n:Y(t.largestBatchId,e.largestBatchId))}const p2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zoe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function rs(t){return YD.apply(this,arguments)}function YD(){return YD=m(function*(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==p2)throw t;D("LocalStore","Unexpectedly lost primary lease")}),YD.apply(this,arguments)}class v{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new v((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof v?n:v.resolve(n)}catch(n){return v.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):v.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):v.reject(n)}static resolve(e){return new v((n,r)=>{n(e)})}static reject(e){return new v((n,r)=>{r(e)})}static waitFor(e){return new v((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=v.resolve(!1);for(const r of e)n=n.next(i=>i?v.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new v((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(l=>{o[c]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new v((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}function is(t){return"IndexedDbTransactionError"===t.name}let Gn=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ct&&this.ct(n),n}}return t.at=-1,t})();class rae{constructor(e,n,r,i,s,o,a,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=u}}class yo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}function m2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function _2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function od(t){return null==t}function ad(t){return 0===t&&1/t==-1/0}class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Ct(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const iae=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(t){if(F(!!t),"string"==typeof t){let e=0;const n=iae.exec(t);if(F(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function wo(t){return"string"==typeof t?Ct.fromBase64String(t):Ct.fromUint8Array(t)}function ZD(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function v2(t){const e=t.mapValue.fields.__previous_value__;return ZD(e)?v2(e):e}function ud(t){const e=ss(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}const os_mapValue={fields:{__type__:{stringValue:"__max__"}}};function Io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ZD(t)?4:C2(t)?9007199254740991:10:P()}function Hr(t,e){if(t===e)return!0;const n=Io(t);if(n!==Io(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ud(t).isEqual(ud(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=ss(r.timestampValue),o=ss(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,wo(t.bytesValue).isEqual(wo(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Ze(r.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(r.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ze(r.integerValue)===Ze(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Ze(r.doubleValue),o=Ze(i.doubleValue);return s===o?ad(s)===ad(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return cu(t.arrayValue.values||[],e.arrayValue.values||[],Hr);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(m2(s)!==m2(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Hr(s[a],o[a])))return!1;return!0}(t,e);default:return P()}var i}function cd(t,e){return void 0!==(t.values||[]).find(n=>Hr(n,e))}function as(t,e){if(t===e)return 0;const n=Io(t),r=Io(e);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Ze(i.integerValue||i.doubleValue),a=Ze(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return w2(t.timestampValue,e.timestampValue);case 4:return w2(ud(t),ud(e));case 5:return Y(t.stringValue,e.stringValue);case 6:return function(i,s){const o=wo(i),a=wo(s);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),a=s.split("/");for(let u=0;u<o.length&&u<a.length;u++){const c=Y(o[u],a[u]);if(0!==c)return c}return Y(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=Y(Ze(i.latitude),Ze(s.latitude));return 0!==o?o:Y(Ze(i.longitude),Ze(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],a=s.values||[];for(let u=0;u<o.length&&u<a.length;++u){const c=as(o[u],a[u]);if(c)return c}return Y(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===os_mapValue&&s===os_mapValue)return 0;if(i===os_mapValue)return 1;if(s===os_mapValue)return-1;const o=i.fields||{},a=Object.keys(o),u=s.fields||{},c=Object.keys(u);a.sort(),c.sort();for(let l=0;l<a.length&&l<c.length;++l){const d=Y(a[l],c[l]);if(0!==d)return d;const h=as(o[a[l]],u[c[l]]);if(0!==h)return h}return Y(a.length,c.length)}(t.mapValue,e.mapValue);default:throw P()}}function w2(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Y(t,e);const n=ss(t),r=ss(e),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function lu(t){return JD(t)}function JD(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ss(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?wo(t.bytesValue).toBase64():"referenceValue"in t?S.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=JD(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${JD(r.fields[a])}`;return s+"}"}(t.mapValue):P();var e}function eb(t){return!!t&&"integerValue"in t}function ld(t){return!!t&&"arrayValue"in t}function I2(t){return!!t&&"nullValue"in t}function E2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pg(t){return!!t&&"mapValue"in t}function dd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return vo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function C2(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}class us{constructor(e,n){this.position=e,this.inclusive=n}}function b2(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?S.comparator(S.fromName(o.referenceValue),n.key):as(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function S2(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Hr(t.position[n],e.position[n]))return!1;return!0}class A2{}class he extends A2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new aae(e,n,r):"array-contains"===n?new lae(e,r):"in"===n?new P2(e,r):"not-in"===n?new dae(e,r):"array-contains-any"===n?new hae(e,r):new he(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new uae(e,r):new cae(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(as(n,this.value)):null!==n&&Io(this.value)===Io(n)&&this.matchesComparison(as(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class De extends A2{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new De(e,n)}matches(e){return du(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return null!==e?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function du(t){return"and"===t.op}function nb(t){return function x2(t){for(const e of t.filters)if(e instanceof De)return!1;return!0}(t)&&du(t)}function rb(t){if(t instanceof he)return t.field.canonicalString()+t.op.toString()+lu(t.value);if(nb(t))return t.filters.map(e=>rb(e)).join(",");{const e=t.filters.map(n=>rb(n)).join(",");return`${t.op}(${e})`}}function R2(t,e){return t instanceof he?(n=t,(r=e)instanceof he&&n.op===r.op&&n.field.isEqual(r.field)&&Hr(n.value,r.value)):t instanceof De?function(n,r){return r instanceof De&&n.op===r.op&&n.filters.length===r.filters.length&&n.filters.reduce((i,s,o)=>i&&R2(s,r.filters[o]),!0)}(t,e):void P();var n,r}function k2(t){return t instanceof he?`${(e=t).field.canonicalString()} ${e.op} ${lu(e.value)}`:t instanceof De?function(e){return e.op.toString()+" {"+e.getFilters().map(k2).join(" ,")+"}"}(t):"Filter";var e}class aae extends he{constructor(e,n,r){super(e,n,r),this.key=S.fromName(r.referenceValue)}matches(e){const n=S.comparator(e.key,this.key);return this.matchesComparison(n)}}class uae extends he{constructor(e,n){super(e,"in",n),this.keys=M2(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cae extends he{constructor(e,n){super(e,"not-in",n),this.keys=M2(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function M2(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>S.fromName(r.referenceValue))}class lae extends he{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ld(n)&&cd(n.arrayValue,this.value)}}class P2 extends he{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&cd(this.value.arrayValue,n)}}class dae extends he{constructor(e,n){super(e,"not-in",n)}matches(e){if(cd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!cd(this.value.arrayValue,n)}}class hae extends he{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ld(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cd(this.value.arrayValue,r))}}class hu{constructor(e,n="asc"){this.field=e,this.dir=n}}function fae(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Je{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Og(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Og(this.root,e,this.comparator,!1)}getReverseIterator(){return new Og(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Og(this.root,e,this.comparator,!0)}}class Og{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=i??Wt.EMPTY,this.right=s??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();const e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1,Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Wt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ae{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new O2(this.data.getIterator())}getIteratorFrom(e){return new O2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ae)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ae(this.comparator);return n.data=e,n}}class O2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class An{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new An([])}unionWith(e){let n=new Ae(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new An(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dd(n)}setAll(e){let n=st.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=dd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Pg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Pg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){vo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new zt(dd(this.value))}}function F2(t){const e=[];return vo(t.fields,(n,r)=>{const i=new st([n]);if(Pg(r)){const s=F2(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new An(e)}class Ue{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ue(e,0,V.min(),V.min(),V.min(),zt.empty(),0)}static newFoundDocument(e,n,r,i){return new Ue(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new Ue(e,2,n,V.min(),V.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new Ue(e,3,n,V.min(),V.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ue&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ue(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pae{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function ib(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pae(t,e,n,r,i,s,o)}function Co(t){const e=x(t);if(null===e.ft){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>rb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),od(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lu(r)).join(",")),e.ft=n}return e.ft}function hd(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!fae(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!R2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!S2(t.startAt,e.startAt)&&S2(t.endAt,e.endAt)}function Fg(t){return S.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}class Ri{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.dt=null,this._t=null}}function pu(t){return new Ri(t)}function B2(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function To(t){const e=x(t);if(null===e.dt){e.dt=[];const n=function Ug(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}(e),r=function sb(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}(e);if(null!==n&&null===r)n.isKeyField()||e.dt.push(new hu(n)),e.dt.push(new hu(st.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.dt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new hu(st.keyField(),s))}}}return e.dt}function pn(t){const e=x(t);if(!e._t)if("F"===e.limitType)e._t=ib(e.path,e.collectionGroup,To(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of To(e))n.push(new hu(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new us(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new us(e.startAt.position,e.startAt.inclusive):null;e._t=ib(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e._t}function Vg(t,e,n){return new Ri(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function fd(t,e){return hd(pn(t),pn(e))&&t.limitType===e.limitType}function $2(t){return`${Co(pn(t))}|lt:${t.limitType}`}function ub(t){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>k2(r)).join(", ")}]`),od(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lu(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lu(r)).join(",")),`Target(${n})`}(pn(t))}; limitType=${t.limitType})`}function cb(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):S.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of To(n))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,o){const a=b2(i,s,o);return i.inclusive?a<=0:a<0}(n.startAt,To(n),r)||n.endAt&&!function(i,s,o){const a=b2(i,s,o);return i.inclusive?a>=0:a>0}(n.endAt,To(n),r)));var n,r}function H2(t){return(e,n)=>{let r=!1;for(const i of To(t)){const s=gae(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function gae(t,e,n){const r=t.field.isKeyField()?S.comparator(e.key,n.key):function(i,s,o){const a=s.data.field(i),u=o.data.field(i);return null!==a&&null!==u?as(a,u):P()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}function G2(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ad(e)?"-0":e}}function W2(t){return{integerValue:""+t}}function z2(t,e){return function y2(t){return"number"==typeof t&&Number.isInteger(t)&&!ad(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}(e)?W2(e):G2(t,e)}class Bg{constructor(){this._=void 0}}function mae(t,e,n){return t instanceof gu?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Do?K2(t,e):t instanceof bo?Q2(t,e):function(r,i){const s=q2(r,i),o=Y2(s)+Y2(r.gt);return eb(s)&&eb(r.gt)?W2(o):G2(r.yt,o)}(t,e)}function _ae(t,e,n){return t instanceof Do?K2(t,e):t instanceof bo?Q2(t,e):n}function q2(t,e){return t instanceof mu?eb(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class gu extends Bg{}class Do extends Bg{constructor(e){super(),this.elements=e}}function K2(t,e){const n=X2(e);for(const r of t.elements)n.some(i=>Hr(i,r))||n.push(r);return{arrayValue:{values:n}}}class bo extends Bg{constructor(e){super(),this.elements=e}}function Q2(t,e){let n=X2(e);for(const r of t.elements)n=n.filter(i=>!Hr(i,r));return{arrayValue:{values:n}}}class mu extends Bg{constructor(e,n){super(),this.yt=e,this.gt=n}}function Y2(t){return Ze(t.integerValue||t.doubleValue)}function X2(t){return ld(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class vae{constructor(e,n){this.version=e,this.transformResults=n}}class je{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new je}static exists(e){return new je(void 0,e)}static updateTime(e){return new je(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $g(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class jg{}function Z2(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new yu(t.key,je.none()):new _u(t.key,t.data,je.none());{const n=t.data,r=zt.empty();let i=new Ae(st.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ni(t.key,r,new An(i.toArray()),je.none())}}function wae(t,e,n){t instanceof _u?function(r,i,s){const o=r.value.clone(),a=tB(r.fieldTransforms,i,s.transformResults);o.setAll(a),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ni?function(r,i,s){if(!$g(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=tB(r.fieldTransforms,i,s.transformResults),a=i.data;a.setAll(eB(r)),a.setAll(o),i.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function gd(t,e,n,r){return t instanceof _u?function(i,s,o,a){if(!$g(i.precondition,s))return o;const u=i.value.clone(),c=nB(i.fieldTransforms,a,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ni?function(i,s,o,a){if(!$g(i.precondition,s))return o;const u=nB(i.fieldTransforms,a,s),c=s.data;return c.setAll(eB(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null===o?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(l=>l.field))}(t,e,n,r):(o=n,$g(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Iae(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=q2(r.transform,i||null);null!=s&&(null===n&&(n=zt.empty()),n.set(r.field,s))}return n||null}function J2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&cu(n,r,(i,s)=>function yae(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Do&&r instanceof Do||n instanceof bo&&r instanceof bo?cu(n.elements,r.elements,Hr):n instanceof mu&&r instanceof mu?Hr(n.gt,r.gt):n instanceof gu&&r instanceof gu);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class _u extends jg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ni extends jg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function eB(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function tB(t,e,n){const r=new Map;F(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,_ae(o,a,n[i]))}return r}function nB(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,mae(s,o,e))}return r}class yu extends jg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lb extends jg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Eae{constructor(e){this.count=e}}var ht,ye;function rB(t){switch(t){default:return P();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function iB(t){if(void 0===t)return it("GRPC error has no .code"),w.UNKNOWN;switch(t){case ht.OK:return w.OK;case ht.CANCELLED:return w.CANCELLED;case ht.UNKNOWN:return w.UNKNOWN;case ht.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case ht.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case ht.INTERNAL:return w.INTERNAL;case ht.UNAVAILABLE:return w.UNAVAILABLE;case ht.UNAUTHENTICATED:return w.UNAUTHENTICATED;case ht.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case ht.NOT_FOUND:return w.NOT_FOUND;case ht.ALREADY_EXISTS:return w.ALREADY_EXISTS;case ht.PERMISSION_DENIED:return w.PERMISSION_DENIED;case ht.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case ht.ABORTED:return w.ABORTED;case ht.OUT_OF_RANGE:return w.OUT_OF_RANGE;case ht.UNIMPLEMENTED:return w.UNIMPLEMENTED;case ht.DATA_LOSS:return w.DATA_LOSS;default:return P()}}(ye=ht||(ht={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";class cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _2(this.inner)}size(){return this.innerSize}}const Cae=new Je(S.comparator);function xn(){return Cae}const sB=new Je(S.comparator);function md(...t){let e=sB;for(const n of t)e=e.insert(n.key,n);return e}function oB(t){let e=sB;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gr(){return _d()}function aB(){return _d()}function _d(){return new cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Tae=new Je(S.comparator),Dae=new Ae(S.comparator);function ne(...t){let e=Dae;for(const n of t)e=e.add(n);return e}const bae=new Ae(Y);function Hg(){return bae}class yd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yd(V.min(),i,Hg(),xn(),ne())}}class vd{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vd(r,n,ne(),ne(),ne())}}class Gg{constructor(e,n,r,i){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=i}}class uB{constructor(e,n){this.targetId=e,this.Et=n}}class cB{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class lB{constructor(){this.At=0,this.Rt=hB(),this.bt=Ct.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=ne(),n=ne(),r=ne();return this.Rt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:P()}}),new vd(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=hB()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Sae{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=xn(),this.qt=dB(),this.Ut=new Ae(Y)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:P()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,i)=>{this.zt(i)&&n(i)})}Jt(e){const n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){const s=i.target;if(Fg(s))if(0===r){const o=new S(s.path);this.Qt(n,o,Ue.newNoDocument(o,V.min()))}else F(1===r);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&Fg(a.target)){const u=new S(a.target.path);null!==this.Lt.get(u)||this.te(o,u)||this.Qt(o,u,Ue.newNoDocument(u,e))}s.St&&(n.set(o,s.Ct()),s.xt())}});let r=ne();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Yt(u);return!c||2===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(e));const i=new yd(e,n,this.Ut,this.Lt,r);return this.Lt=xn(),this.qt=dB(),this.Ut=new Ae(Y),i}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,n)?i.Nt(n,1):i.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new lB,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Ae(Y),this.qt=this.qt.insert(e,n)),n}zt(e){const n=null!==this.Yt(e);return n||D("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new lB),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function dB(){return new Je(S.comparator)}function hB(){return new Je(S.comparator)}const Aae={asc:"ASCENDING",desc:"DESCENDING"},xae={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rae={and:"AND",or:"OR"};class Nae{constructor(e,n){this.databaseId=e,this.wt=n}}function vu(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fB(t,e){return t.wt?e.toBase64():e.toUint8Array()}function kae(t,e){return vu(t,e.toTimestamp())}function ot(t){return F(!!t),V.fromTimestamp(function(e){const n=ss(e);return new ze(n.seconds,n.nanos)}(t))}function db(t,e){return(n=t,new _e(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function pB(t){const e=_e.fromString(t);return F(CB(e)),e}function wd(t,e){return db(t.databaseId,e.path)}function Wr(t,e){const n=pB(e);if(n.get(1)!==t.databaseId.projectId)throw new T(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new S(mB(n))}function hb(t,e){return db(t.databaseId,e)}function Id(t){return new _e(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mB(t){return F(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function _B(t,e,n){return{name:wd(t,e),fields:n.value.mapValue.fields}}function vB(t,e){return{documents:[hb(t,e.path)]}}function pb(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=hb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=hb(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(0!==u.length)return EB(De.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(0!==u.length)return u.map(c=>{return{field:wu((l=c).field),direction:Lae(l.dir)};var l})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(c=e.limit,t.wt||od(c)?c:{value:c});var c,a,u;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt={before:!(u=e.endAt).inclusive,values:u.position}),n}function wB(t){let e=function gB(t){const e=pB(t);return 4===e.length?_e.emptyPath():mB(e)}(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){F(1===r);const l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(l){const d=IB(l);return d instanceof De&&nb(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(l=>{return new hu(Iu((d=l).field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;n.limit&&(a=function(l){let d;return d="object"==typeof l?l.value:l,od(d)?null:d}(n.limit));let u=null;var l;n.startAt&&(u=new us((l=n.startAt).values||[],!!l.before));let c=null;return n.endAt&&(c=function(l){return new us(l.values||[],!l.before)}(n.endAt)),function V2(t,e,n,r,i,s,o,a){return new Ri(t,e,n,r,i,s,o,a)}(e,i,o,s,a,"F",u,c)}function IB(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Iu(e.unaryFilter.field);return he.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Iu(e.unaryFilter.field);return he.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Iu(e.unaryFilter.field);return he.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Iu(e.unaryFilter.field);return he.create(s,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(t):void 0!==t.fieldFilter?he.create(Iu((e=t).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==t.compositeFilter?function(e){return De.create(e.compositeFilter.filters.map(n=>IB(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return P()}}(e.compositeFilter.op))}(t):P();var e}function Lae(t){return Aae[t]}function Uae(t){return xae[t]}function Vae(t){return Rae[t]}function wu(t){return{fieldPath:t.canonicalString()}}function Iu(t){return st.fromServerFormat(t.fieldPath)}function EB(t){return t instanceof he?function(e){if("=="===e.op){if(E2(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NAN"}};if(I2(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(E2(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NOT_NAN"}};if(I2(e.value))return{unaryFilter:{field:wu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wu(e.field),op:Uae(e.op),value:e.value}}}(t):t instanceof De?function(e){const n=e.getFilters().map(r=>EB(r));return 1===n.length?n[0]:{compositeFilter:{op:Vae(e.op),filters:n}}}(t):P()}function Bae(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function CB(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class mb{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&wae(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aB();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Z2(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&cu(this.mutations,e.mutations,(n,r)=>J2(n,r))&&cu(this.baseMutations,e.baseMutations,(n,r)=>J2(n,r))}}class _b{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){F(e.mutations.length===r.length);let i=Tae;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new _b(e,n,r,i)}}class yb{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ls{constructor(e,n,r,i,s=V.min(),o=V.min(),a=Ct.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class RB{constructor(e){this.ie=e}}function vb(t){const e=wB({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Vg(e,e.limit,"L"):e}class Ro{constructor(){}ue(e,n){this.ce(e,n),n.ae()}ce(e,n){if("nullValue"in e)this.he(n,5);else if("booleanValue"in e)this.he(n,10),n.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(n,15),n.le(Ze(e.integerValue));else if("doubleValue"in e){const r=Ze(e.doubleValue);isNaN(r)?this.he(n,13):(this.he(n,15),ad(r)?n.le(0):n.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(n,20),"string"==typeof r?n.fe(r):(n.fe(`${r.seconds||""}`),n.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,n),this._e(n);else if("bytesValue"in e)this.he(n,30),n.we(wo(e.bytesValue)),this._e(n);else if("referenceValue"in e)this.me(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(n,45),n.le(r.latitude||0),n.le(r.longitude||0)}else"mapValue"in e?C2(e)?this.he(n,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,n),this._e(n)):"arrayValue"in e?(this.ye(e.arrayValue,n),this._e(n)):P()}de(e,n){this.he(n,25),this.pe(e,n)}pe(e,n){n.fe(e)}ge(e,n){const r=e.fields||{};this.he(n,55);for(const i of Object.keys(r))this.de(i,n),this.ce(r[i],n)}ye(e,n){const r=e.values||[];this.he(n,50);for(const i of r)this.ce(i,n)}me(e,n){this.he(n,37),S.fromName(e).path.forEach(r=>{this.he(n,60),this.pe(r,n)})}he(e,n){e.le(n)}_e(e){e.le(2)}}Ro.Ie=new Ro;class fue{constructor(){this.Je=new Db}addToCollectionParentIndex(e,n){return this.Je.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(Hn.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(Hn.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}}class Db{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ae(_e.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(_e.comparator)).toArray()}}new Uint8Array(0);class Rn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(41943040,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);class ko{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new ko(0)}static vn(){return new ko(-1)}}class wue{constructor(){this.changes=new cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ue.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Cue{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class e${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&gd(r.mutation,i,An.empty(),ze.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const i=Gr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=md();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Gr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=xn();const o=_d(),a=_d();return n.forEach((u,c)=>{const l=r.get(c.key);i.has(c.key)&&(void 0===l||l.mutation instanceof Ni)?s=s.insert(c.key,c):void 0!==l?(o.set(c.key,l.mutation.getFieldMask()),gd(l.mutation,c,l.mutation.getFieldMask(),ze.now())):o.set(c.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,l)=>o.set(c,l)),n.forEach((c,l)=>{var d;return a.set(c,new Cue(l,null!==(d=o.get(c))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=_d();let i=new Je((o,a)=>o-a),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(null===c)return;let l=r.get(u)||An.empty();l=a.applyToLocalView(c,l),r.set(u,l);const d=(i.get(a.batchId)||ne()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,l=u.value,d=aB();l.forEach(h=>{if(!s.has(h)){const f=Z2(n.get(h),r.get(h));null!==f&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return S.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):function ob(t){return null!==t.collectionGroup}(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(Gr());let a=-1,u=s;return o.next(c=>v.forEach(c,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{u=u.insert(l,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ne())).next(l=>({batchId:a,changes:oB(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new S(n)).next(r=>{let i=md();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=md();return this.indexManager.getCollectionParents(e,i).next(o=>v.forEach(o,a=>{const u=(c=n,l=a.child(i),new Ri(l,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt));var c,l;return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((l,d)=>{s=s.insert(l,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((a,u)=>{const c=u.getKey();null===i.get(c)&&(i=i.insert(c,Ue.newInvalidDocument(c)))});let o=md();return i.forEach((a,u)=>{const c=s.get(a);void 0!==c&&gd(c.mutation,u,An.empty(),ze.now()),cb(n,u)&&(o=o.insert(a,u))}),o})}}class Tue{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return v.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:ot(r.createTime)}),v.resolve()}getNamedQuery(e,n){return v.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,{name:(r=n).name,query:vb(r.bundledQuery),readTime:ot(r.readTime)}),v.resolve();var r}}class Due{constructor(){this.overlays=new Je(S.comparator),this.es=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Gr();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.oe(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){const i=Gr(),s=n.length+1,o=new S(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Je((c,l)=>c-l);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let l=s.get(c.largestBatchId);null===l&&(l=Gr(),s=s.insert(c.largestBatchId,l)),l.set(c.getKey(),c)}}const a=Gr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,l)=>a.set(c,l)),!(a.size()>=i)););return v.resolve(a)}oe(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yb(n,r));let s=this.es.get(n);void 0===s&&(s=ne(),this.es.set(n,s)),this.es.set(n,s.add(r.key))}}class bb{constructor(){this.ns=new Ae(Rt.ss),this.rs=new Ae(Rt.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new Rt(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new S(new _e([])),r=new Rt(n,e),i=new Rt(n,e+1),s=[];return this.rs.forEachInRange([r,i],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new S(new _e([])),r=new Rt(n,e),i=new Rt(n,e+1);let s=ne();return this.rs.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Rt(e,0),r=this.ns.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return S.comparator(e.key,n.key)||Y(e._s,n._s)}static os(e,n){return Y(e._s,n._s)||S.comparator(e.key,n.key)}}class bue{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ae(Rt.ss)}checkEmpty(e){return v.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.ws;this.ws++;const o=new mb(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.gs=this.gs.add(new Rt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.ps(n+1),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),i=new Rt(n,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],o=>{const a=this.ys(o._s);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ae(Y);return n.forEach(i=>{const s=new Rt(i,0),o=new Rt(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{r=r.add(a._s)})}),v.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;S.isDocumentKey(s)||(s=s.child(""));const o=new Rt(new S(s),0);let a=new Ae(Y);return this.gs.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u._s)),!0)},o),v.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){F(0===this.Ts(n.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return v.forEach(n.mutations,i=>{const s=new Rt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new Rt(n,0),i=this.gs.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return v.resolve()}Ts(e,n){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Sue{constructor(e){this.Es=e,this.docs=new Je(S.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():Ue.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ue.newInvalidDocument(i))}),v.resolve(r)}getAllFromCollection(e,n,r){let i=xn();const s=new S(n.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:u}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||QD(f2(u),r)<=0||(i=i.insert(u.key,u.mutableCopy()))}return v.resolve(i)}getAllFromCollectionGroup(e,n,r,i){P()}As(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Aue(this)}getSize(e){return v.resolve(this.size)}}class Aue extends wue{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class xue{constructor(e){this.persistence=e,this.Rs=new cs(n=>Co(n),hd),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.bs=0,this.Ps=new bb,this.targetCount=0,this.vs=ko.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),v.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new ko(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.Dn(n),v.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),v.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.Ps.containsKey(n))}}class t${constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Gn(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new xue(this),this.indexManager=new fue,this.remoteDocumentCache=new Sue(r=>this.referenceDelegate.xs(r)),this.yt=new RB(n),this.Ns=new Tue(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Due,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new bue(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);const i=new Rue(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,n){return v.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class Rue extends Zoe{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.Fs=new bb,this.$s=null}static Bs(e){return new em(e)}get Ls(){if(this.$s)return this.$s;throw P()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),v.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Ls,r=>{const i=S.fromPath(r);return this.qs(e,i).next(s=>{s||n.removeEntry(i,V.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return v.or([()=>v.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class Rb{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=i}static Ci(e,n){let r=ne(),i=ne();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Rb(e,n.fromCache,r,i)}}class r${constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,i){return this.ki(e,n).next(s=>s||this.Oi(e,n,i,r)).next(s=>s||this.Mi(e,n))}ki(e,n){if(B2(n))return v.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=Vg(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ne(...s);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Fi(n,a);return this.$i(n,c,o,u.readTime)?this.ki(e,Vg(n,null,"F")):this.Bi(e,c,n,u)}))})))}Oi(e,n,r,i){return B2(n)||i.isEqual(V.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(s=>{const o=this.Fi(n,s);return this.$i(n,o,r,i)?this.Mi(e,n):(zD()<=fe.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ub(n)),this.Bi(e,o,n,function h2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(1e9===r?new ze(n+1,0):new ze(n,r));return new Hn(i,S.empty(),e)}(i,-1)))})}Fi(e,n){let r=new Ae(H2(e));return n.forEach((i,s)=>{cb(e,s)&&(r=r.add(s))}),r}$i(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,n){return zD()<=fe.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",ub(n)),this.Ni.getDocumentsMatchingQuery(e,n,Hn.min())}Bi(e,n,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class kue{constructor(e,n,r,i){this.persistence=e,this.Li=n,this.yt=i,this.qi=new Je(Y),this.Ui=new cs(s=>Co(s),hd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e$(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function s$(t,e){return Nb.apply(this,arguments)}function Nb(){return Nb=m(function*(t,e){const n=x(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ne();for(const c of i){o.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}for(const c of s){a.push(c.batchId);for(const l of c.mutations)u=u.add(l.key)}return n.localDocuments.getDocuments(r,u).next(c=>({ji:c,removedBatchIds:o,addedBatchIds:a}))})})}),Nb.apply(this,arguments)}function Mue(t,e){const n=x(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,u,c){const l=u.batch,d=l.keys();let h=v.resolve();return d.forEach(f=>{h=h.next(()=>c.getEntry(a,f)).next(p=>{const g=u.docVersions.get(f);F(null!==g),p.version.compareTo(g)<0&&(l.applyToRemoteDocument(p,u),p.isValidDocument()&&(p.setReadTime(u.commitVersion),c.addEntry(p)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(a,l))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=ne();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(a=a.add(o.batch.mutations[u].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function o$(t){const e=x(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Pue(t,e){const n=x(t),r=e.snapshotVersion;let i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;const a=[];e.targetChanges.forEach((l,d)=>{const h=i.get(d);if(!h)return;a.push(n.Cs.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Cs.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);var p,g,_;e.targetMismatches.has(d)?f=f.withResumeToken(Ct.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),g=f,_=l,(0===(p=h).resumeToken.approximateByteSize()||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8||_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0)&&a.push(n.Cs.updateTargetData(s,f))});let u=xn(),c=ne();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(function a$(t,e,n){let r=ne(),i=ne();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xn();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(V.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||0===u.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Wi:o,zi:i}})}(s,o,e.documentUpdates).next(l=>{u=l.Wi,c=l.zi})),!r.isEqual(V.min())){const l=n.Cs.getLastRemoteSnapshotVersion(s).next(d=>n.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.qi=i,s))}function Oue(t,e){const n=x(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tu(t,e){const n=x(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Cs.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Cs.allocateTargetId(r).next(o=>(i=new ls(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}function Du(t,e,n){return kb.apply(this,arguments)}function kb(){return kb=m(function*(t,e,n){const r=x(t),i=r.qi.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!is(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),kb.apply(this,arguments)}function nm(t,e,n){const r=x(t);let i=V.min(),s=ne();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,u,c){const l=x(a),d=l.Ui.get(c);return void 0!==d?v.resolve(l.qi.get(d)):l.Cs.getTargetData(u,c)}(r,o,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?i:V.min(),n?s:ne())).next(a=>(function l$(t,e,n){let r=t.Ki.get(e)||V.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ki.set(e,r)}(r,function j2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}(e),a),{documents:a,Hi:s})))}class Lb{constructor(){this.activeTargetIds=Hg()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f${constructor(){this.Lr=new Lb,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Lb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uue{Ur(e){}shutdown(){}}class p${constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Vue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Bue{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class $ue extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,i,s){const o=this.ho(e,n);D("RestConnection","Sending: ",o,r);const a={};return this.lo(a,i,s),this.fo(e,o,a,r).then(u=>(D("RestConnection","Received: ",u),u),u=>{throw uu("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}_o(e,n,r,i,s,o){return this.ao(e,n,r,i,s)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+au,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,n){return`${this.oo}/v1/${n}:${Vue[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,i){return new Promise((s,o)=>{const a=new $oe;a.setWithCredentials(!0),a.listenOnce(Uoe.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case WD.NO_ERROR:const c=a.getResponseJson();D("Connection","XHR received:",JSON.stringify(c)),s(c);break;case WD.TIMEOUT:D("Connection",'RPC "'+e+'" timed out'),o(new T(w.DEADLINE_EXCEEDED,"Request time out"));break;case WD.HTTP_ERROR:const l=a.getStatus();if(D("Connection",'RPC "'+e+'" failed with status:',l,"response text:",a.getResponseText()),l>0){let d=a.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d?.error;if(h&&h.status&&h.message){const f=function(p){const g=p.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(g)>=0?g:w.UNKNOWN}(h.status);o(new T(f,h.message))}else o(new T(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new T(w.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{D("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);a.send(n,"POST",u,r,15)})}wo(e,n,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Foe(),o=Loe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Boe({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=i.join("");D("Connection","Creating WebChannel: "+u,a);const c=s.createWebChannel(u,a);let l=!1,d=!1;const h=new Bue({Hr:p=>{d?D("Connection","Not sending because WebChannel is closed:",p):(l||(D("Connection","Opening WebChannel transport."),c.open(),l=!0),D("Connection","WebChannel sending:",p),c.send(p))},Jr:()=>c.close()}),f=(p,g,_)=>{p.listen(g,I=>{try{_(I)}catch(E){setTimeout(()=>{throw E},0)}})};return f(c,xg.EventType.OPEN,()=>{d||D("Connection","WebChannel transport opened.")}),f(c,xg.EventType.CLOSE,()=>{d||(d=!0,D("Connection","WebChannel transport closed"),h.io())}),f(c,xg.EventType.ERROR,p=>{d||(d=!0,uu("Connection","WebChannel transport errored:",p),h.io(new T(w.UNAVAILABLE,"The operation could not be completed")))}),f(c,xg.EventType.MESSAGE,p=>{var g;if(!d){const _=p.data[0];F(!!_);const E=_.error||(null===(g=_[0])||void 0===g?void 0:g.error);if(E){D("Connection","WebChannel received error:",E);const y=E.status;let N=function(B){const ut=ht[B];if(void 0!==ut)return iB(ut)}(y),U=E.message;void 0===N&&(N=w.INTERNAL,U="Unknown error status: "+y+" with message "+E.message),d=!0,h.io(new T(N,U)),c.close()}else D("Connection","WebChannel received:",_),h.ro(_)}}),f(o,Voe.STAT_EVENT,p=>{p.stat===o2.PROXY?D("Connection","Detected buffering proxy"):p.stat===o2.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.so()},0),h}}function sm(){return typeof document<"u"?document:null}function Nd(t){return new Nae(t,!0)}class Vb{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class m${constructor(e,n,r,i,s,o,a,u){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Vb(e,n)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return m(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return m(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,n){var r=this;return m(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(it(n.toString()),it("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):n&&n.code===w.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(n)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===n&&this.Go(r,i)},r=>{e(()=>{const i=new T(w.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro(m(function*(){e.state=0,e.start()}))}Qo(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jue extends m${constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.yt=s}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=function Pae(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(u=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===u?1:"REMOVE"===u?2:"CURRENT"===u?3:"RESET"===u?4:P(),i=e.targetChange.targetIds||[],s=function(u,c){return u.wt?(F(void 0===c||"string"==typeof c),Ct.fromBase64String(c||"")):(F(void 0===c||c instanceof Uint8Array),Ct.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=void 0===u.code?w.UNKNOWN:iB(u.code);return new T(c,u.message||"")}(o);n=new cB(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Wr(t,r.document.name),s=ot(r.document.updateTime),o=r.document.createTime?ot(r.document.createTime):V.min(),a=new zt({mapValue:{fields:r.document.fields}}),u=Ue.newFoundDocument(i,s,o,a);n=new Gg(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=Wr(t,r.document),s=r.readTime?ot(r.readTime):V.min(),o=Ue.newNoDocument(i,s);n=new Gg([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Wr(t,r.document);n=new Gg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return P();{const r=e.filter,s=new Eae(r.count||0);n=new uB(r.targetId,s)}}var u;return n}(this.yt,e),r=function(i){if(!("targetChange"in i))return V.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?V.min():s.readTime?ot(s.readTime):V.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=Id(this.yt),n.addTarget=function(i,s){let o;const a=s.target;return o=Fg(a)?{documents:vB(i,a)}:{query:pb(i,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=fB(i,s.resumeToken):s.snapshotVersion.compareTo(V.min())>0&&(o.readTime=vu(i,s.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=function Fae(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return P()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=Id(this.yt),n.removeTarget=e,this.Bo(n)}}class Hue extends m${constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(F(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=function Oae(t,e){return t&&t.length>0?(F(void 0!==e),t.map(n=>function(r,i){let s=ot(r.updateTime?r.updateTime:i);return s.isEqual(V.min())&&(s=ot(i)),new vae(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=ot(e.commitTime);return this.listener.Zo(r,n)}return F(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Id(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>function Ed(t,e){let n;if(e instanceof _u)n={update:_B(t,e.key,e.value)};else if(e instanceof yu)n={delete:wd(t,e.key)};else if(e instanceof Ni)n={update:_B(t,e.key,e.data),updateMask:Bae(e.fieldMask)};else{if(!(e instanceof lb))return P();n={verify:wd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof gu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Do)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof bo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof mu)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw P()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:kae(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:P()),n;var i}(this.yt,r))};this.Bo(n)}}class Gue extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new T(w.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new T(w.UNKNOWN,i.toString())})}_o(e,n,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(e,n,r,s,o,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(w.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class zue{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(it(n),this.ou=!1):D("OnlineStateTracker",n)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class que{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(a=>{r.enqueueAndForget(m(function*(){var u;ki(o)&&(D("RemoteStore","Restarting streams for network reachability change."),yield(u=m(function*(c){const l=x(c);l._u.add(4),yield bu(l),l.gu.set("Unknown"),l._u.delete(4),yield kd(l)}),function(c){return u.apply(this,arguments)})(o))}))}),this.gu=new zue(r,i)}}function kd(t){return $b.apply(this,arguments)}function $b(){return $b=m(function*(t){if(ki(t))for(const e of t.wu)yield e(!0)}),$b.apply(this,arguments)}function bu(t){return jb.apply(this,arguments)}function jb(){return jb=m(function*(t){for(const e of t.wu)yield e(!1)}),jb.apply(this,arguments)}function om(t,e){const n=x(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Wb(n)?Gb(n):Au(n).ko()&&Hb(n,e))}function Md(t,e){const n=x(t),r=Au(n);n.du.delete(e),r.ko()&&_$(n,e),0===n.du.size&&(r.ko()?r.Fo():ki(n)&&n.gu.set("Unknown"))}function Hb(t,e){t.yu.Ot(e.targetId),Au(t).zo(e)}function _$(t,e){t.yu.Ot(e),Au(t).Ho(e)}function Gb(t){t.yu=new Sae({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),Au(t).start(),t.gu.uu()}function Wb(t){return ki(t)&&!Au(t).No()&&t.du.size>0}function ki(t){return 0===x(t)._u.size}function y$(t){t.yu=void 0}function Kue(t){return zb.apply(this,arguments)}function zb(){return zb=m(function*(t){t.du.forEach((e,n)=>{Hb(t,e)})}),zb.apply(this,arguments)}function Que(t,e){return qb.apply(this,arguments)}function qb(){return qb=m(function*(t,e){y$(t),Wb(t)?(t.gu.hu(e),Gb(t)):t.gu.set("Unknown")}),qb.apply(this,arguments)}function Yue(t,e,n){return Kb.apply(this,arguments)}function Kb(){return Kb=m(function*(t,e,n){if(t.gu.set("Online"),e instanceof cB&&2===e.state&&e.cause)try{yield(r=m(function*(i,s){const o=s.cause;for(const a of s.targetIds)i.du.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.du.delete(a),i.yu.removeTarget(a))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield am(t,r)}else if(e instanceof Gg?t.yu.Kt(e):e instanceof uB?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(V.min()))try{const r=yield o$(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const o=i.yu.Zt(s);return o.targetChanges.forEach((a,u)=>{if(a.resumeToken.approximateByteSize()>0){const c=i.du.get(u);c&&i.du.set(u,c.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const u=i.du.get(a);if(!u)return;i.du.set(a,u.withResumeToken(Ct.EMPTY_BYTE_STRING,u.snapshotVersion)),_$(i,a);const c=new ls(u.target,a,1,u.sequenceNumber);Hb(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield am(t,r)}var r}),Kb.apply(this,arguments)}function am(t,e,n){return Qb.apply(this,arguments)}function Qb(){return Qb=m(function*(t,e,n){if(!is(e))throw e;t._u.add(1),yield bu(t),t.gu.set("Offline"),n||(n=()=>o$(t.localStore)),t.asyncQueue.enqueueRetryable(m(function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t._u.delete(1),yield kd(t)}))}),Qb.apply(this,arguments)}function v$(t,e){return e().catch(n=>am(t,n,e))}function Su(t){return Yb.apply(this,arguments)}function Yb(){return Yb=m(function*(t){const e=x(t),n=ps(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Xue(e);)try{const i=yield Oue(e.localStore,r);if(null===i){0===e.fu.length&&n.Fo();break}r=i.batchId,Zue(e,i)}catch(i){yield am(e,i)}w$(e)&&I$(e)}),Yb.apply(this,arguments)}function Xue(t){return ki(t)&&t.fu.length<10}function Zue(t,e){t.fu.push(e);const n=ps(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function w$(t){return ki(t)&&!ps(t).No()&&t.fu.length>0}function I$(t){ps(t).start()}function Jue(t){return Xb.apply(this,arguments)}function Xb(){return Xb=m(function*(t){ps(t).eu()}),Xb.apply(this,arguments)}function ece(t){return Zb.apply(this,arguments)}function Zb(){return Zb=m(function*(t){const e=ps(t);for(const n of t.fu)e.Xo(n.mutations)}),Zb.apply(this,arguments)}function tce(t,e,n){return Jb.apply(this,arguments)}function Jb(){return Jb=m(function*(t,e,n){const r=t.fu.shift(),i=_b.from(r,e,n);yield v$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Su(t)}),Jb.apply(this,arguments)}function nce(t,e){return eS.apply(this,arguments)}function eS(){return eS=m(function*(t,e){var n;e&&ps(t).Yo&&(yield(n=m(function*(r,i){if(rB(s=i.code)&&s!==w.ABORTED){const o=r.fu.shift();ps(r).Mo(),yield v$(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Su(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),w$(t)&&I$(t)}),eS.apply(this,arguments)}function E$(t,e){return tS.apply(this,arguments)}function tS(){return tS=m(function*(t,e){const n=x(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const r=ki(n);n._u.add(3),yield bu(n),r&&n.gu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),yield kd(n)}),tS.apply(this,arguments)}function rS(){return rS=m(function*(t,e){const n=x(t);e?(n._u.delete(2),yield kd(n)):e||(n._u.add(2),yield bu(n),n.gu.set("Unknown"))}),rS.apply(this,arguments)}function Au(t){return t.pu||(t.pu=function(e,n,r){const i=x(e);return i.su(),new jue(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:Kue.bind(null,t),Zr:Que.bind(null,t),Wo:Yue.bind(null,t)}),t.wu.push(function(){var e=m(function*(n){n?(t.pu.Mo(),Wb(t)?Gb(t):t.gu.set("Unknown")):(yield t.pu.stop(),y$(t))});return function(n){return e.apply(this,arguments)}}())),t.pu}function ps(t){return t.Iu||(t.Iu=function(e,n,r){const i=x(e);return i.su(),new Hue(n,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(t.datastore,t.asyncQueue,{Yr:Jue.bind(null,t),Zr:nce.bind(null,t),tu:ece.bind(null,t),Zo:tce.bind(null,t)}),t.wu.push(function(){var e=m(function*(n){n?(t.Iu.Mo(),yield Su(t)):(yield t.Iu.stop(),t.fu.length>0&&(D("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))});return function(n){return e.apply(this,arguments)}}())),t.Iu}class iS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new iS(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xu(t,e){if(it("AsyncQueue",`${e}: ${t}`),is(t))return new T(w.UNAVAILABLE,`${e}: ${t}`);throw t}class Ru{constructor(e){this.comparator=e?(n,r)=>e(n,r)||S.comparator(n.key,r.key):(n,r)=>S.comparator(n.key,r.key),this.keyedMap=md(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Ru(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ru)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Ru;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class C${constructor(){this.Tu=new Je(S.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(n,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(n):1===e.type&&2===r.type?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):P():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Nu{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Nu(e,n,Ru.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class rce{constructor(){this.Au=void 0,this.listeners=[]}}class ice{constructor(){this.queries=new cs(e=>$2(e),fd),this.onlineState="Unknown",this.Ru=new Set}}function oS(){return oS=m(function*(t,e){const n=x(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new rce),i)try{s.Au=yield n.onListen(r)}catch(o){const a=xu(o,`Initialization of query '${ub(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.listeners.push(e),e.bu(n.onlineState),s.Au&&e.Pu(s.Au)&&cS(n)}),oS.apply(this,arguments)}function uS(){return uS=m(function*(t,e){const n=x(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),uS.apply(this,arguments)}function sce(t,e){const n=x(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.listeners)a.Pu(i)&&(r=!0);o.Au=i}}r&&cS(n)}function oce(t,e,n){const r=x(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function cS(t){t.Ru.forEach(e=>{e.next()})}class lS{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Nu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){return!e.fromCache||(!this.options.Nu||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Nu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class b${constructor(e){this.key=e}}class S${constructor(e){this.key=e}}class A${constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ne(),this.mutatedKeys=ne(),this.Gu=H2(e),this.Qu=new Ru(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new C$,i=n?n.Qu:this.Qu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const h=i.get(l),f=cb(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let _=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(r.track({type:3,doc:f}),_=!0):this.Hu(h,f)||(r.track({type:2,doc:f}),_=!0,(u&&this.Gu(f,u)>0||c&&this.Gu(f,c)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(u||c)&&(a=!0)),_&&(f?(o=o.add(f),s=g?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:a,mutatedKeys:s}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((c,l)=>function(d,h){const f=p=>{switch(p){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return f(d)-f(h)}(c.type,l.type)||this.Gu(c.doc,l.doc)),this.Ju(r);const o=n?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,u=a!==this.Uu;return this.Uu=a,0!==s.length||u?{snapshot:new Nu(this.query,e.Qu,i,s,e.mutatedKeys,0===a,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new C$,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ne(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new S$(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new b$(r))}),n}tc(e){this.qu=e.Hi,this.Ku=ne();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Nu.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class cce{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class lce{constructor(e){this.key=e,this.nc=!1}}class dce{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new cs(a=>$2(a),fd),this.rc=new Map,this.oc=new Set,this.uc=new Je(S.comparator),this.cc=new Map,this.ac=new bb,this.hc={},this.lc=new Map,this.fc=ko.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function hce(t,e){return dS.apply(this,arguments)}function dS(){return dS=m(function*(t,e){const n=PS(t);let r,i;const s=n.ic.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const o=yield Tu(n.localStore,pn(e));n.isPrimaryClient&&om(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield hS(n,e,r,"current"===a,o.resumeToken)}return i}),dS.apply(this,arguments)}function hS(t,e,n,r,i){return fS.apply(this,arguments)}function fS(){return fS=m(function*(t,e,n,r,i){t._c=(d,h,f)=>{return(p=m(function*(g,_,I,E){let y=_.view.Wu(I);y.$i&&(y=yield nm(g.localStore,_.query,!1).then(({documents:B})=>_.view.Wu(B,y)));const N=E&&E.targetChanges.get(_.targetId),U=_.view.applyChanges(y,g.isPrimaryClient,N);return CS(g,_.targetId,U.Xu),U.snapshot}),function(g,_,I,E){return p.apply(this,arguments)})(t,d,h,f);var p};const s=yield nm(t.localStore,e,!0),o=new A$(e,s.Hi),a=o.Wu(s.documents),u=vd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),c=o.applyChanges(a,t.isPrimaryClient,u);CS(t,n,c.Xu);const l=new cce(e,n,o);return t.ic.set(e,l),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),c.snapshot}),fS.apply(this,arguments)}function fce(t,e){return pS.apply(this,arguments)}function pS(){return pS=m(function*(t,e){const n=x(t),r=n.ic.get(e),i=n.rc.get(r.targetId);if(i.length>1)return n.rc.set(r.targetId,i.filter(s=>!fd(s,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Du(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Md(n.remoteStore,r.targetId),ku(n,r.targetId)}).catch(rs))):(ku(n,r.targetId),yield Du(n.localStore,r.targetId,!0))}),pS.apply(this,arguments)}function gS(){return gS=m(function*(t,e,n){const r=OS(t);try{const i=yield function(s,o){const a=x(s),u=ze.now(),c=o.reduce((h,f)=>h.add(f.key),ne());let l,d;return a.persistence.runTransaction("Locally write mutations","readwrite",h=>{let f=xn(),p=ne();return a.Gi.getEntries(h,c).next(g=>{f=g,f.forEach((_,I)=>{I.isValidDocument()||(p=p.add(_))})}).next(()=>a.localDocuments.getOverlayedDocuments(h,f)).next(g=>{l=g;const _=[];for(const I of o){const E=Iae(I,l.get(I.key).overlayedDocument);null!=E&&_.push(new Ni(I.key,E,F2(E.value.mapValue),je.exists(!0)))}return a.mutationQueue.addMutationBatch(h,u,_,o)}).next(g=>{d=g;const _=g.applyToLocalDocumentSet(l,p);return a.documentOverlayCache.saveOverlays(h,g.batchId,_)})}).then(()=>({batchId:d.batchId,changes:oB(l)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,a){let u=s.hc[s.currentUser.toKey()];u||(u=new Je(Y)),u=u.insert(o,a),s.hc[s.currentUser.toKey()]=u}(r,i.batchId,n),yield Mi(r,i.changes),yield Su(r.remoteStore)}catch(i){const s=xu(i,"Failed to persist write");n.reject(s)}}),gS.apply(this,arguments)}function x$(t,e){return mS.apply(this,arguments)}function mS(){return mS=m(function*(t,e){const n=x(t);try{const r=yield Pue(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.cc.get(s);o&&(F(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.nc=!0:i.modifiedDocuments.size>0?F(o.nc):i.removedDocuments.size>0&&(F(o.nc),o.nc=!1))}),yield Mi(n,r,e)}catch(r){yield rs(r)}}),mS.apply(this,arguments)}function R$(t,e,n){const r=x(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.ic.forEach((s,o)=>{const a=o.view.bu(e);a.snapshot&&i.push(a.snapshot)}),function(s,o){const a=x(s);a.onlineState=o;let u=!1;a.queries.forEach((c,l)=>{for(const d of l.listeners)d.bu(o)&&(u=!0)}),u&&cS(a)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function gce(t,e,n){return _S.apply(this,arguments)}function _S(){return _S=m(function*(t,e,n){const r=x(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.cc.get(e),s=i&&i.key;if(s){let o=new Je(S.comparator);o=o.insert(s,Ue.newNoDocument(s,V.min()));const a=ne().add(s),u=new yd(V.min(),new Map,new Ae(Y),o,a);yield x$(r,u),r.uc=r.uc.remove(s),r.cc.delete(e),TS(r)}else yield Du(r.localStore,e,!1).then(()=>ku(r,e,n)).catch(rs)}),_S.apply(this,arguments)}function mce(t,e){return yS.apply(this,arguments)}function yS(){return yS=m(function*(t,e){const n=x(t),r=e.batch.batchId;try{const i=yield Mue(n.localStore,e);ES(n,r,null),IS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Mi(n,i)}catch(i){yield rs(i)}}),yS.apply(this,arguments)}function _ce(t,e,n){return vS.apply(this,arguments)}function vS(){return vS=m(function*(t,e,n){const r=x(t);try{const i=yield function(s,o){const a=x(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return a.mutationQueue.lookupMutationBatch(u,o).next(l=>(F(null!==l),c=l.keys(),a.mutationQueue.removeMutationBatch(u,l))).next(()=>a.mutationQueue.performConsistencyCheck(u)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>a.localDocuments.getDocuments(u,c))})}(r.localStore,e);ES(r,e,n),IS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Mi(r,i)}catch(i){yield rs(i)}}),vS.apply(this,arguments)}function IS(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function ES(t,e,n){const r=x(t);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function ku(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||N$(t,r)})}function N$(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);null!==n&&(Md(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),TS(t))}function CS(t,e,n){for(const r of n)r instanceof b$?(t.ac.addReference(r.key,e),vce(t,r)):r instanceof S$?(D("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||N$(t,r.key)):P()}function vce(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(D("SyncEngine","New document in limbo: "+n),t.oc.add(r),TS(t))}function TS(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new S(_e.fromString(e)),r=t.fc.next();t.cc.set(r,new lce(n)),t.uc=t.uc.insert(n,r),om(t.remoteStore,new ls(pn(pu(n.path)),r,2,Gn.at))}}function Mi(t,e,n){return DS.apply(this,arguments)}function DS(){return DS=m(function*(t,e,n){const r=x(t),i=[],s=[],o=[];var a;r.ic.isEmpty()||(r.ic.forEach((a,u)=>{o.push(r._c(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const l=Rb.Ci(u.targetId,c);s.push(l)}}))}),yield Promise.all(o),r.sc.Wo(i),yield(a=m(function*(u,c){const l=x(u);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(c,h=>v.forEach(h.Si,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Di,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!is(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const f=l.qi.get(h),g=f.withLastLimboFreeSnapshotVersion(f.snapshotVersion);l.qi=l.qi.insert(h,g)}}}),function(u,c){return a.apply(this,arguments)})(r.localStore,s))}),DS.apply(this,arguments)}function wce(t,e){return bS.apply(this,arguments)}function bS(){return bS=m(function*(t,e){const n=x(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const r=yield s$(n.localStore,e);n.currentUser=e,(i=n).lc.forEach(o=>{o.forEach(a=>{a.reject(new T(w.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mi(n,r.ji)}var i}),bS.apply(this,arguments)}function Ice(t,e){const n=x(t),r=n.cc.get(e);if(r&&r.nc)return ne().add(r.key);{let i=ne();const s=n.rc.get(e);if(!s)return i;for(const o of s){const a=n.ic.get(o);i=i.unionWith(a.view.ju)}return i}}function PS(t){const e=x(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=x$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ice.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gce.bind(null,e),e.sc.Wo=sce.bind(null,e.eventManager),e.sc.wc=oce.bind(null,e.eventManager),e}function OS(t){const e=x(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mce.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_ce.bind(null,e),e}class Rce{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return m(function*(){n.yt=Nd(e.databaseInfo.databaseId),n.sharedClientState=n.gc(e),n.persistence=n.yc(e),yield n.persistence.start(),n.localStore=n.Ic(e),n.gcScheduler=n.Tc(e,n.localStore),n.indexBackfillerScheduler=n.Ec(e,n.localStore)})()}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return function i$(t,e,n,r){return new kue(t,e,n,r)}(this.persistence,new r$,e.initialUser,this.yt)}yc(e){return new t$(em.Bs,this.yt)}gc(e){return new f$}terminate(){var e=this;return m(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class FS{initialize(e,n){var r=this;return m(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>R$(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=wce.bind(null,r.syncEngine),yield function nS(t,e){return rS.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ice}createDatastore(e){const n=Nd(e.databaseInfo.databaseId),r=new $ue(e.databaseInfo);return new Gue(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=a=>R$(this.syncEngine,a,0),o=p$.C()?new p$:new Uue,new que(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,a,u,c){const l=new dce(r,i,s,o,a,u);return c&&(l.dc=!0),l}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=m(function*(n){const r=x(n);D("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield bu(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function LS(t,e,n){if(!n)throw new T(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P$(t){if(!S.isDocumentKey(t))throw new T(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function O$(t){if(S.isDocumentKey(t))throw new T(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function um(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":P()}function pe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=um(t);throw new T(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}const L$=new Map;class U${constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new T(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function Mce(t,e,n,r){if(!0===e&&!0===r)throw new T(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U$({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U$(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new joe;switch(n.type){case"gapi":return new zoe(n.client,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new T(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=L$.get(e);n&&(D("ComponentProvider","Removing Datastore"),L$.delete(e),n.terminate())}(this),Promise.resolve()}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}}class qt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qt(this.firestore,e,this._query)}}class qr extends qt{constructor(e,n,r){super(e,n,pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new S(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function Oce(t,e,...n){if(t=vt(t),LS("collection","path",e),t instanceof Pd){const r=_e.fromString(e,...n);return O$(r),new qr(t,null,r)}{if(!(t instanceof at||t instanceof qr))throw new T(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return O$(r),new qr(t.firestore,null,r)}}function V$(t,e,...n){if(t=vt(t),1===arguments.length&&(e=l2.R()),LS("doc","path",e),t instanceof Pd){const r=_e.fromString(e,...n);return P$(r),new at(t,null,new S(r))}{if(!(t instanceof at||t instanceof qr))throw new T(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_e.fromString(e,...n));return P$(r),new at(t.firestore,t instanceof qr?t.converter:null,new S(r))}}class cm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):it("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class $ce{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=l2.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=m(function*(a){D("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(D("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var e=this;return m(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(m(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=xu(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function j$(t,e){return US.apply(this,arguments)}function US(){return US=m(function*(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=m(function*(s){r.isEqual(s)||(yield s$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),US.apply(this,arguments)}function H$(t,e){return VS.apply(this,arguments)}function VS(){return VS=m(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield BS(t);D("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>E$(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>E$(e.remoteStore,s)),t.onlineComponents=e}),VS.apply(this,arguments)}function BS(t){return $S.apply(this,arguments)}function $S(){return $S=m(function*(t){return t.offlineComponents||(D("FirestoreClient","Using default OfflineComponentProvider"),yield j$(t,new Rce)),t.offlineComponents}),$S.apply(this,arguments)}function lm(t){return jS.apply(this,arguments)}function jS(){return jS=m(function*(t){return t.onlineComponents||(D("FirestoreClient","Using default OnlineComponentProvider"),yield H$(t,new FS)),t.onlineComponents}),jS.apply(this,arguments)}function Mu(t){return WS.apply(this,arguments)}function WS(){return WS=m(function*(t){const e=yield lm(t),n=e.eventManager;return n.onListen=hce.bind(null,e.syncEngine),n.onUnlisten=fce.bind(null,e.syncEngine),n}),WS.apply(this,arguments)}class Qce{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Vb(this,"async_queue_retry"),this.Wc=()=>{const n=sm();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=sm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=sm();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new Et;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return m(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(n){if(!is(n))throw n;D("AsyncQueue","Operation failed with retryable error: "+n)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,it("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const i=iS.createAndSchedule(this,e,n,r,s=>this.Yc(s));return this.Uc.push(i),i}zc(){this.Kc&&P()}verifyOperationInProgress(){}Xc(){var e=this;return m(function*(){let n;do{n=e.Bc,yield n}while(n!==e.Bc)})()}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function zS(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class Ve extends Pd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Qce,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||K$(this),this._firestoreClient.terminate()}}function Xce(t,e){const r="string"==typeof t?t:e||"(default)",i=_i("object"==typeof t?t:yl(),"firestore").getImmediate({identifier:r});if(!i._initialized){const s=iF("firestore");s&&function Pce(t,e,n,r={}){var i;const s=(t=pe(t,Pd))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&uu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if("string"==typeof r.mockUserToken)o=r.mockUserToken,a=At.MOCK_USER;else{o=oF(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new T(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new At(u)}t._authCredentials=new Hoe(new u2(o,a))}}(i,...s)}return i}function ft(t){return t._firestoreClient||K$(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function K$(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new rae(t._databaseId,s,t._persistenceKey,(a=n).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;t._firestoreClient=new $ce(t._authCredentials,t._appCheckCredentials,t._queue,r)}class Po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Po(Ct.fromBase64String(e))}catch(n){throw new T(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Po(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pu{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new T(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class X${constructor(e){this._methodName=e}}class qS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}}const Zce=/^__.*__$/;class Jce{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ni(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}function J$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}class hm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new hm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return pm(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(J$(this.sa)&&Zce.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class ele{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||Nd(e)}da(e,n,r,i=!1){return new hm({sa:e,methodName:n,fa:r,path:st.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Ou(t){const e=t._freezeSettings(),n=Nd(t._databaseId);return new ele(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KS(t,e,n,r,i,s={}){const o=t.da(s.merge||s.mergeFields?2:0,e,n,i);YS("Data must be an object, but it was:",o,r);const a=ij(r,o);let u,c;if(s.merge)u=new An(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const h=XS(e,d,n);if(!o.contains(h))throw new T(w.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);oj(l,h)||l.push(h)}u=new An(l),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Jce(new zt(a),u,c)}function Oo(t,e){if(sj(t=vt(t)))return YS("Unsupported field value:",e,t),ij(t,e);if(t instanceof X$)return function(n,r){if(!J$(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let a=Oo(o,r.aa(s));null==a&&(a={nullValue:"NULL_VALUE"}),i.push(a),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=vt(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return z2(r.yt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=ze.fromDate(n);return{timestampValue:vu(r.yt,i)}}if(n instanceof ze){const i=new ze(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:vu(r.yt,i)}}if(n instanceof qS)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Po)return{bytesValue:fB(r.yt,n._byteString)};if(n instanceof at){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:db(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${um(n)}`)}(t,e)}function ij(t,e){const n={};return _2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(t,(r,i)=>{const s=Oo(i,e.ra(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function sj(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof qS||t instanceof Po||t instanceof at||t instanceof X$)}function YS(t,e,n){if(!sj(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=um(n);throw e.ha("an object"===r?t+" a custom object":t+" "+r)}var r}function XS(t,e,n){if((e=vt(e))instanceof Pu)return e._internalPath;if("string"==typeof e)return fm(t,e);throw pm("Field path arguments must be of type string or ",t,!1,void 0,n)}const ile=new RegExp("[~\\*/\\[\\]]");function fm(t,e,n){if(e.search(ile)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Pu(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new T(w.INVALID_ARGUMENT,a+t+u)}function oj(t,e){return t.some(n=>n.isEqual(e))}class ZS{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sle(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class sle extends ZS{data(){return super.data()}}function gm(t,e){return"string"==typeof e?fm(t,e):e instanceof Pu?e._internalPath:e._delegate._internalPath}class ale{convertValue(e,n="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw P()}}convertObject(e,n){const r={};return vo(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new qS(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=v2(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const n=ss(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_e.fromString(e);F(CB(r));const i=new yo(r.get(1),r.get(3)),s=new S(r.popFirst(5));return i.isEqual(n)||it(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}class Fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lu extends ZS{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gm("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class vm extends Lu{data(e={}){return super.data(e)}}class Uu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vm(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new T(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>({type:"added",doc:new vm(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Fo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||3!==o.type).map(o=>{const a=new vm(r._firestore,r._userDataWriter,o.doc.key,o.doc,new Fo(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return 0!==o.type&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:ule(o.type),doc:a,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ule(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}class gs extends ale{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function cle(t,e,n){t=pe(t,at);const r=pe(t.firestore,Ve),i=function e0(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}(t.converter,e,n);return function Ld(t,e){return function(n,r){const i=new Et;return n.asyncQueue.enqueueAndForget(m(function*(){return function pce(t,e,n){return gS.apply(this,arguments)}(yield function GS(t){return lm(t).then(e=>e.syncEngine)}(n),r,i)})),i.promise}(ft(t),e)}(r,[KS(Ou(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,je.none())])}!function(t,e=!0){au=to,Jt(new Vt("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Ve(new Goe(n.getProvider("auth-internal")),new qoe(n.getProvider("app-check-internal")),function(a,u){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new T(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(a.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Se(a2,"3.8.1",t),Se(a2,"3.8.1","esm2017")}();var ple={includeMetadataChanges:!1};function n0(t,e){return void 0===e&&(e=ple),new Be(function(n){var r=function lle(t,...e){var n,r,i;t=vt(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||zS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(zS(e[o])){const d=e[o];e[o]=null===(n=d.next)||void 0===n?void 0:n.bind(d),e[o+1]=null===(r=d.error)||void 0===r?void 0:r.bind(d),e[o+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}let u,c,l;if(t instanceof at)c=pe(t.firestore,Ve),l=pu(t._key.path),u={next:d=>{e[o]&&e[o](function t0(t,e,n){const r=n.docs.get(e._key),i=new gs(t);return new Lu(t,i,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=pe(t,qt);c=pe(d.firestore,Ve),l=d._query;const h=new gs(c);u={next:f=>{e[o]&&e[o](new Uu(c,h,d,f))},error:e[o+1],complete:e[o+2]},function aj(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new T(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(t._query)}return function(d,h,f,p){const g=new cm(p),_=new lS(h,g,f);return d.asyncQueue.enqueueAndForget(m(function*(){return function sS(t,e){return oS.apply(this,arguments)}(yield Mu(d),_)})),()=>{g.bc(),d.asyncQueue.enqueueAndForget(m(function*(){return function aS(t,e){return uS.apply(this,arguments)}(yield Mu(d),_)}))}}(ft(c),l,a,u)}(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function Ile(t,e){return void 0===e&&(e={}),function wle(t){return n0(t,{includeMetadataChanges:!0}).pipe(oe(function(e){return e.docs}))}(t).pipe(oe(function(n){return n.map(function(r){return function gj(t,e){void 0===e&&(e={});var n=t.data();return!t.exists()||"object"!=typeof n||null===n||e.idField&&(n[e.idField]=t.id),n}(r,e)})}))}class Im{constructor(e){return e}}const vj="firestore",o0=new j("angularfire2.firestore-instances");function Tle(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new Im(r)}}const Dle={provide:class Ele{constructor(){return Cl(vj)}},deps:[[new Qe,o0]]},ble={provide:Im,useFactory:function Cle(t,e){const n=El(vj,t,e);return n&&new Im(n)},deps:[[new Qe,o0],Yi]};let Sle=(()=>{class t{constructor(){Se("angularfire",Qi.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({providers:[ble,Dle]}),t})();const xle=sr(Ile,!0),Rle=sr(Oce,!0),Nle=sr(V$,!0),kle=sr(Xce,!0),Mle=sr(cle,!0);function Ple(t,e){if(1&t&&(wn(0,"tr")(1,"th"),mr(2),In(),wn(3,"th"),mr(4),In(),wn(5,"th"),mr(6),In()()),2&t){const n=e.$implicit;bc(2),Mc(n.url),bc(2),Mc(n.genre),bc(2),Mc(n.status)}}class Ud{constructor(e){this.collection=Rle(e,"urls"),this.item$=xle(this.collection)}update(e,n){this.doc$=Nle(this.collection),Mle(this.doc$,{url:e,genre:n,status:"pending"})}}Ud.\u0275fac=function(e){return new(e||Ud)(q(Im))},Ud.\u0275cmp=Xo({type:Ud,selectors:[["app-add-url"]],decls:22,vars:3,consts:[[1,"container"],["type","url"],["url",""],["name",""],["genre",""],["value","comedy"],["value","epic"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(e,n){if(1&e){const r=function tk(){return C()}();wn(0,"div",0)(1,"div"),Nc(2,"input",1,2),wn(4,"select",3,4)(6,"option",5),mr(7,"comedy"),In(),wn(8,"option",6),mr(9,"epic"),In()(),wn(10,"button",7),mf("click",function(){!function vx(t){return Z.lFrame.contextLView=t,t[8]}(r);const s=qy(3),o=qy(5);return function wx(t){return Z.lFrame.contextLView=null,t}(n.update(s.value,o.value))}),mr(11,"submit"),In()()(),wn(12,"table")(13,"tr")(14,"th"),mr(15,"url"),In(),wn(16,"th"),mr(17,"genre"),In(),wn(18,"th"),mr(19,"status"),In()(),function JN(t,e,n,r,i,s,o,a){const u=C(),c=me(),l=t+22,d=c.firstCreatePass?function FK(t,e,n,r,i,s,o,a,u){const c=e.consts,l=wa(e,t,4,o||null,Vi(c,a));Ly(e,n,l,Vi(c,u)),Ph(e,l);const d=l.tViews=Fy(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,s,o):c.data[l];Rr(d,!1);const h=u[11].createComment("");Kh(c,u,h,d),Xt(h,u),uf(u,u[l]=kN(h,u,h,d)),Nh(d)&&Py(c,u,d),null!=o&&Oy(u,d,a)}(20,Ple,7,3,"tr",8),function VM(t,e){const n=me();let r;const i=t+22;n.firstCreatePass?(r=function Z8(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=Rs(r.type)),o=Qn(q);try{const a=Vh(!1),u=s();return Vh(a),function LK(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,C(),i,u),u}finally{Qn(o)}}(21,"async"),In()}2&e&&(bc(20),Ky("ngForOf",BM(21,1,n.item$)))},dependencies:[u1,h1],styles:[".container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-auto-flow:column}.container[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:90%;margin:1em auto}@media screen and (max-width: 480px){.container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-auto-flow:row}}"]});class Vd{constructor(){this.title="yt_fe"}}Vd.\u0275fac=function(e){return new(e||Vd)},Vd.\u0275cmp=Xo({type:Vd,selectors:[["app-root"]],decls:3,vars:0,template:function(e,n){1&e&&Nc(0,"app-navbar")(1,"app-add-url")(2,"router-outlet")},dependencies:[Nw,fl,Ud]});const Ole_firebase={projectId:"yt-project0",appId:"1:303339017798:web:93111f38710436e7835c47",storageBucket:"yt-project0.appspot.com",apiKey:"AIzaSyBvy3MWPueR8-_nmctApyBHKHNCm-PDdCs",authDomain:"yt-project0.firebaseapp.com",messagingSenderId:"303339017798",measurementId:"G-QV680THTWM"};function Ule(t,e){return t===e}class Bd{constructor(e){return e}}const wj="analytics",Ij=Mp.async,$le=sr(Fte,!0),jle=sr(gL,!0),Hle=sr(Vte,!0);let a0=(()=>{class t{constructor(n,r,i){let s;this.disposables=[],Se("angularfire",Qi.full,"user-tracking"),this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),Ij().then(()=>{const o=i.get(Bd);o?this.disposables=[Use(n).subscribe(a=>{Hle(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}}return t.\u0275fac=function(n){return new(n||t)(O(ng),O(be),O(Ot))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const Ej="firebase_screen_id",u0="outlet",$d="screen_class",Cj="screen_name";let tde=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const c0={},nde=t=>{const e=[t[$d],t[u0]].join("#");if(c0.hasOwnProperty(e))return c0[e];{const n=tde++;return c0[e]=n,n}},rde=(t,e,n)=>t.events.pipe(Fr(i=>i instanceof dO)).pipe(nr(i=>{var s;const a=(null===(s=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[i.snapshot.outlet])||void 0===s?void 0:s.toString())||"",u=t.routerState.root.children.map(f=>f).find(f=>f.outlet===i.snapshot.outlet);if(!u)return $(null);let c=u;for(;c.firstChild;)c=c.firstChild;const l=c.pathFromRoot.map(f=>{var p;return null===(p=f.routeConfig)||void 0===p?void 0:p.path}).filter(f=>f).join("/")||"/",d={[Cj]:l,page_path:`/${a}`,firebase_event_origin:"auto",firebase_screen:l,[u0]:i.snapshot.outlet};e&&(d.page_title=e.getTitle());let h=u.component;if(h){if(h===op){let f=i.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=i.snapshot.component;if("string"==typeof h)return $(Object.assign(Object.assign({},d),{[$d]:h}));if(h){const f=n.resolveComponentFactory(h);return $(Object.assign(Object.assign({},d),{[$d]:f.selector}))}return $(null)}),Fr(i=>!!i),oe(i=>Object.assign({firebase_screen_class:i[$d],[Ej]:nde(i)},i)),function Fle(t,e,n,r){return et((i,s)=>{let o;e&&"function"!=typeof e?({duration:n,element:o,connector:r}=e):o=e;const a=new Map,u=p=>{a.forEach(p),p(s)},c=p=>u(g=>g.error(p));let l=0,d=!1;const h=new NA(s,p=>{try{const g=t(p);let _=a.get(g);if(!_){a.set(g,_=r?r():new br);const I=function f(p,g){const _=new Be(I=>{l++;const E=g.subscribe(I);return()=>{E.unsubscribe(),0==--l&&d&&h.unsubscribe()}});return _.key=p,_}(g,_);if(s.next(I),n){const E=tt(_,()=>{_.complete(),E?.unsubscribe()},void 0,void 0,()=>a.delete(g));h.add(qn(n(I)).subscribe(E))}}_.next(o?o(p):p)}catch(g){c(g)}},()=>u(p=>p.complete()),c,()=>a.clear(),()=>(d=!0,0===l));i.subscribe(h)})}(i=>i[u0]),Tt(i=>i.pipe(function Lle(t,e=Fi){return t=t??Ule,et((n,r)=>{let i,s=!0;n.subscribe(tt(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}((s,o)=>JSON.stringify(s)===JSON.stringify(o)),j1(void 0),function Vle(){return et((t,e)=>{let n,r=!1;t.subscribe(tt(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}(),oe(([s,o])=>s?Object.assign({firebase_previous_class:s[$d],firebase_previous_screen:s[Cj],firebase_previous_id:s[Ej]},o):o))));let Tj=(()=>{class t{constructor(n,r,i,s,o,a){Se("angularfire",Qi.full,"screen-tracking"),Ij().then(()=>{const u=a.get(Bd);!n||!u||s.runOutsideAngular(()=>{this.disposable=rde(n,r,i).pipe(nr(c=>PA(this,void 0,void 0,function*(){return o&&(yield o.initialized),jle(u,"screen_view",c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(O(Tn,8),O(hw,8),O(ga),O(be),O(a0,8),O(Ot))},t.\u0275prov=W({token:t,factory:t.\u0275fac}),t})();const l0=new j("angularfire2.analytics-instances");function sde(t){return(e,n)=>{if(!Mp.sync())return null;const r=e.runOutsideAngular(()=>t(n));return new Bd(r)}}const ode={provide:class Ble{constructor(){return Cl(wj)}},deps:[[new Qe,l0]]},ade={provide:Bd,useFactory:function ide(t,e){if(!Mp.sync())return null;const n=El(wj,t,e);return n&&new Bd(n)},deps:[[new Qe,l0],Yi]};let ude=(()=>{class t{constructor(n,r){Se("angularfire",Qi.full,"analytics")}}return t.\u0275fac=function(n){return new(n||t)(O(Tj,8),O(a0,8))},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({providers:[ade,ode,{provide:jc,useValue:Mp.async,multi:!0}]}),t})();const Dj="@firebase/database";let d0="";class dde{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ut(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:gl(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class hde{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return gi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Sj=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new dde(e)}}catch{}return new hde},Lo=Sj("localStorage"),h0=Sj("sessionStorage"),Vu=new Zs("@firebase/database"),Aj=function(){let t=1;return function(){return t++}}(),xj=function(t){const e=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,A(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new QX;n.update(e);const r=n.digest();return mp.encodeByteArray(r)},jd=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=jd.apply(null,r):e+="object"==typeof r?Ut(r):r,e+=" "}return e};let Uo=null,Rj=!0;const Nt=function(...t){if(!0===Rj&&(Rj=!1,null===Uo&&!0===h0.get("logging_enabled")&&function(t,e){A(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Vu.logLevel=fe.VERBOSE,Uo=Vu.log.bind(Vu),e&&h0.set("logging_enabled",!0)):"function"==typeof t?Uo=t:(Uo=null,h0.remove("logging_enabled"))}(!0)),Uo){const e=jd.apply(null,t);Uo(e)}},Hd=function(t){return function(...e){Nt(t,...e)}},f0=function(...t){const e="FIREBASE INTERNAL ERROR: "+jd(...t);Vu.error(e)},Kr=function(...t){const e=`FIREBASE FATAL ERROR: ${jd(...t)}`;throw Vu.error(e),new Error(e)},nn=function(...t){const e="FIREBASE WARNING: "+jd(...t);Vu.warn(e)},Em=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},ms="[MIN_NAME]",Pi="[MAX_NAME]",Vo=function(t,e){if(t===e)return 0;if(t===ms||e===Pi)return-1;if(e===ms||t===Pi)return 1;{const n=Pj(t),r=Pj(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1}},gde=function(t,e){return t===e?0:t<e?-1:1},Gd=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ut(e))},p0=function(t){if("object"!=typeof t||null===t)return Ut(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)0!==r&&(n+=","),n+=Ut(e[r]),n+=":",n+=p0(t[e[r]]);return n+="}",n},kj=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function kt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Mj=function(t){A(!Em(t),"Invalid JSON number");const r=1023;let i,s,o,a,u;0===t?(s=0,o=0,i=1/t==-1/0?1:0):(i=t<0,(t=Math.abs(t))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(t/Math.pow(2,-1074))));const c=[];for(u=52;u;u-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(u=11;u;u-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const l=c.join("");let d="";for(u=0;u<64;u+=8){let h=parseInt(l.substr(u,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},vde=new RegExp("^-?(0*)\\d{1,10}$"),Pj=function(t){if(vde.test(t)){const e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},Bu=function(t){try{t()}catch(e){setTimeout(()=>{throw nn("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Wd=function(t,e){const n=setTimeout(t,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class Cde{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){nn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Tde{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Nt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nn(e)}}let zd=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return t.OWNER="owner",t})();const Vj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,jj="websocket",Hj="long_polling";class m0{constructor(e,n,r,i,s=!1,o="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lo.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Gj(t,e,n){let r;if(A("string"==typeof e,"typeof type must == string"),A("object"==typeof n,"typeof params must == object"),e===jj)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Hj)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function Dde(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);const i=[];return kt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class bde{constructor(){this.counters_={}}incrementCounter(e,n=1){gi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return OX(this.counters_)}}const _0={},y0={};function v0(t){const e=t.toString();return _0[e]||(_0[e]=new bde),_0[e]}class Ade{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Bu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class _s{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hd(e),this.stats_=v0(n),this.urlFn=u=>(this.appCheckToken&&(u.ac=this.appCheckToken),Gj(n,Hj,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Ade(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{let e=!1;const n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new w0((...s)=>{const[o,a,u,c,l]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=u;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Vj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_s.forceAllow_=!0}static forceDisallow(){_s.forceDisallow_=!0}static isAvailable(){return!(!_s.forceAllow_&&(_s.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Ut(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=tF(n),i=kj(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Ut(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class w0{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Aj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=w0.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Nt("frame writing exception"),a.stack&&Nt(a.stack),Nt(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Nt("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Nt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Tm=null;typeof MozWebSocket<"u"?Tm=MozWebSocket:typeof WebSocket<"u"&&(Tm=WebSocket);let $u=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hd(this.connId),this.stats_=v0(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){const a={v:"5"};return typeof location<"u"&&location.hostname&&Vj.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),Gj(n,jj,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lo.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Tm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Tm&&!t.forceDisallow_}static previouslyFailed(){return Lo.isInMemoryStorage||!0===Lo.get("previous_websocket_failure")}markConnectionHealthy(){Lo.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=gl(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(A(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Ut(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=kj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t})(),Xj=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[_s,$u]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=$u&&$u.isAvailable();let i=r&&!$u.previouslyFailed();if(n.webSocketOnly&&(r||nn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[$u];else{const s=this.transports_=[];for(const o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return t.globalTransportInitialized_=!1,t})();class iH{constructor(e,n,r,i,s,o,a,u,c,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hd("c:"+this.id+":"),this.transportManager_=new Xj(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Gd("t",e),r=Gd("d",e);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Gd("t",e),r=Gd("d",e);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Gd("t",e);if("d"in e){const r=e.d;if("h"===n)this.onHandshake_(r);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?f0("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):f0("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&nn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class sH{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}class oH{constructor(e){this.allowedEvents_=e,this.listeners_={},A(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){A(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class Dm extends oH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Gw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dm}getInitialEvent(e){return A("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Te{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function ve(){return new Te("")}function ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ys(t){return t.pieces_.length-t.pieceNum_}function Re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Te(t.pieces_,e)}function E0(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qd(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function cH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Te(e,0)}function He(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Te)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Te(n,0)}function ue(t){return t.pieceNum_>=t.pieces_.length}function mn(t,e){const n=ae(t),r=ae(e);if(null===n)return e;if(n===r)return mn(Re(t),Re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function C0(t,e){if(ys(t)!==ys(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ar(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(ys(t)>ys(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Xde{constructor(e,n){this.errorPrefix_=n,this.parts_=qd(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Cp(this.parts_[r]);lH(this)}}function lH(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Bo(t))}function Bo(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}class T0 extends oH{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new T0}getInitialEvent(e){return A("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Kd=1e3;let Sm,$o=(()=>{class t extends sH{constructor(n,r,i,s,o,a,u,c){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Hd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");T0.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Dm.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Ut(o)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();const r=new Ka,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{const u=a.d;"ok"===a.s?r.resolve(u):r.reject(u)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(n,r,i,s){this.initConnection_();const o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),A(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,u=>{const c=u.d,l=u.s;t.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),"ok"!==l&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,c))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&gi(n,"w")){const i=Qa(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();nn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(t){const e=wp(t).claims;return"object"==typeof e&&!0===e.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(t){const n=wp(t).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),A(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);const o={p:n};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ut(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):f0("Unrecognized action received from server: "+Ut(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kd,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Kd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Kd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return m(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+t.nextConnectionId_++,a=n.lastSessionId;let u=!1,c=null;const l=function(){c?c.close():(u=!0,s())};n.realtime_={close:l,sendRequest:function(f){A(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);u?Nt("getToken() completed but was canceled"):(Nt("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,c=new iH(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,s,g=>{nn(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),u||(n.repoInfo_.nodeAdmin&&nn(f),l())}}})()}interrupt(n){Nt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Nt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],qw(this.interruptReasons_)&&(this.reconnectDelay_=Kd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(o=>p0(o)).join("$"):"default";const s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){const i=new Te(n).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Nt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Nt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+d0.replace(/\./g,"-")]=1,Gw()?n["framework.cordova"]=1:aF()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Dm.getInstance().currentlyOnline();return qw(this.interruptReasons_)&&n}}return t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t})();class le{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new le(e,n)}}class bm{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new le(ms,e),i=new le(ms,n);return 0!==this.compare(r,i)}minPost(){return le.MIN}}class fH extends bm{static get __EMPTY_NODE(){return Sm}static set __EMPTY_NODE(e){Sm=e}compare(e,n){return Vo(e.name,n.name)}isDefinedOn(e){throw qa("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return le.MIN}maxPost(){return new le(Pi,Sm)}makePost(e,n){return A("string"==typeof e,"KeyIndex indexValue must always be a string."),new le(e,Sm)}toString(){return".key"}}const Qr=new fH;class Am{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let b0,Cr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Nn.EMPTY_NODE,this.right=o??Nn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this;const o=i(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Nn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})();class Nn{constructor(e,n=Nn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Nn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Cr.BLACK,null,null))}remove(e){return new Nn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Am(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Am(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Am(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Am(this.root_,null,this.comparator_,!0,e)}}function she(t,e){return Vo(t.name,e.name)}function D0(t,e){return Vo(t,e)}Nn.EMPTY_NODE=new class ihe{copy(e,n,r,i,s){return this}insert(e,n,r){return new Cr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const pH=function(t){return"number"==typeof t?"number:"+Mj(t):"string:"+t},gH=function(t){if(t.isLeafNode()){const e=t.val();A("string"==typeof e||"number"==typeof e||"object"==typeof e&&gi(e,".sv"),"Priority must be a string or number.")}else A(t===b0||t.isEmpty(),"priority of unexpected type.");A(t===b0||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let mH,_H,yH,ju=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,A(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),gH(this.priorityNode_)}static set __childrenNodeConstructor(n){mH=n}static get __childrenNodeConstructor(){return mH}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ue(n)?this:".priority"===ae(n)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=ae(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(A(".priority"!==i||1===ys(n),".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Re(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+pH(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?Mj(this.value_):this.value_,this.lazyHash_=xj(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(A(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return A(s>=0,"Unknown leaf type: "+r),A(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t})();const Oe=new class che extends bm{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return 0===s?Vo(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return le.MIN}maxPost(){return new le(Pi,new ju("[PRIORITY-POST]",yH))}makePost(e,n){const r=_H(e);return new le(n,new ju("[PRIORITY-POST]",r))}toString(){return".priority"}},lhe=Math.log(2);class dhe{constructor(e){this.count=parseInt(Math.log(e+1)/lhe,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xm=function(t,e,n,r){t.sort(e);const i=function(u,c){const l=c-u;let d,h;if(0===l)return null;if(1===l)return d=t[u],h=n?n(d):d,new Cr(h,d.node,Cr.BLACK,null,null);{const f=parseInt(l/2,10)+u,p=i(u,f),g=i(f+1,c);return d=t[f],h=n?n(d):d,new Cr(h,d.node,Cr.BLACK,p,g)}},a=function(u){let c=null,l=null,d=t.length;const h=function(p,g){const _=d-p,I=d;d-=p;const E=i(_+1,I),y=t[_],N=n?n(y):y;f(new Cr(N,y.node,g,null,E))},f=function(p){c?(c.left=p,c=p):(l=p,c=p)};for(let p=0;p<u.count;++p){const g=u.nextBitIsOne(),_=Math.pow(2,u.count-(p+1));g?h(_,Cr.BLACK):(h(_,Cr.BLACK),h(_,Cr.RED))}return l}(new dhe(t.length));return new Nn(r||e,a)};let S0;const Hu={};class Oi{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return A(Hu&&Oe,"ChildrenNode.ts has not been loaded"),S0=S0||new Oi({".priority":Hu},{".priority":Oe}),S0}get(e){const n=Qa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Nn?n:null}hasIndex(e){return gi(this.indexSet_,e.toString())}addIndex(e,n){A(e!==Qr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(le.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?xm(r,e.getCompare()):Hu;const u=e.toString(),c=Object.assign({},this.indexSet_);c[u]=e;const l=Object.assign({},this.indexes_);return l[u]=a,new Oi(l,c)}addToIndexes(e,n){const r=Ip(this.indexes_,(i,s)=>{const o=Qa(this.indexSet_,s);if(A(o,"Missing index implementation for "+s),i===Hu){if(o.isDefinedOn(e.node)){const a=[],u=n.getIterator(le.Wrap);let c=u.getNext();for(;c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),xm(a,o.getCompare())}return Hu}{const a=n.get(e.name);let u=i;return a&&(u=u.remove(new le(e.name,a))),u.insert(e,e.node)}});return new Oi(r,this.indexSet_)}removeFromIndexes(e,n){const r=Ip(this.indexes_,i=>{if(i===Hu)return i;{const s=n.get(e.name);return s?i.remove(new le(e.name,s)):i}});return new Oi(r,this.indexSet_)}}let Qd,te=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gH(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qd||(Qd=new t(new Nn(D0),null,Oi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qd}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?Qd:r}}getChild(n){const r=ae(n);return null===r?this:this.getImmediateChild(r).getChild(Re(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(A(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new le(n,r);let s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?Qd:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){const i=ae(n);if(null===i)return r;{A(".priority"!==ae(n)||1===ys(n),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Re(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(Oe,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){const a=[];for(const u in r)a[u]=r[u];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+pH(this.getPriority().val())+":"),this.forEachChild(Oe,(r,i)=>{const s=i.hash();""!==s&&(n+=":"+r+":"+s)}),this.lazyHash_=""===n?"":xj(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new le(n,r));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new le(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new le(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,le.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,le.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Yd?-1:0}withIndex(n){if(n===Qr||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Qr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Oe),s=r.getIterator(Oe);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(n){return n===Qr?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})();const Yd=new class hhe extends te{constructor(){super(new Nn(D0),te.EMPTY_NODE,Oi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return te.EMPTY_NODE}isEmpty(){return!1}};function qe(t,e=null){if(null===t)return te.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),A(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ju(t,qe(e));if(t instanceof Array){let n=te.EMPTY_NODE;return kt(t,(r,i)=>{if(gi(t,r)&&"."!==r.substring(0,1)){const s=qe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(qe(e))}{const n=[];let r=!1;if(kt(t,(o,a)=>{if("."!==o.substring(0,1)){const u=qe(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new le(o,u)))}}),0===n.length)return te.EMPTY_NODE;const s=xm(n,she,o=>o.name,D0);if(r){const o=xm(n,Oe.getCompare());return new te(s,qe(e),new Oi({".priority":o},{".priority":Oe}))}return new te(s,qe(e),Oi.Default)}}Object.defineProperties(le,{MIN:{value:new le(ms,te.EMPTY_NODE)},MAX:{value:new le(Pi,Yd)}}),fH.__EMPTY_NODE=te.EMPTY_NODE,ju.__childrenNodeConstructor=te,function ohe(t){b0=t}(Yd),function uhe(t){yH=t}(Yd),function ahe(t){_H=t}(qe);class A0 extends bm{constructor(e){super(),this.indexPath_=e,A(!ue(e)&&".priority"!==ae(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return 0===s?Vo(e.name,n.name):s}makePost(e,n){const r=qe(e),i=te.EMPTY_NODE.updateChild(this.indexPath_,r);return new le(n,i)}maxPost(){const e=te.EMPTY_NODE.updateChild(this.indexPath_,Yd);return new le(Pi,e)}toString(){return qd(this.indexPath_,0).join("/")}}const x0=new class phe extends bm{compare(e,n){const r=e.node.compareTo(n.node);return 0===r?Vo(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return le.MIN}maxPost(){return le.MAX}makePost(e,n){const r=qe(e);return new le(n,r)}toString(){return".value"}};function Zd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}class N0{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Oe}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ms}hasEnd(){return this.endSet_}getIndexEndValue(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pi}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Oe}copy(){const e=new N0;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wH(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Oe?n="$priority":t.index_===x0?n="$value":t.index_===Qr?n="$key":(A(t.index_ instanceof A0,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Ut(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Ut(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Ut(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Ut(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Ut(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function IH(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Oe&&(e.i=t.index_.toString()),e}class Nm extends sH{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Hd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Nm.getListenId_(e,r),a={};this.listens_[o]=a;const u=wH(e._queryParams);this.restRequest_(s+".json",u,(c,l)=>{let d=l;if(404===c&&(d=null,c=null),null===c&&this.onDataUpdate_(s,d,!1,r),Qa(this.listens_,o)===a){let h;h=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(h,null)}})}unlisten(e,n){const r=Nm.getListenId_(e,n);delete this.listens_[r]}get(e){const n=wH(e._queryParams),r=e._path.toString(),i=new Ka;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_l(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=gl(a.responseText)}catch{nn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else 401!==a.status&&404!==a.status&&nn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class Ehe{constructor(){this.rootNode_=te.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function km(){return{value:null,children:new Map}}function Wu(t,e,n){if(ue(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{const r=ae(e);t.children.has(r)||t.children.set(r,km()),Wu(t.children.get(r),e=Re(e),n)}}function O0(t,e,n){null!==t.value?n(e,t.value):function Che(t,e){t.children.forEach((n,r)=>{e(r,n)})}(t,(r,i)=>{O0(i,new Te(e.toString()+"/"+r),n)})}class The{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&kt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}class She{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new The(e);const r=1e4+2e4*Math.random();Wd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;kt(e,(i,s)=>{s>0&&gi(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Wd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ur=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ur||(ur={})),ur))();function U0(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}class Mm{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=ur.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ue(this.path)){if(null!=this.affectedTree.value)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Te(e));return new Mm(ve(),n,this.revert)}}return A(ae(this.path)===e,"operationForChild called for unrelated child."),new Mm(Re(this.path),this.affectedTree,this.revert)}}class jo{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=ur.OVERWRITE}operationForChild(e){return ue(this.path)?new jo(this.source,ve(),this.snap.getImmediateChild(e)):new jo(this.source,Re(this.path),this.snap)}}class zu{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=ur.MERGE}operationForChild(e){if(ue(this.path)){const n=this.children.subtree(new Te(e));return n.isEmpty()?null:n.value?new jo(this.source,ve(),n.value):new zu(this.source,ve(),n)}return A(ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new zu(this.source,Re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class vs{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ue(e))return this.isFullyInitialized()&&!this.filtered_;const n=ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function th(t,e,n,r,i,s){const o=r.filter(a=>a.type===n);o.sort((a,u)=>function Nhe(t,e,n){if(null==e.childName||null==n.childName)throw qa("Should only compare child_ events.");const r=new le(e.childName,e.snapshotNode),i=new le(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,a,u)),o.forEach(a=>{const u=function Rhe(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(u,t.query_))})})}function Pm(t,e){return{eventCache:t,serverCache:e}}function nh(t,e,n,r){return Pm(new vs(e,n,r),t.serverCache)}function CH(t,e,n,r){return Pm(t.eventCache,new vs(e,n,r))}function Om(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ho(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}let V0;class Fe{constructor(e,n=(()=>(V0||(V0=new Nn(gde)),V0))()){this.value=e,this.children=n}static fromObject(e){let n=new Fe(null);return kt(e,(r,i)=>{n=n.set(new Te(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:ve(),value:this.value};if(ue(e))return null;{const r=ae(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Re(e),n);return null!=s?{path:He(new Te(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ue(e))return this;{const n=ae(e),r=this.children.get(n);return null!==r?r.subtree(Re(e)):new Fe(null)}}set(e,n){if(ue(e))return new Fe(n,this.children);{const r=ae(e),s=(this.children.get(r)||new Fe(null)).set(Re(e),n),o=this.children.insert(r,s);return new Fe(this.value,o)}}remove(e){if(ue(e))return this.children.isEmpty()?new Fe(null):new Fe(null,this.children);{const n=ae(e),r=this.children.get(n);if(r){const i=r.remove(Re(e));let s;return s=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&s.isEmpty()?new Fe(null):new Fe(this.value,s)}return this}}get(e){if(ue(e))return this.value;{const n=ae(e),r=this.children.get(n);return r?r.get(Re(e)):null}}setTree(e,n){if(ue(e))return n;{const r=ae(e),s=(this.children.get(r)||new Fe(null)).setTree(Re(e),n);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Fe(this.value,o)}}fold(e){return this.fold_(ve(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(He(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ve(),n)}findOnPath_(e,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(ue(e))return null;{const s=ae(e),o=this.children.get(s);return o?o.findOnPath_(Re(e),He(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ve(),n)}foreachOnPath_(e,n,r){if(ue(e))return this;{this.value&&r(n,this.value);const i=ae(e),s=this.children.get(i);return s?s.foreachOnPath_(Re(e),He(n,i),r):new Fe(null)}}foreach(e){this.foreach_(ve(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(He(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}class Tr{constructor(e){this.writeTree_=e}static empty(){return new Tr(new Fe(null))}}function rh(t,e,n){if(ue(e))return new Tr(new Fe(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=mn(i,e);return s=s.updateChild(o,n),new Tr(t.writeTree_.set(i,s))}{const i=new Fe(n),s=t.writeTree_.setTree(e,i);return new Tr(s)}}}function B0(t,e,n){let r=t;return kt(n,(i,s)=>{r=rh(r,He(e,i),s)}),r}function TH(t,e){if(ue(e))return Tr.empty();{const n=t.writeTree_.setTree(e,new Fe(null));return new Tr(n)}}function $0(t,e){return null!=Go(t,e)}function Go(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(mn(n.path,e)):null}function DH(t){const e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Oe,(r,i)=>{e.push(new le(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new le(r,i.value))}),e}function ws(t,e){if(ue(e))return t;{const n=Go(t,e);return new Tr(null!=n?new Fe(n):t.writeTree_.subtree(e))}}function j0(t){return t.writeTree_.isEmpty()}function qu(t,e){return bH(ve(),t.writeTree_,e)}function bH(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?(A(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):n=bH(He(t,i),s,n)}),!n.getChild(t).isEmpty()&&null!==r&&(n=n.updateChild(He(t,".priority"),r)),n}}function Fm(t,e){return NH(e,t)}function Lhe(t,e){if(t.snap)return ar(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&ar(He(t.path,n),e))return!0;return!1}function Vhe(t){return t.visible}function SH(t,e,n){let r=Tr.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let a;if(s.snap)ar(n,o)?(a=mn(n,o),r=rh(r,a,s.snap)):ar(o,n)&&(a=mn(o,n),r=rh(r,ve(),s.snap.getChild(a)));else{if(!s.children)throw qa("WriteRecord should have .snap or .children");if(ar(n,o))a=mn(n,o),r=B0(r,a,s.children);else if(ar(o,n))if(a=mn(o,n),ue(a))r=B0(r,ve(),s.children);else{const u=Qa(s.children,ae(a));if(u){const c=u.getChild(Re(a));r=rh(r,ve(),c)}}}}}return r}function AH(t,e,n,r,i){if(r||i){const s=ws(t.visibleWrites,e);return!i&&j0(s)?n:i||null!=n||$0(s,ve())?qu(SH(t.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(ar(c.path,e)||ar(e,c.path))},e),n||te.EMPTY_NODE):null}{const s=Go(t.visibleWrites,e);if(null!=s)return s;{const o=ws(t.visibleWrites,e);return j0(o)?n:null!=n||$0(o,ve())?qu(o,n||te.EMPTY_NODE):null}}}function Lm(t,e,n,r){return AH(t.writeTree,t.treePath,e,n,r)}function H0(t,e){return function Bhe(t,e,n){let r=te.EMPTY_NODE;const i=Go(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Oe,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=ws(t.visibleWrites,e);return n.forEachChild(Oe,(o,a)=>{const u=qu(ws(s,new Te(o)),a);r=r.updateImmediateChild(o,u)}),DH(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return DH(ws(t.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(t.writeTree,t.treePath,e)}function xH(t,e,n,r){return function $he(t,e,n,r,i){A(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=He(e,n);if($0(t.visibleWrites,s))return null;{const o=ws(t.visibleWrites,s);return j0(o)?i.getChild(n):qu(o,i.getChild(n))}}(t.writeTree,t.treePath,e,n,r)}function Um(t,e){return function Hhe(t,e){return Go(t.visibleWrites,e)}(t.writeTree,He(t.treePath,e))}function G0(t,e,n){return function jhe(t,e,n,r){const i=He(e,n),s=Go(t.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?qu(ws(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function RH(t,e){return NH(He(t.treePath,e),t.writeTree)}function NH(t,e){return{treePath:t,writeTree:e}}class qhe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;A("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),A(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(r,Zd(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(r,function Xd(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}(r,i.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(r,function Gu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}(r,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw qa("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Zd(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const kH=new class Khe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}};class W0{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new vs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return G0(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ho(this.viewCache_),s=function zhe(t,e,n,r,i,s){return function Ghe(t,e,n,r,i,s,o){let a;const u=ws(t.visibleWrites,e),c=Go(u,ve());if(null!=c)a=c;else{if(null==n)return[];a=qu(u,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&l.length<i;)0!==d(f,r)&&l.push(f),f=h.getNext();return l}}(t.writeTree,t.treePath,e,n,r,i,s)}(this.writes_,i,n,1,r,e);return 0===s.length?null:s[0]}}function MH(t,e,n,r,i,s){const o=e.eventCache;if(null!=Um(r,n))return e;{let a,u;if(ue(n))if(A(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Ho(e),d=H0(r,c instanceof te?c:te.EMPTY_NODE);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const c=Lm(r,Ho(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=ae(n);if(".priority"===c){A(1===ys(n),"Can't have a priority with additional path components");const l=o.getNode();u=e.serverCache.getNode();const d=xH(r,n,l,u);a=null!=d?t.filter.updatePriority(l,d):o.getNode()}else{const l=Re(n);let d;if(o.isCompleteForChild(c)){u=e.serverCache.getNode();const h=xH(r,n,o.getNode(),u);d=null!=h?o.getNode().getImmediateChild(c).updateChild(l,h):o.getNode().getImmediateChild(c)}else d=G0(r,c,e.serverCache);a=null!=d?t.filter.updateChild(o.getNode(),c,d,l,i,s):o.getNode()}}return nh(e,a,o.isFullyInitialized()||ue(n),t.filter.filtersNodes())}}function Vm(t,e,n,r,i,s,o,a){const u=e.serverCache;let c;const l=o?t.filter:t.filter.getIndexedFilter();if(ue(n))c=l.updateFullNode(u.getNode(),r,null);else if(l.filtersNodes()&&!u.isFiltered()){const f=u.getNode().updateChild(n,r);c=l.updateFullNode(u.getNode(),f,null)}else{const f=ae(n);if(!u.isCompleteForPath(n)&&ys(n)>1)return e;const p=Re(n),_=u.getNode().getImmediateChild(f).updateChild(p,r);c=".priority"===f?l.updatePriority(u.getNode(),_):l.updateChild(u.getNode(),f,_,p,kH,null)}const d=CH(e,c,u.isFullyInitialized()||ue(n),l.filtersNodes());return MH(t,d,n,i,new W0(i,d,s),a)}function z0(t,e,n,r,i,s,o){const a=e.eventCache;let u,c;const l=new W0(i,e,s);if(ue(n))c=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=nh(e,c,!0,t.filter.filtersNodes());else{const d=ae(n);if(".priority"===d)c=t.filter.updatePriority(e.eventCache.getNode(),r),u=nh(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=Re(n),f=a.getNode().getImmediateChild(d);let p;if(ue(h))p=r;else{const g=l.getCompleteChild(d);p=null!=g?".priority"===E0(h)&&g.getChild(cH(h)).isEmpty()?g:g.updateChild(h,r):te.EMPTY_NODE}u=f.equals(p)?e:nh(e,t.filter.updateChild(a.getNode(),d,p,h,l,o),a.isFullyInitialized(),t.filter.filtersNodes())}}return u}function PH(t,e){return t.eventCache.isCompleteForChild(e)}function OH(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function q0(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,u=e;c=ue(n)?r:new Fe(null).setTree(n,r);const l=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const p=OH(0,e.serverCache.getNode().getImmediateChild(d),h);u=Vm(t,u,new Te(d),p,i,s,o,a)}}),c.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&null===h.value;if(!l.hasChild(d)&&!f){const g=OH(0,e.serverCache.getNode().getImmediateChild(d),h);u=Vm(t,u,new Te(d),g,i,s,o,a)}}),u}function ofe(t,e){const n=Ho(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ue(e)&&!n.getImmediateChild(ae(e)).isEmpty())?n.getChild(e):null}function UH(t,e,n,r){e.type===ur.MERGE&&null!==e.source.queryId&&(A(Ho(t.viewCache_),"We should always have a full cache before handling merges"),A(Om(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=function Xhe(t,e,n,r,i){const s=new qhe;let o,a;if(n.type===ur.OVERWRITE){const c=n;c.source.fromUser?o=z0(t,e,c.path,c.snap,r,i,s):(A(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!ue(c.path),o=Vm(t,e,c.path,c.snap,r,i,a,s))}else if(n.type===ur.MERGE){const c=n;c.source.fromUser?o=function Jhe(t,e,n,r,i,s,o){let a=e;return r.foreach((u,c)=>{const l=He(n,u);PH(e,ae(l))&&(a=z0(t,a,l,c,i,s,o))}),r.foreach((u,c)=>{const l=He(n,u);PH(e,ae(l))||(a=z0(t,a,l,c,i,s,o))}),a}(t,e,c.path,c.children,r,i,s):(A(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=q0(t,e,c.path,c.children,r,i,a,s))}else if(n.type===ur.ACK_USER_WRITE){const c=n;o=c.revert?function nfe(t,e,n,r,i,s){let o;if(null!=Um(r,n))return e;{const a=new W0(r,e,i),u=e.eventCache.getNode();let c;if(ue(n)||".priority"===ae(n)){let l;if(e.serverCache.isFullyInitialized())l=Lm(r,Ho(e));else{const d=e.serverCache.getNode();A(d instanceof te,"serverChildren would be complete if leaf node"),l=H0(r,d)}c=t.filter.updateFullNode(u,l,s)}else{const l=ae(n);let d=G0(r,l,e.serverCache);null==d&&e.serverCache.isCompleteForChild(l)&&(d=u.getImmediateChild(l)),c=null!=d?t.filter.updateChild(u,l,d,Re(n),a,s):e.eventCache.getNode().hasChild(l)?t.filter.updateChild(u,l,te.EMPTY_NODE,Re(n),a,s):u,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Lm(r,Ho(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Um(r,ve()),nh(e,c,o,t.filter.filtersNodes())}}(t,e,c.path,r,i,s):function efe(t,e,n,r,i,s,o){if(null!=Um(i,n))return e;const a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ue(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Vm(t,e,n,u.getNode().getChild(n),i,s,a,o);if(ue(n)){let c=new Fe(null);return u.getNode().forEachChild(Qr,(l,d)=>{c=c.set(new Te(l),d)}),q0(t,e,n,c,i,s,a,o)}return e}{let c=new Fe(null);return r.foreach((l,d)=>{const h=He(n,l);u.isCompleteForPath(h)&&(c=c.set(l,u.getNode().getChild(h)))}),q0(t,e,n,c,i,s,a,o)}}(t,e,c.path,c.affectedTree,r,i,s)}else{if(n.type!==ur.LISTEN_COMPLETE)throw qa("Unknown operation type: "+n.type);o=function tfe(t,e,n,r,i){const s=e.serverCache;return MH(t,CH(e,s.getNode(),s.isFullyInitialized()||ue(n),s.isFiltered()),n,r,kH,i)}(t,e,n.path,r,s)}const u=s.getChanges();return function Zhe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Om(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function vH(t){return{type:"value",snapshotNode:t}}(Om(e)))}}(e,o,u),{viewCache:o,changes:u}}(t.processor_,i,e,n,r);return function Yhe(t,e){A(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}(t.processor_,s.viewCache),A(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,function VH(t,e,n,r){return function xhe(t,e,n,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function ghe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}(o.childName,o.snapshotNode))}),th(t,i,"child_removed",e,r,n),th(t,i,"child_added",e,r,n),th(t,i,"child_moved",s,r,n),th(t,i,"child_changed",e,r,n),th(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}(t,s.changes,s.viewCache.eventCache.getNode(),null)}let Bm,jm;function K0(t,e,n,r){const i=e.source.queryId;if(null!==i){const s=t.views.get(i);return A(null!=s,"SyncTree gave us an op for an invalid query."),UH(s,e,n,r)}{let s=[];for(const o of t.views.values())s=s.concat(UH(o,e,n,r));return s}}function Is(t,e){let n=null;for(const r of t.views.values())n=n||ofe(r,e);return n}class WH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fe(null),this.pendingWriteTree_=function Whe(){return{visibleWrites:Tr.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Q0(t,e,n,r,i){return function Mhe(t,e,n,r,i){A(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=rh(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Ku(t,new jo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Cs(t,e,n=!1){const r=function Ohe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function Fhe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);A(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Lhe(a,r.path)?i=!1:ar(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function Uhe(t){t.visibleWrites=SH(t.allWrites,Vhe,ve()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=TH(t.visibleWrites,r.path):kt(r.children,u=>{t.visibleWrites=TH(t.visibleWrites,He(r.path,u))}),!0))}(t.pendingWriteTree_,e)){let s=new Fe(null);return null!=r.snap?s=s.set(ve(),!0):kt(r.children,o=>{s=s.set(new Te(o),!0)}),Ku(t,new Mm(r.path,s,n))}return[]}function ih(t,e,n){return Ku(t,new jo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Gm(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Is(a,mn(o,e));if(c)return c});return AH(i,e,s,n,!0)}function Ku(t,e){return qH(e,t.syncPointTree_,null,Fm(t.pendingWriteTree_,ve()))}function qH(t,e,n,r){if(ue(t.path))return KH(t,e,n,r);{const i=e.get(ve());null==n&&null!=i&&(n=Is(i,ve()));let s=[];const o=ae(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){const c=n?n.getImmediateChild(o):null,l=RH(r,o);s=s.concat(qH(a,u,c,l))}return i&&(s=s.concat(K0(i,t,r,n))),s}}function KH(t,e,n,r){const i=e.get(ve());null==n&&null!=i&&(n=Is(i,ve()));let s=[];return e.children.inorderTraversal((o,a)=>{const u=n?n.getImmediateChild(o):null,c=RH(r,o),l=t.operationForChild(o);l&&(s=s.concat(KH(l,a,u,c)))}),i&&(s=s.concat(K0(i,t,r,n))),s}function X0(t,e){return t.tagToQueryMap.get(e)}function Z0(t){const e=t.indexOf("$");return A(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Te(t.substr(0,e))}}function J0(t,e,n){const r=t.syncPointTree_.get(e);return A(r,"Missing sync point for query tag that we're tracking"),K0(r,n,Fm(t.pendingWriteTree_,e),null)}class eA{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new eA(n)}node(){return this.node_}}class tA{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=He(this.path_,e);return new tA(this.syncTree_,n)}node(){return Gm(this.syncTree_,this.path_)}}const YH=function(t,e,n){return t&&"object"==typeof t?(A(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Afe(t[".sv"],e,n):"object"==typeof t[".sv"]?xfe(t[".sv"],e):void A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Afe=function(t,e,n){if("timestamp"===t)return n.timestamp;A(!1,"Unexpected server value: "+t)},xfe=function(t,e,n){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;"number"!=typeof r&&A(!1,"Unexpected increment value: "+r);const i=e.node();if(A(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},nA=function(t,e,n){return rA(t,new eA(e),n)};function rA(t,e,n){const r=t.getPriority().val(),i=YH(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=YH(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ju(a,qe(i)):t}{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ju(i))),o.forEachChild(Oe,(a,u)=>{const c=rA(u,e.getImmediateChild(a),n);c!==u&&(s=s.updateImmediateChild(a,c))}),s}}class iA{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function zm(t,e){let n=e instanceof Te?e:new Te(e),r=t,i=ae(n);for(;null!==i;){const s=Qa(r.node.children,i)||{children:{},childCount:0};r=new iA(i,r,s),n=Re(n),i=ae(n)}return r}function Wo(t){return t.node.value}function sA(t,e){t.node.value=e,oA(t)}function ZH(t){return t.node.childCount>0}function qm(t,e){kt(t.node.children,(n,r)=>{e(new iA(n,t,r))})}function JH(t,e,n,r){n&&!r&&e(t),qm(t,i=>{JH(i,e,!0,r)}),n&&r&&e(t)}function ah(t){return new Te(null===t.parent?t.name:ah(t.parent)+"/"+t.name)}function oA(t){null!==t.parent&&function kfe(t,e,n){const r=function Rfe(t){return void 0===Wo(t)&&!ZH(t)}(n),i=gi(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,oA(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,oA(t))}(t.parent,t.name,t)}const Mfe=/[\[\].#$\/\u0000-\u001F\u007F]/,Pfe=/[\[\].#$\u0000-\u001F\u007F]/,aA=10485760,Km=function(t){return"string"==typeof t&&0!==t.length&&!Mfe.test(t)},ch=function(t,e,n){const r=n instanceof Te?new Xde(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Bo(r));if("function"==typeof e)throw new Error(t+"contains a function "+Bo(r)+" with contents = "+e.toString());if(Em(e))throw new Error(t+"contains "+e.toString()+" "+Bo(r));if("string"==typeof e&&e.length>aA/3&&Cp(e)>aA)throw new Error(t+"contains a string greater than "+aA+" utf8 bytes "+Bo(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(kt(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!Km(o)))throw new Error(t+" contains an invalid key ("+o+") "+Bo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Zde(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Cp(e),lH(t)})(r,o),ch(t,a,r),function Jde(t){const e=t.parts_.pop();t.byteLength_-=Cp(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)}),i&&s)throw new Error(t+' contains ".value" child '+Bo(r)+" in addition to actual children.")}},nG=function(t,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Km(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),function(t){return"string"==typeof t&&0!==t.length&&!Pfe.test(t)}(t)}(n))throw new Error(function Ep(t,e){return`${t} failed: ${e} argument `}(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ufe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wn(t,e,n){(function Qm(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==n&&!C0(s,n.path)&&(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)})(t,n),function iG(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];i&&(e(i.path)?(Vfe(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}(t,r=>ar(r,e)||ar(e,r))}function Vfe(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(null!==n){t.events[e]=null;const r=n.getEventRunner();Uo&&Nt("event: "+n.toString()),Bu(r)}}}class $fe{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ufe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=km(),this.transactionQueueTree_=new iA,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function oG(t){const n=t.infoData_.getNode(new Te(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function dh(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:oG(t)})}function aG(t,e,n,r,i){t.dataUpdateCount++;const s=new Te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const u=Ip(n,c=>qe(c));o=function Ife(t,e,n,r){const i=X0(t,r);if(i){const s=Z0(i),o=s.path,a=s.queryId,u=mn(o,e),c=Fe.fromObject(n);return J0(t,o,new zu(U0(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{const u=qe(n);o=function zH(t,e,n,r){const i=X0(t,r);if(null!=i){const s=Z0(i),o=s.path,a=s.queryId,u=mn(o,e);return J0(t,o,new jo(U0(a),u,n))}return[]}(t.serverSyncTree_,s,u,i)}else if(r){const u=Ip(n,c=>qe(c));o=function yfe(t,e,n){const r=Fe.fromObject(n);return Ku(t,new zu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,u)}else{const u=qe(n);o=ih(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=Yu(t,s)),Wn(t.eventQueue_,a,o)}function uG(t,e){lA(t,"connected",e),!1===e&&function zfe(t){Qu(t,"onDisconnectEvents");const e=dh(t),n=km();O0(t.onDisconnect_,ve(),(i,s)=>{const o=function(t,e,n,r){return rA(e,new tA(n,t),r)}(i,s,t.serverSyncTree_,e);Wu(n,i,o)});let r=[];O0(n,ve(),(i,s)=>{r=r.concat(ih(t.serverSyncTree_,i,s));const o=function pA(t,e){const n=ah(dG(t,e)),r=zm(t.transactionQueueTree_,e);return function Nfe(t,e,n){let r=n?t:t.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{gA(t,i)}),gA(t,r),JH(r,i=>{gA(t,i)}),n}(t,i);Yu(t,o)}),t.onDisconnect_=km(),Wn(t.eventQueue_,ve(),r)}(t)}function lA(t,e,n){const r=new Te("/.info/"+e),i=qe(n);t.infoData_.updateSnapshot(r,i);const s=ih(t.infoSyncTree_,r,i);Wn(t.eventQueue_,r,s)}function Ym(t){return t.nextWriteId_++}function Qu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Nt(n,...e)}function fA(t,e,n){return Gm(t.serverSyncTree_,e,n)||te.EMPTY_NODE}function Xm(t,e=t.transactionQueueTree_){if(e||Zm(t,e),Wo(e)){const n=hG(t,e);A(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function Jfe(t,e,n){const r=n.map(c=>c.currentWriteId),i=fA(t,e,r);let s=i;const o=i.hash();for(let c=0;c<n.length;c++){const l=n[c];A(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=mn(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}const a=s.val(!0),u=e;t.server_.put(u.toString(),a,c=>{Qu(t,"transaction put response",{path:u.toString(),status:c});let l=[];if("ok"===c){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Cs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Zm(t,zm(t.transactionQueueTree_,e)),Xm(t,t.transactionQueueTree_),Wn(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)Bu(d[h])}else{if("datastale"===c)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{nn("transaction at "+u.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Yu(t,e)}},o)}(t,ah(e),n)}else ZH(e)&&qm(e,n=>{Xm(t,n)})}function Yu(t,e){const n=dG(t,e),r=ah(n);return function epe(t,e,n){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const u=e[a],c=mn(n,u.path);let d,l=!1;if(A(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,d=u.abortReason,i=i.concat(Cs(t.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,d="maxretry",i=i.concat(Cs(t.serverSyncTree_,u.currentWriteId,!0));else{const h=fA(t,u.path,o);u.currentInputSnapshot=h;const f=e[a].update(h.val());if(void 0!==f){ch("transaction failed: Data returned ",f,u.path);let p=qe(f);"object"==typeof f&&null!=f&&gi(f,".priority")||(p=p.updatePriority(h.getPriority()));const _=u.currentWriteId,I=dh(t),E=nA(p,h,I);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=E,u.currentWriteId=Ym(t),o.splice(o.indexOf(_),1),i=i.concat(Q0(t.serverSyncTree_,u.path,E,u.currentWriteId,u.applyLocally)),i=i.concat(Cs(t.serverSyncTree_,_,!0))}else l=!0,d="nodata",i=i.concat(Cs(t.serverSyncTree_,u.currentWriteId,!0))}Wn(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===d?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(d),!1,null)))}Zm(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Bu(r[a]);Xm(t,t.transactionQueueTree_)}(t,hG(t,n),r),r}function dG(t,e){let n,r=t.transactionQueueTree_;for(n=ae(e);null!==n&&void 0===Wo(r);)r=zm(r,n),n=ae(e=Re(e));return r}function hG(t,e){const n=[];return fG(t,e,n),n.sort((r,i)=>r.order-i.order),n}function fG(t,e,n){const r=Wo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);qm(e,i=>{fG(t,i,n)})}function Zm(t,e){const n=Wo(e);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,sA(e,n.length>0?n:void 0)}qm(e,r=>{Zm(t,r)})}function gA(t,e){const n=Wo(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(A(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(A(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Cs(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?sA(e,void 0):n.length=s+1,Wn(t.eventQueue_,ah(e),i);for(let o=0;o<r.length;o++)Bu(r[o])}}const mA=function(t,e){const n=rpe(t),r=n.namespace;return"firebase.com"===n.domain&&Kr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&Kr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&nn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new m0(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,e,"",r!==n.subdomain),path:new Te(n.pathString)}},rpe=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if("string"==typeof t){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let l=t.indexOf("/");-1===l&&(l=t.length);let d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=function tpe(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(t.substring(l,d)));const h=function npe(t){const e={};"?"===t.charAt(0)&&(t=t.substring(1));for(const n of t.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):nn(`Invalid query segment '${n}' in query '${t}'`)}return e}(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=e.length;const f=e.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class zn{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ue(this._path)?null:E0(this._path)}get ref(){return new Dr(this._repo,this._path)}get _queryIdentifier(){const e=IH(this._queryParams),n=p0(e);return"{}"===n?"default":n}get _queryObject(){return IH(this._queryParams)}isEqual(e){if(!((e=vt(e))instanceof zn))return!1;const n=this._repo===e._repo,r=C0(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Qde(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)}}class Dr extends zn{constructor(e,n){super(e,n,new N0,!1)}get parent(){const e=cH(this._path);return null===e?null:new Dr(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function cfe(t){A(!Bm,"__referenceConstructor has already been defined"),Bm=t})(Dr),function pfe(t){A(!jm,"__referenceConstructor has already been defined"),jm=t}(Dr);const yA={};class Cpe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jfe(t,e,n){if(t.stats_=v0(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Nm(t.repoInfo_,(r,i,s,o)=>{aG(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>uG(t,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ut(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $o(t.repoInfo_,e,(r,i,s,o)=>{aG(t,r,i,s,o)},r=>{uG(t,r)},r=>{!function Hfe(t,e){kt(e,(n,r)=>{lA(t,n,r)})}(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=function Sde(t,e){const n=t.toString();return y0[n]||(y0[n]=e()),y0[n]}(t.repoInfo_,()=>new She(t.stats_,t.server_)),t.infoData_=new Ehe,t.infoSyncTree_=new WH({startListening:(r,i,s,o)=>{let a=[];const u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=ih(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),lA(t,"connected",!1),t.serverSyncTree_=new WH({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{const c=o(a,u);Wn(t.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Dr(this._repo,ve())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wpe(t,e){const n=yA[e];(!n||n[t.key]!==t)&&Kr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),function lG(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Kr("Cannot call "+e+" on a deleted database.")}}function Tpe(t=yl(),e){const n=_i(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=iF("database");r&&function Dpe(t,e,n,r={}){(t=vt(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Kr("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Kr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zd(zd.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:oF(r.mockUserToken,t.app.options.projectId);s=new zd(o)}!function ype(t,e,n,r){t.repoInfo_=new m0(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(n,...r)}return n}$o.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},$o.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)},function bpe(t){(function lde(t){d0=t})(to),Jt(new Vt("database",(e,{instanceIdentifier:n})=>function vpe(t,e,n,r,i){let s=r||t.options.databaseURL;void 0===s&&(t.options.projectId||Kr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let u,c,o=mA(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(u=!0,s=`http://${c}?ns=${a.namespace}`,o=mA(s,i),a=o.repoInfo):u=!o.repoInfo.secure;const l=i&&u?new zd(zd.OWNER):new Tde(t.name,t.options,e);nG("Invalid Firebase Database URL",o),ue(o.path)||Kr("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Ipe(t,e,n,r){let i=yA[e.name];i||(i={},yA[e.name]=i);let s=i[t.toURLString()];return s&&Kr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new $fe(t,!1,n,r),i[t.toURLString()]=s,s}(a,t,l,new Cde(t.name,n));return new Cpe(d,t)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Se(Dj,"0.14.1",t),Se(Dj,"0.14.1","esm2017")}();class vA{constructor(e){return e}}const EG="database",wA=new j("angularfire2.database-instances");function Npe(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new vA(r)}}const kpe={provide:class xpe{constructor(){return Cl(EG)}},deps:[[new Qe,wA]]},Mpe={provide:vA,useFactory:function Rpe(t,e){const n=El(EG,t,e);return n&&new vA(n)},deps:[[new Qe,wA],Yi]};let Ppe=(()=>{class t{constructor(){Se("angularfire",Qi.full,"rtdb")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yn({type:t}),t.\u0275inj=Pn({providers:[Mpe,kpe]}),t})();const Fpe=sr(Tpe,!0);class Zu{}Zu.\u0275fac=function(e){return new(e||Zu)},Zu.\u0275mod=Yn({type:Zu,bootstrap:[Vd]}),Zu.\u0275inj=Pn({providers:[Tj,a0],imports:[jQ,za,function nne(t,...e){return{ngModule:tne,providers:[{provide:HE,useFactory:ene(t),multi:!0,deps:[be,Ot,Tl,...e]}]}}(()=>rne(Ole_firebase)),function cde(t,...e){return{ngModule:ude,providers:[{provide:l0,useFactory:sde(t),multi:!0,deps:[be,Ot,Tl,Dl,...e]}]}}(()=>$le()),function Lse(t,...e){return{ngModule:Fse,providers:[{provide:sD,useFactory:Mse(t),multi:!0,deps:[be,Ot,Tl,Dl,[new Qe,Bp],...e]}]}}(()=>Vse()),function Ope(t,...e){return{ngModule:Ppe,providers:[{provide:wA,useFactory:Npe(t),multi:!0,deps:[be,Ot,Tl,Dl,[new Qe,iD],[new Qe,Bp],...e]}]}}(()=>Fpe()),function Ale(t,...e){return{ngModule:Sle,providers:[{provide:o0,useFactory:Tle(t),multi:!0,deps:[be,Ot,Tl,Dl,[new Qe,iD],[new Qe,Bp],...e]}]}}(()=>kle())]}),$Q().bootstrapModule(Zu).catch(t=>console.error(t))}},Ne=>{Ne(Ne.s=777)}]);